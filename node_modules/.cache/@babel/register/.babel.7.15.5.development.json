{
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/index.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nvar _start = require(\"./start\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_loglevel.default.setLevel(\"info\");\n\n(0, _start.startServer)();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImxvZ2dlciIsInNldExldmVsIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOzs7O0FBQ0FBLGtCQUFPQyxRQUFQLENBQWdCLE1BQWhCOztBQUNBIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tZXJvai9EZXNrdG9wL0phdmFTY3JpcHQveW91VHViZS9zZXJ2ZXIvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2dnZXIgZnJvbSBcImxvZ2xldmVsXCI7XG5pbXBvcnQgeyBzdGFydFNlcnZlciB9IGZyb20gXCIuL3N0YXJ0XCI7XG5sb2dnZXIuc2V0TGV2ZWwoXCJpbmZvXCIpO1xuc3RhcnRTZXJ2ZXIoKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "logger",
        "setLevel"
      ],
      "mappings": ";;AAAA;;AACA;;;;AACAA,kBAAOC,QAAP,CAAgB,MAAhB;;AACA",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
      "sourcesContent": [
        "import logger from \"loglevel\";\nimport { startServer } from \"./start\";\nlogger.setLevel(\"info\");\nstartServer();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
        "sourceFileName": "start.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.startServer = startServer;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nrequire(\"express-async-errors\");\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\n\nvar _routes = require(\"./routes\");\n\nvar _error = require(\"./middleware/error\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Import this module to handle errors when using async functions for our route handlers\n_dotenv.default.config();\n\nfunction startServer({\n  port = process.env.PORT\n} = {}) {\n  const app = (0, _express.default)();\n  app.use((0, _morgan.default)(\"dev\"));\n  app.use((0, _cors.default)());\n  app.use((0, _cookieParser.default)());\n  app.use(_express.default.json()); // all API routes are prefixed with /api/v1\n\n  app.use(\"/api/v1\", (0, _routes.getRoutes)()); // Generic error handler if errors are missed by 'express-async-errors' middleware\n\n  app.use(_error.errorMiddleware); // When our project is pushed to production, we will serve // the react app using express.static() middleware\n\n  if (process.env.NODE_ENV === \"production\") {\n    app.use(_express.default.static(_path.default.resolve(__dirname, \"../client/build\"))); // Any request not caught by our API will be routed\n    // to our built react app\n\n    app.get(\"*\", function (req, res) {\n      res.sendFile(_path.default.resolve(__dirname, \"../client/build\", \"index.html\"));\n    });\n  } // This block of code is made to reliably start and close our express app\n  // It is written as a promise, which can be more easily tested\n\n\n  return new Promise(resolve => {\n    const server = app.listen(port, () => {\n      _loglevel.default.info(`Listening on port ${server.address().port}`);\n\n      const originalClose = server.close.bind(server);\n\n      server.close = () => {\n        return new Promise(resolveClose => {\n          originalClose(resolveClose);\n        });\n      }; // This function properly closes the server when the program exits\n\n\n      (0, _error.setupCloseOnExit)(server);\n      resolve(server);\n    });\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXJ0LmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsInN0YXJ0U2VydmVyIiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwiYXBwIiwidXNlIiwiZXhwcmVzcyIsImpzb24iLCJlcnJvck1pZGRsZXdhcmUiLCJOT0RFX0VOViIsInN0YXRpYyIsInBhdGgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiZ2V0IiwicmVxIiwicmVzIiwic2VuZEZpbGUiLCJQcm9taXNlIiwic2VydmVyIiwibGlzdGVuIiwibG9nZ2VyIiwiaW5mbyIsImFkZHJlc3MiLCJvcmlnaW5hbENsb3NlIiwiY2xvc2UiLCJiaW5kIiwicmVzb2x2ZUNsb3NlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFWQTtBQVlBQSxnQkFBT0MsTUFBUDs7QUFFQSxTQUFTQyxXQUFULENBQXFCO0FBQUVDLEVBQUFBLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDO0FBQXJCLElBQThCLEVBQW5ELEVBQXVEO0FBQ3JELFFBQU1DLEdBQUcsR0FBRyx1QkFBWjtBQUNBQSxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxxQkFBTyxLQUFQLENBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsb0JBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsNEJBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVFDLGlCQUFRQyxJQUFSLEVBQVIsRUFMcUQsQ0FNckQ7O0FBQ0FILEVBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLFNBQVIsRUFBbUIsd0JBQW5CLEVBUHFELENBU3JEOztBQUNBRCxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUUcsc0JBQVIsRUFWcUQsQ0FZckQ7O0FBQ0EsTUFBSVAsT0FBTyxDQUFDQyxHQUFSLENBQVlPLFFBQVosS0FBeUIsWUFBN0IsRUFBMkM7QUFDekNMLElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxpQkFBUUksTUFBUixDQUFlQyxjQUFLQyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsaUJBQXhCLENBQWYsQ0FBUixFQUR5QyxDQUd6QztBQUNBOztBQUNBVCxJQUFBQSxHQUFHLENBQUNVLEdBQUosQ0FBUSxHQUFSLEVBQWEsVUFBVUMsR0FBVixFQUFlQyxHQUFmLEVBQW9CO0FBQy9CQSxNQUFBQSxHQUFHLENBQUNDLFFBQUosQ0FBYU4sY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLGlCQUF4QixFQUEyQyxZQUEzQyxDQUFiO0FBQ0QsS0FGRDtBQUdELEdBckJvRCxDQXVCckQ7QUFDQTs7O0FBQ0EsU0FBTyxJQUFJSyxPQUFKLENBQWFOLE9BQUQsSUFBYTtBQUM5QixVQUFNTyxNQUFNLEdBQUdmLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBV3BCLElBQVgsRUFBaUIsTUFBTTtBQUNwQ3FCLHdCQUFPQyxJQUFQLENBQWEscUJBQW9CSCxNQUFNLENBQUNJLE9BQVAsR0FBaUJ2QixJQUFLLEVBQXZEOztBQUVBLFlBQU13QixhQUFhLEdBQUdMLE1BQU0sQ0FBQ00sS0FBUCxDQUFhQyxJQUFiLENBQWtCUCxNQUFsQixDQUF0Qjs7QUFDQUEsTUFBQUEsTUFBTSxDQUFDTSxLQUFQLEdBQWUsTUFBTTtBQUNuQixlQUFPLElBQUlQLE9BQUosQ0FBYVMsWUFBRCxJQUFrQjtBQUNuQ0gsVUFBQUEsYUFBYSxDQUFDRyxZQUFELENBQWI7QUFDRCxTQUZNLENBQVA7QUFHRCxPQUpELENBSm9DLENBU3BDOzs7QUFDQSxtQ0FBaUJSLE1BQWpCO0FBQ0FQLE1BQUFBLE9BQU8sQ0FBQ08sTUFBRCxDQUFQO0FBQ0QsS0FaYyxDQUFmO0FBYUQsR0FkTSxDQUFQO0FBZUQiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcbi8vIEltcG9ydCB0aGlzIG1vZHVsZSB0byBoYW5kbGUgZXJyb3JzIHdoZW4gdXNpbmcgYXN5bmMgZnVuY3Rpb25zIGZvciBvdXIgcm91dGUgaGFuZGxlcnNcbmltcG9ydCBcImV4cHJlc3MtYXN5bmMtZXJyb3JzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcImxvZ2xldmVsXCI7XG5pbXBvcnQgbW9yZ2FuIGZyb20gXCJtb3JnYW5cIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tIFwiY29va2llLXBhcnNlclwiO1xuXG5pbXBvcnQgeyBnZXRSb3V0ZXMgfSBmcm9tIFwiLi9yb3V0ZXNcIjtcbmltcG9ydCB7IGVycm9yTWlkZGxld2FyZSwgc2V0dXBDbG9zZU9uRXhpdCB9IGZyb20gXCIuL21pZGRsZXdhcmUvZXJyb3JcIjtcblxuZG90ZW52LmNvbmZpZygpO1xuXG5mdW5jdGlvbiBzdGFydFNlcnZlcih7IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIH0gPSB7fSkge1xuICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG4gIGFwcC51c2UobW9yZ2FuKFwiZGV2XCIpKTtcbiAgYXBwLnVzZShjb3JzKCkpO1xuICBhcHAudXNlKGNvb2tpZVBhcnNlcigpKTtcbiAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gIC8vIGFsbCBBUEkgcm91dGVzIGFyZSBwcmVmaXhlZCB3aXRoIC9hcGkvdjFcbiAgYXBwLnVzZShcIi9hcGkvdjFcIiwgZ2V0Um91dGVzKCkpO1xuXG4gIC8vIEdlbmVyaWMgZXJyb3IgaGFuZGxlciBpZiBlcnJvcnMgYXJlIG1pc3NlZCBieSAnZXhwcmVzcy1hc3luYy1lcnJvcnMnIG1pZGRsZXdhcmVcbiAgYXBwLnVzZShlcnJvck1pZGRsZXdhcmUpO1xuXG4gIC8vIFdoZW4gb3VyIHByb2plY3QgaXMgcHVzaGVkIHRvIHByb2R1Y3Rpb24sIHdlIHdpbGwgc2VydmUgLy8gdGhlIHJlYWN0IGFwcCB1c2luZyBleHByZXNzLnN0YXRpYygpIG1pZGRsZXdhcmVcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xuICAgIGFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuLi9jbGllbnQvYnVpbGRcIikpKTtcblxuICAgIC8vIEFueSByZXF1ZXN0IG5vdCBjYXVnaHQgYnkgb3VyIEFQSSB3aWxsIGJlIHJvdXRlZFxuICAgIC8vIHRvIG91ciBidWlsdCByZWFjdCBhcHBcbiAgICBhcHAuZ2V0KFwiKlwiLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICAgIHJlcy5zZW5kRmlsZShwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uL2NsaWVudC9idWlsZFwiLCBcImluZGV4Lmh0bWxcIikpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gVGhpcyBibG9jayBvZiBjb2RlIGlzIG1hZGUgdG8gcmVsaWFibHkgc3RhcnQgYW5kIGNsb3NlIG91ciBleHByZXNzIGFwcFxuICAvLyBJdCBpcyB3cml0dGVuIGFzIGEgcHJvbWlzZSwgd2hpY2ggY2FuIGJlIG1vcmUgZWFzaWx5IHRlc3RlZFxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBzZXJ2ZXIgPSBhcHAubGlzdGVuKHBvcnQsICgpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKGBMaXN0ZW5pbmcgb24gcG9ydCAke3NlcnZlci5hZGRyZXNzKCkucG9ydH1gKTtcblxuICAgICAgY29uc3Qgb3JpZ2luYWxDbG9zZSA9IHNlcnZlci5jbG9zZS5iaW5kKHNlcnZlcik7XG4gICAgICBzZXJ2ZXIuY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZUNsb3NlKSA9PiB7XG4gICAgICAgICAgb3JpZ2luYWxDbG9zZShyZXNvbHZlQ2xvc2UpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICAvLyBUaGlzIGZ1bmN0aW9uIHByb3Blcmx5IGNsb3NlcyB0aGUgc2VydmVyIHdoZW4gdGhlIHByb2dyYW0gZXhpdHNcbiAgICAgIHNldHVwQ2xvc2VPbkV4aXQoc2VydmVyKTtcbiAgICAgIHJlc29sdmUoc2VydmVyKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCB7IHN0YXJ0U2VydmVyIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "start.js"
      ],
      "names": [
        "dotenv",
        "config",
        "startServer",
        "port",
        "process",
        "env",
        "PORT",
        "app",
        "use",
        "express",
        "json",
        "errorMiddleware",
        "NODE_ENV",
        "static",
        "path",
        "resolve",
        "__dirname",
        "get",
        "req",
        "res",
        "sendFile",
        "Promise",
        "server",
        "listen",
        "logger",
        "info",
        "address",
        "originalClose",
        "close",
        "bind",
        "resolveClose"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAVA;AAYAA,gBAAOC,MAAP;;AAEA,SAASC,WAAT,CAAqB;AAAEC,EAAAA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC;AAArB,IAA8B,EAAnD,EAAuD;AACrD,QAAMC,GAAG,GAAG,uBAAZ;AACAA,EAAAA,GAAG,CAACC,GAAJ,CAAQ,qBAAO,KAAP,CAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQ,4BAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQC,IAAR,EAAR,EALqD,CAMrD;;AACAH,EAAAA,GAAG,CAACC,GAAJ,CAAQ,SAAR,EAAmB,wBAAnB,EAPqD,CASrD;;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQG,sBAAR,EAVqD,CAYrD;;AACA,MAAIP,OAAO,CAACC,GAAR,CAAYO,QAAZ,KAAyB,YAA7B,EAA2C;AACzCL,IAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQI,MAAR,CAAeC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,CAAf,CAAR,EADyC,CAGzC;AACA;;AACAT,IAAAA,GAAG,CAACU,GAAJ,CAAQ,GAAR,EAAa,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC/BA,MAAAA,GAAG,CAACC,QAAJ,CAAaN,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,EAA2C,YAA3C,CAAb;AACD,KAFD;AAGD,GArBoD,CAuBrD;AACA;;;AACA,SAAO,IAAIK,OAAJ,CAAaN,OAAD,IAAa;AAC9B,UAAMO,MAAM,GAAGf,GAAG,CAACgB,MAAJ,CAAWpB,IAAX,EAAiB,MAAM;AACpCqB,wBAAOC,IAAP,CAAa,qBAAoBH,MAAM,CAACI,OAAP,GAAiBvB,IAAK,EAAvD;;AAEA,YAAMwB,aAAa,GAAGL,MAAM,CAACM,KAAP,CAAaC,IAAb,CAAkBP,MAAlB,CAAtB;;AACAA,MAAAA,MAAM,CAACM,KAAP,GAAe,MAAM;AACnB,eAAO,IAAIP,OAAJ,CAAaS,YAAD,IAAkB;AACnCH,UAAAA,aAAa,CAACG,YAAD,CAAb;AACD,SAFM,CAAP;AAGD,OAJD,CAJoC,CASpC;;;AACA,mCAAiBR,MAAjB;AACAP,MAAAA,OAAO,CAACO,MAAD,CAAP;AACD,KAZc,CAAf;AAaD,GAdM,CAAP;AAeD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
      "sourcesContent": [
        "import express from \"express\";\n// Import this module to handle errors when using async functions for our route handlers\nimport \"express-async-errors\";\nimport path from \"path\";\nimport cors from \"cors\";\nimport logger from \"loglevel\";\nimport morgan from \"morgan\";\nimport dotenv from \"dotenv\";\nimport cookieParser from \"cookie-parser\";\n\nimport { getRoutes } from \"./routes\";\nimport { errorMiddleware, setupCloseOnExit } from \"./middleware/error\";\n\ndotenv.config();\n\nfunction startServer({ port = process.env.PORT } = {}) {\n  const app = express();\n  app.use(morgan(\"dev\"));\n  app.use(cors());\n  app.use(cookieParser());\n  app.use(express.json());\n  // all API routes are prefixed with /api/v1\n  app.use(\"/api/v1\", getRoutes());\n\n  // Generic error handler if errors are missed by 'express-async-errors' middleware\n  app.use(errorMiddleware);\n\n  // When our project is pushed to production, we will serve // the react app using express.static() middleware\n  if (process.env.NODE_ENV === \"production\") {\n    app.use(express.static(path.resolve(__dirname, \"../client/build\")));\n\n    // Any request not caught by our API will be routed\n    // to our built react app\n    app.get(\"*\", function (req, res) {\n      res.sendFile(path.resolve(__dirname, \"../client/build\", \"index.html\"));\n    });\n  }\n\n  // This block of code is made to reliably start and close our express app\n  // It is written as a promise, which can be more easily tested\n  return new Promise((resolve) => {\n    const server = app.listen(port, () => {\n      logger.info(`Listening on port ${server.address().port}`);\n\n      const originalClose = server.close.bind(server);\n      server.close = () => {\n        return new Promise((resolveClose) => {\n          originalClose(resolveClose);\n        });\n      };\n      // This function properly closes the server when the program exits\n      setupCloseOnExit(server);\n      resolve(server);\n    });\n  });\n}\n\nexport { startServer };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRoutes = getRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _auth = require(\"./auth\");\n\nvar _user = require(\"./user\");\n\nvar _video = require(\"./video\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getRoutes() {\n  // All routes in our Node API are placed on this router\n  const router = _express.default.Router(); // router.use() prefixes our route (i.e. /api/v1/auth)\n\n\n  router.use(\"/auth\", (0, _auth.getAuthRoutes)());\n  router.use(\"/users\", (0, _user.getUserRoutes)());\n  router.use(\"/videos\", (0, _video.getVideoRoutes)());\n  return router;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImdldFJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJ1c2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUVBLFNBQVNBLFNBQVQsR0FBcUI7QUFDbkI7QUFDQSxRQUFNQyxNQUFNLEdBQUdDLGlCQUFRQyxNQUFSLEVBQWYsQ0FGbUIsQ0FJbkI7OztBQUNBRixFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxPQUFYLEVBQW9CLDBCQUFwQjtBQUNBSCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxRQUFYLEVBQXFCLDBCQUFyQjtBQUNBSCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxTQUFYLEVBQXNCLDRCQUF0QjtBQUVBLFNBQU9ILE1BQVA7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9KYXZhU2NyaXB0L3lvdVR1YmUvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcblxuaW1wb3J0IHsgZ2V0QXV0aFJvdXRlcyB9IGZyb20gXCIuL2F1dGhcIjtcbmltcG9ydCB7IGdldFVzZXJSb3V0ZXMgfSBmcm9tIFwiLi91c2VyXCI7XG5pbXBvcnQgeyBnZXRWaWRlb1JvdXRlcyB9IGZyb20gXCIuL3ZpZGVvXCI7XG5cbmZ1bmN0aW9uIGdldFJvdXRlcygpIHtcbiAgLy8gQWxsIHJvdXRlcyBpbiBvdXIgTm9kZSBBUEkgYXJlIHBsYWNlZCBvbiB0aGlzIHJvdXRlclxuICBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gIC8vIHJvdXRlci51c2UoKSBwcmVmaXhlcyBvdXIgcm91dGUgKGkuZS4gL2FwaS92MS9hdXRoKVxuICByb3V0ZXIudXNlKFwiL2F1dGhcIiwgZ2V0QXV0aFJvdXRlcygpKTtcbiAgcm91dGVyLnVzZShcIi91c2Vyc1wiLCBnZXRVc2VyUm91dGVzKCkpO1xuICByb3V0ZXIudXNlKFwiL3ZpZGVvc1wiLCBnZXRWaWRlb1JvdXRlcygpKTtcblxuICByZXR1cm4gcm91dGVyO1xufVxuXG5leHBvcnQgeyBnZXRSb3V0ZXMgfTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "getRoutes",
        "router",
        "express",
        "Router",
        "use"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;;;AAEA,SAASA,SAAT,GAAqB;AACnB;AACA,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf,CAFmB,CAInB;;;AACAF,EAAAA,MAAM,CAACG,GAAP,CAAW,OAAX,EAAoB,0BAApB;AACAH,EAAAA,MAAM,CAACG,GAAP,CAAW,QAAX,EAAqB,0BAArB;AACAH,EAAAA,MAAM,CAACG,GAAP,CAAW,SAAX,EAAsB,4BAAtB;AAEA,SAAOH,MAAP;AACD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\n\nimport { getAuthRoutes } from \"./auth\";\nimport { getUserRoutes } from \"./user\";\nimport { getVideoRoutes } from \"./video\";\n\nfunction getRoutes() {\n  // All routes in our Node API are placed on this router\n  const router = express.Router();\n\n  // router.use() prefixes our route (i.e. /api/v1/auth)\n  router.use(\"/auth\", getAuthRoutes());\n  router.use(\"/users\", getUserRoutes());\n  router.use(\"/videos\", getVideoRoutes());\n\n  return router;\n}\n\nexport { getRoutes };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAuthRoutes = getAuthRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// A function to get the routes.\n// All route definitions are in one place and we only need to export one thing\nfunction getAuthRoutes() {\n  const router = _express.default.Router();\n\n  return router;\n} // All controllers/utility functions here\n\n\nasync function googleLogin(req, res) {}\n\nasync function me(req, res) {}\n\nfunction signout(req, res) {}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiZ2V0QXV0aFJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnb29nbGVMb2dpbiIsInJlcSIsInJlcyIsIm1lIiwic2lnbm91dCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBQ0E7QUFDQTtBQUNBLFNBQVNBLGFBQVQsR0FBeUI7QUFDdkIsUUFBTUMsTUFBTSxHQUFHQyxpQkFBUUMsTUFBUixFQUFmOztBQUVBLFNBQU9GLE1BQVA7QUFDRCxDLENBRUQ7OztBQUNBLGVBQWVHLFdBQWYsQ0FBMkJDLEdBQTNCLEVBQWdDQyxHQUFoQyxFQUFxQyxDQUFFOztBQUV2QyxlQUFlQyxFQUFmLENBQWtCRixHQUFsQixFQUF1QkMsR0FBdkIsRUFBNEIsQ0FBRTs7QUFFOUIsU0FBU0UsT0FBVCxDQUFpQkgsR0FBakIsRUFBc0JDLEdBQXRCLEVBQTJCLENBQUUiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG4vLyBBIGZ1bmN0aW9uIHRvIGdldCB0aGUgcm91dGVzLlxuLy8gQWxsIHJvdXRlIGRlZmluaXRpb25zIGFyZSBpbiBvbmUgcGxhY2UgYW5kIHdlIG9ubHkgbmVlZCB0byBleHBvcnQgb25lIHRoaW5nXG5mdW5jdGlvbiBnZXRBdXRoUm91dGVzKCkge1xuICBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gIHJldHVybiByb3V0ZXI7XG59XG5cbi8vIEFsbCBjb250cm9sbGVycy91dGlsaXR5IGZ1bmN0aW9ucyBoZXJlXG5hc3luYyBmdW5jdGlvbiBnb29nbGVMb2dpbihyZXEsIHJlcykge31cblxuYXN5bmMgZnVuY3Rpb24gbWUocmVxLCByZXMpIHt9XG5cbmZ1bmN0aW9uIHNpZ25vdXQocmVxLCByZXMpIHt9XG5cbmV4cG9ydCB7IGdldEF1dGhSb3V0ZXMgfTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "getAuthRoutes",
        "router",
        "express",
        "Router",
        "googleLogin",
        "req",
        "res",
        "me",
        "signout"
      ],
      "mappings": ";;;;;;;AAAA;;;;AACA;AACA;AACA,SAASA,aAAT,GAAyB;AACvB,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEA,SAAOF,MAAP;AACD,C,CAED;;;AACA,eAAeG,WAAf,CAA2BC,GAA3B,EAAgCC,GAAhC,EAAqC,CAAE;;AAEvC,eAAeC,EAAf,CAAkBF,GAAlB,EAAuBC,GAAvB,EAA4B,CAAE;;AAE9B,SAASE,OAAT,CAAiBH,GAAjB,EAAsBC,GAAtB,EAA2B,CAAE",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\n// A function to get the routes.\n// All route definitions are in one place and we only need to export one thing\nfunction getAuthRoutes() {\n  const router = express.Router();\n\n  return router;\n}\n\n// All controllers/utility functions here\nasync function googleLogin(req, res) {}\n\nasync function me(req, res) {}\n\nfunction signout(req, res) {}\n\nexport { getAuthRoutes };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUserRoutes = getUserRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _client = require(\"@prisma/client\");\n\nvar _authorization = require(\"../middleware/authorization\");\n\nvar _video = require(\"./video\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst prisma = new _client.PrismaClient();\n\nfunction getUserRoutes() {\n  const router = _express.default.Router();\n\n  router.get('/', _authorization.protect, getRecommendedChannels);\n  router.put('/', _authorization.protect, editUser);\n  router.get('/liked-videos', _authorization.protect, getLikedVideos);\n  router.get('/history', _authorization.protect, getHistory);\n  router.get('/subscriptions', _authorization.protect, getFeed);\n  router.get('/search', _authorization.getAuthUser, searchUser);\n  router.get('/:userId', _authorization.getAuthUser, getProfile);\n  router.get('/:userId/toggle-subscribe', _authorization.protect, toggleSubscribe);\n  return router;\n}\n\nasync function getLikedVideos(req, res) {\n  await getVideos(prisma.videoLike, req, res);\n}\n\nasync function getHistory(req, res, next) {\n  await getVideos(prisma.view, req, res);\n}\n\nasync function getVideos(model, req, res) {\n  const videoRelations = await model.findMany({\n    where: {\n      userId: req.user.id\n    },\n    orderBy: {\n      createdAt: 'desc'\n    }\n  });\n  const VideoIds = videoRelations.map(videoLike => videoLike.videoId);\n  let videos = await prisma.video.findMany({\n    where: {\n      id: {\n        in: VideoIds\n      }\n    },\n    include: {\n      user: true\n    }\n  });\n  console.log(\"Befor if check\", videos);\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await (0, _video.getVideoViews)(videos);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function toggleSubscribe(req, res, next) {\n  if (req.user.id === req.params.userId) {\n    return next({\n      message: \"You can`t subscribe to your own channel\",\n      statusCode: 400\n    });\n  }\n\n  const user = await prisma.user.findUnique({\n    where: {\n      id: req.params.userId\n    }\n  });\n\n  if (!user) {\n    return next({\n      message: \"User with this Id doesn`t excist\",\n      statusCode: 404\n    });\n  }\n\n  const isSubscribed = await prisma.subscription.findFirst({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      },\n      subscribedToId: {\n        equals: req.params.userId\n      }\n    }\n  });\n\n  if (isSubscribed) {\n    await prisma.subscription.delete({\n      where: {\n        id: isSubscribed.id\n      }\n    });\n  } else {\n    await prisma.subscription.create({\n      data: {\n        subscriber: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        subscribedTo: {\n          connect: {\n            id: req.params.userId\n          }\n        }\n      }\n    });\n  }\n\n  res.status(200).json({});\n}\n\nasync function getFeed(req, res) {\n  const subscribedTo = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      }\n    }\n  });\n  const subscribtions = subscribedTo.map(sub => sub.subscribedToId);\n  const feed = await prisma.video.findMany({\n    where: {\n      userId: {\n        in: subscribtions\n      }\n    },\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n\n  if (!feed.length) {\n    console.log(\"inside\");\n    return res.status(200).json({\n      feed\n    });\n  }\n\n  const feedVideos = await (0, _video.getVideoViews)(feed);\n  console.log(\"outside\");\n  res.status(200).json({\n    feed: feedVideos\n  });\n}\n\nasync function searchUser(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      message: \"Please enter search query\",\n      statusCode: 400\n    });\n  }\n\n  const users = await prisma.user.findMany({\n    where: {\n      username: {\n        contains: req.query.query,\n        mode: \"insensitive\"\n      }\n    }\n  });\n\n  if (!users.length) {\n    return res.status(200).json({\n      users\n    });\n  }\n\n  for (const user of users) {\n    const subscribersCount = await prisma.subscription.count({\n      where: {\n        subscribedToId: {\n          equals: user.id\n        }\n      }\n    });\n    const videoCount = await prisma.video.count({\n      where: {\n        userId: user.id\n      }\n    });\n    let isMe = false;\n    let isSubscribed = false;\n\n    if (req.user) {\n      isMe = req.user.id === user.id;\n      isSubscribed = await prisma.subscription.findFirst({\n        where: {\n          AND: {\n            subscriberId: {\n              equals: req.user.id\n            },\n            subscribedToId: {\n              equals: user.id\n            }\n          }\n        }\n      });\n    }\n\n    user.subscribersCount = subscribersCount;\n    user.videoCount = videoCount;\n    user.isSubscribed = Boolean(isSubscribed);\n    user.isMe = isMe;\n  }\n\n  res.status(200).json({\n    users\n  });\n}\n\nasync function getRecommendedChannels(req, res) {\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        not: req.user.id\n      }\n    },\n    take: 10\n  });\n\n  if (!channels.length) {\n    return res.status(200).json({\n      channels\n    });\n  }\n\n  for (const channel of channels) {\n    const subscribersCount = await prisma.subscription.count({\n      where: {\n        subscribedToId: {\n          equals: channel.id\n        }\n      }\n    });\n    const videoCount = await prisma.video.count({\n      where: {\n        userId: channel.id\n      }\n    });\n    const isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        AND: {\n          subscriberId: {\n            equals: req.user.id\n          },\n          subscribedToId: {\n            equals: channel.id\n          }\n        }\n      }\n    });\n    channel.subscribersCount = subscribersCount;\n    channel.videoCount = videoCount;\n    channel.isSubscribed = Boolean(isSubscribed);\n  }\n\n  return res.status(200).json({\n    channels\n  });\n}\n\nasync function getProfile(req, res, next) {\n  const user = await prisma.user.findUnique({\n    where: {\n      id: req.params.userId\n    }\n  });\n\n  if (!user) {\n    return next({\n      message: `No user found with id: ${req.params.userId}`,\n      statusCode: 404\n    });\n  }\n\n  const subscribersCount = await prisma.subscription.count({\n    where: {\n      subscribedToId: {\n        equals: user.id\n      }\n    }\n  });\n  let isMe = false;\n  let isSubscribed = false;\n\n  if (req.user) {\n    isMe = req.user.id === user.id;\n    isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        AND: {\n          subscriberId: {\n            equals: req.user.id\n          },\n          subscribedToId: {\n            equals: user.id\n          }\n        }\n      }\n    });\n  }\n\n  const subscribedTo = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: user.id\n      }\n    }\n  });\n  const subscribtions = subscribedTo.map(sub => sub.subscribedToId);\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        in: subscribtions\n      }\n    }\n  });\n\n  for (const channel of channels) {\n    const subscribersCount = await prisma.subscribtion.count({\n      where: {\n        subscribedToId: {\n          equals: channel.id\n        }\n      }\n    });\n    channel.subscribersCount = subscribersCount;\n  }\n\n  const videos = await prisma.video.findMany({\n    where: {\n      userId: {\n        equals: user.id\n      }\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n  user.subscribtionCount = subscribersCount;\n  user.isSubscribed = Boolean(isSubscribed);\n  user.isMe = isMe;\n  user.channels = channels;\n  user.videos = videos;\n\n  if (!videos.length) {\n    return res.status(200).json({\n      user\n    });\n  }\n\n  user.videos = await (0, _video.getVideoViews)(videos);\n  res.status(200).json({\n    user\n  });\n}\n\nasync function editUser(req, res) {\n  const {\n    username,\n    cover,\n    avatar,\n    about\n  } = req.body;\n  const user = await prisma.user.update({\n    where: {\n      id: req.user.id\n    },\n    data: {\n      username,\n      cover,\n      avatar,\n      about\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsicHJpc21hIiwiUHJpc21hQ2xpZW50IiwiZ2V0VXNlclJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJwcm90ZWN0IiwiZ2V0UmVjb21tZW5kZWRDaGFubmVscyIsInB1dCIsImVkaXRVc2VyIiwiZ2V0TGlrZWRWaWRlb3MiLCJnZXRIaXN0b3J5IiwiZ2V0RmVlZCIsImdldEF1dGhVc2VyIiwic2VhcmNoVXNlciIsImdldFByb2ZpbGUiLCJ0b2dnbGVTdWJzY3JpYmUiLCJyZXEiLCJyZXMiLCJnZXRWaWRlb3MiLCJ2aWRlb0xpa2UiLCJuZXh0IiwidmlldyIsIm1vZGVsIiwidmlkZW9SZWxhdGlvbnMiLCJmaW5kTWFueSIsIndoZXJlIiwidXNlcklkIiwidXNlciIsImlkIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsIlZpZGVvSWRzIiwibWFwIiwidmlkZW9JZCIsInZpZGVvcyIsInZpZGVvIiwiaW4iLCJpbmNsdWRlIiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsInN0YXR1cyIsImpzb24iLCJwYXJhbXMiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSIsImZpbmRVbmlxdWUiLCJpc1N1YnNjcmliZWQiLCJzdWJzY3JpcHRpb24iLCJmaW5kRmlyc3QiLCJzdWJzY3JpYmVySWQiLCJlcXVhbHMiLCJzdWJzY3JpYmVkVG9JZCIsImRlbGV0ZSIsImNyZWF0ZSIsImRhdGEiLCJzdWJzY3JpYmVyIiwiY29ubmVjdCIsInN1YnNjcmliZWRUbyIsInN1YnNjcmlidGlvbnMiLCJzdWIiLCJmZWVkIiwiZmVlZFZpZGVvcyIsInF1ZXJ5IiwidXNlcnMiLCJ1c2VybmFtZSIsImNvbnRhaW5zIiwibW9kZSIsInN1YnNjcmliZXJzQ291bnQiLCJjb3VudCIsInZpZGVvQ291bnQiLCJpc01lIiwiQU5EIiwiQm9vbGVhbiIsImNoYW5uZWxzIiwibm90IiwidGFrZSIsImNoYW5uZWwiLCJzdWJzY3JpYnRpb24iLCJzdWJz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QUEsTUFISTtBQUlKQyxNQUFBQTtBQUpJO0FBSjhCLEdBQW5CLENBQW5CO0FBYUQiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuaW1wb3J0IHsgZ2V0QXV0aFVzZXIsIHByb3RlY3QgfSBmcm9tIFwiLi4vbWlkZGxld2FyZS9hdXRob3JpemF0aW9uXCI7XG5pbXBvcnQgeyBnZXRWaWRlb1ZpZXdzIH0gZnJvbSBcIi4vdmlkZW9cIlxuXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XG5cbmZ1bmN0aW9uIGdldFVzZXJSb3V0ZXMoKSB7XG4gIGNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbiAgcm91dGVyLmdldCgnLycsIHByb3RlY3QsIGdldFJlY29tbWVuZGVkQ2hhbm5lbHMpXG4gIHJvdXRlci5wdXQoJy8nLCBwcm90ZWN0LCBlZGl0VXNlcilcblxuICByb3V0ZXIuZ2V0KCcvbGlrZWQtdmlkZW9zJywgcHJvdGVjdCwgZ2V0TGlrZWRWaWRlb3MpXG4gIHJvdXRlci5nZXQoJy9oaXN0b3J5JywgcHJvdGVjdCwgZ2V0SGlzdG9yeSlcbiAgcm91dGVyLmdldCgnL3N1YnNjcmlwdGlvbnMnLCBwcm90ZWN0LCBnZXRGZWVkKVxuICByb3V0ZXIuZ2V0KCcvc2VhcmNoJywgZ2V0QXV0aFVzZXIsIHNlYXJjaFVzZXIpXG5cbiAgcm91dGVyLmdldCgnLzp1c2VySWQnLCBnZXRBdXRoVXNlciwgZ2V0UHJvZmlsZSlcbiAgcm91dGVyLmdldCgnLzp1c2VySWQvdG9nZ2xlLXN1YnNjcmliZScsIHByb3RlY3QsIHRvZ2dsZVN1YnNjcmliZSlcblxuICByZXR1cm4gcm91dGVyO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRMaWtlZFZpZGVvcyhyZXEsIHJlcykge1xuICBhd2FpdCBnZXRWaWRlb3MocHJpc21hLnZpZGVvTGlrZSwgcmVxLCByZXMpXG59XG5hc3luYyBmdW5jdGlvbiBnZXRIaXN0b3J5KHJlcSwgcmVzLCBuZXh0KSB7XG4gIGF3YWl0IGdldFZpZGVvcyhwcmlzbWEudmlldywgcmVxLCByZXMpXG5cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0VmlkZW9zKG1vZGVsLCByZXEsIHJlcykge1xuICBjb25zdCB2aWRlb1JlbGF0aW9ucyA9IGF3YWl0IG1vZGVsLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiByZXEudXNlci5pZFxuICAgIH0sXG4gICAgb3JkZXJCeToge1xuICAgICAgY3JlYXRlZEF0OiAnZGVzYydcbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgVmlkZW9JZHMgPSB2aWRlb1JlbGF0aW9ucy5tYXAoKHZpZGVvTGlrZSkgPT4gdmlkZW9MaWtlLnZpZGVvSWQpXG5cbiAgbGV0IHZpZGVvcyA9IGF3YWl0IHByaXNtYS52aWRlby5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiB7XG4gICAgICAgIGluOiBWaWRlb0lkc1xuICAgICAgfVxuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgdXNlcjogdHJ1ZVxuICAgIH1cbiAgfSlcbiAgY29uc29sZS5sb2coXCJCZWZvciBpZiBjaGVja1wiLCB2aWRlb3MpXG4gIGlmICghdmlkZW9zLmxlbmd0aCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvcyB9KVxuICB9XG5cbiAgdmlkZW9zID0gYXdhaXQgZ2V0VmlkZW9WaWV3cyh2aWRlb3MpO1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdmlkZW9zIH0pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHRvZ2dsZVN1YnNjcmliZShyZXEsIHJlcywgbmV4dCkge1xuICBpZiAocmVxLnVzZXIuaWQgPT09IHJlcS5wYXJhbXMudXNlcklkKSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogXCJZb3UgY2FuYHQgc3Vic2NyaWJlIHRvIHlvdXIgb3duIGNoYW5uZWxcIixcbiAgICAgIHN0YXR1c0NvZGU6IDQwMFxuICAgIH0pXG4gIH1cblxuICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLnVzZXJJZFxuICAgIH1cbiAgfSlcblxuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIlVzZXIgd2l0aCB0aGlzIElkIGRvZXNuYHQgZXhjaXN0XCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDRcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgaXNTdWJzY3JpYmVkID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7XG4gICAgICBzdWJzY3JpYmVySWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgfSxcbiAgICAgIHN1YnNjcmliZWRUb0lkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy51c2VySWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgaWYgKGlzU3Vic2NyaWJlZCkge1xuICAgIGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uZGVsZXRlKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkOiBpc1N1YnNjcmliZWQuaWRcbiAgICAgIH1cbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgc3Vic2NyaWJlcjoge1xuICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgIGlkOiByZXEudXNlci5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3Vic2NyaWJlZFRvOiB7XG4gICAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgICAgaWQ6IHJlcS5wYXJhbXMudXNlcklkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHt9KVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEZlZWQocmVxLCByZXMpIHtcbiAgY29uc3Qgc3Vic2NyaWJlZFRvID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHN1YnNjcmliZXJJZDoge1xuICAgICAgICBlcXVhbHM6IHJlcS51c2VyLmlkXG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBzdWJzY3JpYnRpb25zID0gc3Vic2NyaWJlZFRvLm1hcChzdWIgPT4gc3ViLnN1YnNjcmliZWRUb0lkKVxuXG4gIGNvbnN0IGZlZWQgPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICB1c2VySWQ6IHtcbiAgICAgICAgaW46IHN1YnNjcmlidGlvbnNcbiAgICAgIH1cbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXI6IHRydWVcbiAgICB9LFxuICAgIG9yZGVyQnk6IHtcbiAgICAgIGNyZWF0ZWRBdDogXCJkZXNjXCJcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCFmZWVkLmxlbmd0aCkge1xuICAgIGNvbnNvbGUubG9nKFwiaW5zaWRlXCIpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZmVlZCB9KVxuICB9XG5cbiAgY29uc3QgZmVlZFZpZGVvcyA9IGF3YWl0IGdldFZpZGVvVmlld3MoZmVlZClcbiAgY29uc29sZS5sb2coXCJvdXRzaWRlXCIpXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZmVlZDogZmVlZFZpZGVvcyB9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBzZWFyY2hVc2VyKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGlmICghcmVxLnF1ZXJ5LnF1ZXJ5KSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogXCJQbGVhc2UgZW50ZXIgc2VhcmNoIHF1ZXJ5XCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDAsXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IHVzZXJzID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICB1c2VybmFtZToge1xuICAgICAgICBjb250YWluczogcmVxLnF1ZXJ5LnF1ZXJ5LFxuICAgICAgICBtb2RlOiBcImluc2Vuc2l0aXZlXCJcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF1c2Vycy5sZW5ndGgpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VycyB9KVxuICB9XG5cbiAgZm9yIChjb25zdCB1c2VyIG9mIHVzZXJzKSB7XG4gICAgY29uc3Qgc3Vic2NyaWJlcnNDb3VudCA9IGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgc3Vic2NyaWJlZFRvSWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHVzZXIuaWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCB2aWRlb0NvdW50ID0gYXdhaXQgcHJpc21hLnZpZGVvLmNvdW50KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHVzZXJJZDogdXNlci5pZFxuICAgICAgfVxuICAgIH0pXG5cbiAgICBsZXQgaXNNZSA9IGZhbHNlO1xuICAgIGxldCBpc1N1YnNjcmliZWQgPSBmYWxzZTtcblxuICAgIGlmIChyZXEudXNlcikge1xuICAgICAgaXNNZSA9IHJlcS51c2VyLmlkID09PSB1c2VyLmlkO1xuXG4gICAgICBpc1N1YnNjcmliZWQgPSBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgQU5EOiB7XG4gICAgICAgICAgICBzdWJzY3JpYmVySWQ6IHtcbiAgICAgICAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1YnNjcmliZWRUb0lkOiB7XG4gICAgICAgICAgICAgIGVxdWFsczogdXNlci5pZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gICAgdXNlci5zdWJzY3JpYmVyc0NvdW50ID0gc3Vic2NyaWJlcnNDb3VudDtcbiAgICB1c2VyLnZpZGVvQ291bnQgPSB2aWRlb0NvdW50O1xuICAgIHVzZXIuaXNTdWJzY3JpYmVkID0gQm9vbGVhbihpc1N1YnNjcmliZWQpO1xuICAgIHVzZXIuaXNNZSA9IGlzTWU7XG4gIH1cblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVzZXJzIH0pXG5cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVjb21tZW5kZWRDaGFubmVscyhyZXEsIHJlcykge1xuICBjb25zdCBjaGFubmVscyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHtcbiAgICAgICAgbm90OiByZXEudXNlci5pZFxuICAgICAgfVxuICAgIH0sXG4gICAgdGFrZTogMTBcbiAgfSlcblxuICBpZiAoIWNoYW5uZWxzLmxlbmd0aCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGNoYW5uZWxzIH0pXG4gIH1cblxuICBmb3IgKGNvbnN0IGNoYW5uZWwgb2YgY2hhbm5lbHMpIHtcbiAgICBjb25zdCBzdWJzY3JpYmVyc0NvdW50ID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5jb3VudCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBzdWJzY3JpYmVkVG9JZDoge1xuICAgICAgICAgIGVxdWFsczogY2hhbm5lbC5pZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IHZpZGVvQ291bnQgPSBhd2FpdCBwcmlzbWEudmlkZW8uY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdXNlcklkOiBjaGFubmVsLmlkXG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IGlzU3Vic2NyaWJlZCA9IGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIEFORDoge1xuICAgICAgICAgIHN1YnNjcmliZXJJZDoge1xuICAgICAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3Vic2NyaWJlZFRvSWQ6IHtcbiAgICAgICAgICAgIGVxdWFsczogY2hhbm5lbC5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjaGFubmVsLnN1YnNjcmliZXJzQ291bnQgPSBzdWJzY3JpYmVyc0NvdW50O1xuICAgIGNoYW5uZWwudmlkZW9Db3VudCA9IHZpZGVvQ291bnQ7XG4gICAgY2hhbm5lbC5pc1N1YnNjcmliZWQgPSBCb29sZWFuKGlzU3Vic2NyaWJlZCk7XG4gIH1cblxuICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBjaGFubmVscyB9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRQcm9maWxlKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS5wYXJhbXMudXNlcklkXG4gICAgfVxuICB9KVxuXG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiBuZXh0KHtcbiAgICAgIG1lc3NhZ2U6IGBObyB1c2VyIGZvdW5kIHdpdGggaWQ6ICR7cmVxLnBhcmFtcy51c2VySWR9YCxcbiAgICAgIHN0YXR1c0NvZGU6IDQwNCxcbiAgICB9KVxuICB9XG5cbiAgY29uc3Qgc3Vic2NyaWJlcnNDb3VudCA9IGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uY291bnQoe1xuICAgIHdoZXJlOiB7XG4gICAgICBzdWJzY3JpYmVkVG9JZDoge1xuICAgICAgICBlcXVhbHM6IHVzZXIuaWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgbGV0IGlzTWUgPSBmYWxzZVxuICBsZXQgaXNTdWJzY3JpYmVkID0gZmFsc2VcblxuICBpZiAocmVxLnVzZXIpIHtcbiAgICBpc01lID0gcmVxLnVzZXIuaWQgPT09IHVzZXIuaWQ7XG5cbiAgICBpc1N1YnNjcmliZWQgPSBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBBTkQ6IHtcbiAgICAgICAgICBzdWJzY3JpYmVySWQ6IHtcbiAgICAgICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdWJzY3JpYmVkVG9JZDoge1xuICAgICAgICAgICAgZXF1YWxzOiB1c2VyLmlkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IHN1YnNjcmliZWRUbyA9IGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBzdWJzY3JpYmVySWQ6IHtcbiAgICAgICAgZXF1YWxzOiB1c2VyLmlkLFxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCBzdWJzY3JpYnRpb25zID0gc3Vic2NyaWJlZFRvLm1hcCgoc3ViKSA9PiBzdWIuc3Vic2NyaWJlZFRvSWQpO1xuXG4gIGNvbnN0IGNoYW5uZWxzID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDoge1xuICAgICAgICBpbjogc3Vic2NyaWJ0aW9uc1xuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBmb3IgKGNvbnN0IGNoYW5uZWwgb2YgY2hhbm5lbHMpIHtcbiAgICBjb25zdCBzdWJzY3JpYmVyc0NvdW50ID0gYXdhaXQgcHJpc21hLnN1YnNjcmlidGlvbi5jb3VudCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBzdWJzY3JpYmVkVG9JZDoge1xuICAgICAgICAgIGVxdWFsczogY2hhbm5lbC5pZCxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgY2hhbm5lbC5zdWJzY3JpYmVyc0NvdW50ID0gc3Vic2NyaWJlcnNDb3VudFxuICB9XG5cbiAgY29uc3QgdmlkZW9zID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiB7XG4gICAgICAgIGVxdWFsczogdXNlci5pZFxuICAgICAgfVxuICAgIH0sXG4gICAgb3JkZXJCeToge1xuICAgICAgY3JlYXRlZEF0OiBcImRlc2NcIlxuICAgIH1cbiAgfSlcblxuICB1c2VyLnN1YnNjcmlidGlvbkNvdW50ID0gc3Vic2NyaWJlcnNDb3VudDtcbiAgdXNlci5pc1N1YnNjcmliZWQgPSBCb29sZWFuKGlzU3Vic2NyaWJlZCk7XG4gIHVzZXIuaXNNZSA9IGlzTWU7XG4gIHVzZXIuY2hhbm5lbHMgPSBjaGFubmVscztcbiAgdXNlci52aWRlb3MgPSB2aWRlb3M7XG5cbiAgaWYgKCF2aWRlb3MubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlciB9KVxuICB9XG5cbiAgdXNlci52aWRlb3MgPSBhd2FpdCBnZXRWaWRlb1ZpZXdzKHZpZGVvcylcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVzZXIgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gZWRpdFVzZXIocmVxLCByZXMpIHtcbiAgY29uc3QgeyB1c2VybmFtZSwgY292ZXIsIGF2YXRhciwgYWJvdXQgfSA9IHJlcS5ib2R5O1xuXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogcmVxLnVzZXIuaWQsXG4gICAgfSxcbiAgICBkYXRhOiB7XG4gICAgICB1c2VybmFtZSxcbiAgICAgIGNvdmVyLFxuICAgICAgYXZhdGFyLFxuICAgICAgYWJvdXQsXG4gICAgfSxcblxuICB9KVxuXG59XG5cbmV4cG9ydCB7IGdldFVzZXJSb3V0ZXMgfTsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getUserRoutes",
        "router",
        "express",
        "Router",
        "get",
        "protect",
        "getRecommendedChannels",
        "put",
        "editUser",
        "getLikedVideos",
        "getHistory",
        "getFeed",
        "getAuthUser",
        "searchUser",
        "getProfile",
        "toggleSubscribe",
        "req",
        "res",
        "getVideos",
        "videoLike",
        "next",
        "view",
        "model",
        "videoRelations",
        "findMany",
        "where",
        "userId",
        "user",
        "id",
        "orderBy",
        "createdAt",
        "VideoIds",
        "map",
        "videoId",
        "videos",
        "video",
        "in",
        "include",
        "console",
        "log",
        "length",
        "status",
        "json",
        "params",
        "message",
        "statusCode",
        "findUnique",
        "isSubscribed",
        "subscription",
        "findFirst",
        "subscriberId",
        "equals",
        "subscribedToId",
        "delete",
        "create",
        "data",
        "subscriber",
        "connect",
        "subscribedTo",
        "subscribtions",
        "sub",
        "feed",
        "feedVideos",
        "query",
        "users",
        "username",
        "contains",
        "mode",
        "subscribersCount",
        "count",
        "videoCount",
        "isMe",
        "AND",
        "Boolean",
        "channels",
        "not",
        "take",
        "channel",
        "subscribtion",
        "subscribtionCount",
        "cover",
        "avatar",
        "about",
        "body",
        "update"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\nimport { PrismaClient } from \"@prisma/client\";\n\nimport { getAuthUser, protect } from \"../middleware/authorization\";\nimport { getVideoViews } from \"./video\"\n\nconst prisma = new PrismaClient();\n\nfunction getUserRoutes() {\n  const router = express.Router();\n\n  router.get('/', protect, getRecommendedChannels)\n  router.put('/', protect, editUser)\n\n  router.get('/liked-videos', protect, getLikedVideos)\n  router.get('/history', protect, getHistory)\n  router.get('/subscriptions', protect, getFeed)\n  router.get('/search', getAuthUser, searchUser)\n\n  router.get('/:userId', getAuthUser, getProfile)\n  router.get('/:userId/toggle-subscribe', protect, toggleSubscribe)\n\n  return router;\n}\n\nasync function getLikedVideos(req, res) {\n  await getVideos(prisma.videoLike, req, res)\n}\nasync function getHistory(req, res, next) {\n  await getVideos(prisma.view, req, res)\n\n}\n\nasync function getVideos(model, req, res) {\n  const videoRelations = await model.findMany({\n    where: {\n      userId: req.user.id\n    },\n    orderBy: {\n      createdAt: 'desc'\n    }\n  })\n\n  const VideoIds = videoRelations.map((videoLike) => videoLike.videoId)\n\n  let videos = await prisma.video.findMany({\n    where: {\n      id: {\n        in: VideoIds\n      }\n    },\n    include: {\n      user: true\n    }\n  })\n  console.log(\"Befor if check\", videos)\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n  }\n\n  videos = await getVideoViews(videos);\n\n  res.status(200).json({ videos })\n}\n\nasync function toggleSubscribe(req, res, next) {\n  if (req.user.id === req.params.userId) {\n    return next({\n      message: \"You can`t subscribe to your own channel\",\n      statusCode: 400\n    })\n  }\n\n  const user = await prisma.user.findUnique({\n    where: {\n      id: req.params.userId\n    }\n  })\n\n  if (!user) {\n    return next({\n      message: \"User with this Id doesn`t excist\",\n      statusCode: 404\n    })\n  }\n\n  const isSubscribed = await prisma.subscription.findFirst({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      },\n      subscribedToId: {\n        equals: req.params.userId\n      }\n    }\n  })\n\n  if (isSubscribed) {\n    await prisma.subscription.delete({\n      where: {\n        id: isSubscribed.id\n      }\n    })\n  } else {\n    await prisma.subscription.create({\n      data: {\n        subscriber: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        subscribedTo: {\n          connect: {\n            id: req.params.userId\n          }\n        }\n      }\n    })\n  }\n\n  res.status(200).json({})\n\n}\n\nasync function getFeed(req, res) {\n  const subscribedTo = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      }\n    }\n  });\n\n  const subscribtions = subscribedTo.map(sub => sub.subscribedToId)\n\n  const feed = await prisma.video.findMany({\n    where: {\n      userId: {\n        in: subscribtions\n      }\n    },\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  if (!feed.length) {\n    console.log(\"inside\")\n    return res.status(200).json({ feed })\n  }\n\n  const feedVideos = await getVideoViews(feed)\n  console.log(\"outside\")\n  res.status(200).json({ feed: feedVideos })\n}\n\nasync function searchUser(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      message: \"Please enter search query\",\n      statusCode: 400,\n    })\n  }\n\n  const users = await prisma.user.findMany({\n    where: {\n      username: {\n        contains: req.query.query,\n        mode: \"insensitive\"\n      }\n    }\n  })\n\n  if (!users.length) {\n    return res.status(200).json({ users })\n  }\n\n  for (const user of users) {\n    const subscribersCount = await prisma.subscription.count({\n      where: {\n        subscribedToId: {\n          equals: user.id\n        }\n      }\n    })\n\n    const videoCount = await prisma.video.count({\n      where: {\n        userId: user.id\n      }\n    })\n\n    let isMe = false;\n    let isSubscribed = false;\n\n    if (req.user) {\n      isMe = req.user.id === user.id;\n\n      isSubscribed = await prisma.subscription.findFirst({\n        where: {\n          AND: {\n            subscriberId: {\n              equals: req.user.id\n            },\n            subscribedToId: {\n              equals: user.id\n            }\n          }\n        }\n      })\n    }\n    user.subscribersCount = subscribersCount;\n    user.videoCount = videoCount;\n    user.isSubscribed = Boolean(isSubscribed);\n    user.isMe = isMe;\n  }\n\n  res.status(200).json({ users })\n\n}\n\nasync function getRecommendedChannels(req, res) {\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        not: req.user.id\n      }\n    },\n    take: 10\n  })\n\n  if (!channels.length) {\n    return res.status(200).json({ channels })\n  }\n\n  for (const channel of channels) {\n    const subscribersCount = await prisma.subscription.count({\n      where: {\n        subscribedToId: {\n          equals: channel.id\n        }\n      }\n    })\n\n    const videoCount = await prisma.video.count({\n      where: {\n        userId: channel.id\n      }\n    })\n\n    const isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        AND: {\n          subscriberId: {\n            equals: req.user.id\n          },\n          subscribedToId: {\n            equals: channel.id\n          }\n        }\n      }\n    })\n\n    channel.subscribersCount = subscribersCount;\n    channel.videoCount = videoCount;\n    channel.isSubscribed = Boolean(isSubscribed);\n  }\n\n  return res.status(200).json({ channels })\n}\n\nasync function getProfile(req, res, next) {\n  const user = await prisma.user.findUnique({\n    where: {\n      id: req.params.userId\n    }\n  })\n\n  if (!user) {\n    return next({\n      message: `No user found with id: ${req.params.userId}`,\n      statusCode: 404,\n    })\n  }\n\n  const subscribersCount = await prisma.subscription.count({\n    where: {\n      subscribedToId: {\n        equals: user.id\n      }\n    }\n  })\n\n  let isMe = false\n  let isSubscribed = false\n\n  if (req.user) {\n    isMe = req.user.id === user.id;\n\n    isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        AND: {\n          subscriberId: {\n            equals: req.user.id,\n          },\n          subscribedToId: {\n            equals: user.id\n          }\n        }\n      }\n    })\n  }\n\n  const subscribedTo = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: user.id,\n      }\n    }\n  })\n\n  const subscribtions = subscribedTo.map((sub) => sub.subscribedToId);\n\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        in: subscribtions\n      }\n    }\n  })\n\n  for (const channel of channels) {\n    const subscribersCount = await prisma.subscribtion.count({\n      where: {\n        subscribedToId: {\n          equals: channel.id,\n        }\n      }\n    })\n    channel.subscribersCount = subscribersCount\n  }\n\n  const videos = await prisma.video.findMany({\n    where: {\n      userId: {\n        equals: user.id\n      }\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  user.subscribtionCount = subscribersCount;\n  user.isSubscribed = Boolean(isSubscribed);\n  user.isMe = isMe;\n  user.channels = channels;\n  user.videos = videos;\n\n  if (!videos.length) {\n    return res.status(200).json({ user })\n  }\n\n  user.videos = await getVideoViews(videos)\n\n  res.status(200).json({ user })\n}\n\nasync function editUser(req, res) {\n  const { username, cover, avatar, about } = req.body;\n\n  const user = await prisma.user.update({\n    where: {\n      id: req.user.id,\n    },\n    data: {\n      username,\n      cover,\n      avatar,\n      about,\n    },\n\n  })\n\n}\n\nexport { getUserRoutes };"
      ]
    },
    "sourceType": "script",
    "mtime": 1635171317798
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "video.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getVideoRoutes = getVideoRoutes;\nexports.getVideoViews = getVideoViews;\n\nvar _express = _interopRequireWildcard(require(\"express\"));\n\nvar _client = require(\"@prisma/client\");\n\nvar _authorization = require(\"../middleware/authorization\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst prisma = new _client.PrismaClient();\n\nfunction getVideoRoutes() {\n  const router = _express.default.Router();\n\n  router.get('/', getRecommendedVideos);\n  router.post('/', _authorization.protect, addVideo);\n  router.get('/trending', getTrendingVideos);\n  router.get('/search', searchVideos);\n  router.get('/:videoId', _authorization.getAuthUser, getVideo);\n  router.get('/:videoId', _authorization.getAuthUser, addVideoView);\n  router.get('/:videoId/like', _authorization.protect, likeVideo);\n  router.get('/:videoId/dislike', _authorization.protect, dislikeVideo);\n  router.post('/:videoId/comment', _authorization.protect, addComment);\n  router.delete('/:videoId/delete', _authorization.protect, deleteVideo);\n  router.delete('/:videoId/comment/:commentId', _authorization.protect, deleteComment);\n  return router;\n}\n\nasync function getVideoViews(videos) {\n  for (const video of videos) {\n    const views = await prisma.view.count({\n      where: {\n        videoId: {\n          equals: video.id\n        }\n      }\n    });\n    video.views = views;\n  }\n\n  return videos;\n}\n\nasync function getRecommendedVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await getVideoViews(videos);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function getTrendingVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await getVideoViews(videos);\n  videos.sort((a, b) => b.views - a.views);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function searchVideos(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      statusCode: 400,\n      message: \"You haven`t entered the serachasd fasdf afgnkdcvbrjnbfjtbg\"\n    });\n  }\n\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    where: {\n      OR: [{\n        title: {\n          contains: req.query.query,\n          mode: \"insensitive\"\n        }\n      }, {\n        description: {\n          contains: req.query.query,\n          mode: \"insensitive\"\n        }\n      }]\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await getVideoViews(videos);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function addVideo(req, res) {\n  const {\n    title,\n    description,\n    url,\n    thumbnail\n  } = req.body;\n  const video = await prisma.video.create({\n    data: {\n      title,\n      description,\n      url,\n      thumbnail,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      }\n    }\n  });\n  res.status(200).json({\n    video\n  });\n}\n\nasync function addComment(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} doesn't exist`,\n      statusCode: 404\n    });\n  }\n\n  const comment = await prisma.comment.create({\n    data: {\n      text: req.body.text,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      },\n      video: {\n        connect: {\n          id: req.params.videoId\n        }\n      }\n    }\n  });\n  res.status(200).json({\n    comment\n  });\n}\n\nasync function deleteComment(req, res) {\n  const comment = await prisma.comment.findUnique({\n    where: {\n      id: req.params.commentId\n    },\n    select: {\n      userId: true\n    }\n  });\n\n  if (comment.userId !== req.user.id) {\n    return res.status(401).send(\"You are not authorised to delete this comment\");\n  }\n\n  await prisma.comment.delete({\n    where: {\n      id: req.params.commentId\n    }\n  });\n  res.status(200).json({}).send();\n}\n\nasync function addVideoView(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} id doesn't exist`,\n      statusCode: 404\n    });\n  }\n\n  if (req.user) {\n    await prisma.view.create({\n      data: {\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        }\n      }\n    });\n  } else {\n    await prisma.view.create({\n      data: {\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        }\n      }\n    });\n  }\n\n  res.status(200).json({});\n}\n\nasync function likeVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    });\n  }\n\n  const isLiked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: 1\n      }\n    }\n  });\n  const isDisliked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: -1\n      }\n    }\n  });\n\n  if (isLiked) {\n    await prisma.videoLike.delete({\n      where: {\n        id: isLiked.id\n      }\n    });\n  } else if (isDisliked) {\n    await prisma.videoLike.update({\n      where: {\n        id: isDisliked.id\n      },\n      data: {\n        like: 1\n      }\n    });\n  } else {\n    await prisma.videoLike.create({\n      data: {\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        like: 1\n      }\n    });\n  }\n\n  res.status(200).json({});\n}\n\nasync function dislikeVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    });\n  }\n\n  const isLiked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: 1\n      }\n    }\n  });\n  const isDisliked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: -1\n      }\n    }\n  });\n\n  if (isDisliked) {\n    await prisma.videoLike.delete({\n      where: {\n        id: isDisliked.id\n      }\n    });\n  } else if (isLiked) {\n    await prisma.videoLike.update({\n      where: {\n        id: isLiked.id\n      },\n      data: {\n        like: -1\n      }\n    });\n  } else {\n    await prisma.videoLike.create({\n      data: {\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        like: -1\n      }\n    });\n  }\n\n  res.status(200).json({});\n}\n\nasync function getVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    },\n    include: {\n      user: true,\n      comments: {\n        include: {\n          user: true\n        },\n        orderBy: {\n          createdAt: \"desc\"\n        }\n      }\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: `Video with Id: \"${req.params.videoId}\" not found`,\n      statusCode: 404\n    });\n  }\n\n  let isVideoMine = false;\n  let isLiked = false;\n  let isDisliked = false;\n  let isSubscribed = false;\n  let isViewed = false;\n\n  if (req.user) {\n    isVideoMine = req.user.id === video.userId;\n    isLiked = await prisma.videoLike.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: 1\n        }\n      }\n    });\n    isDisliked = await prisma.videoLike.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: -1\n        }\n      }\n    });\n    isViewed = prisma.view.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        }\n      }\n    });\n    isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        subscriberId: {\n          equals: req.user.id\n        },\n        subscribedToId: {\n          equals: video.userId\n        }\n      }\n    });\n  }\n\n  const likesCount = await prisma.videoLike.count({\n    where: {\n      AND: {\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: 1\n        }\n      }\n    }\n  });\n  const dislikesCount = await prisma.videoLike.count({\n    where: {\n      AND: {\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: -1\n        }\n      }\n    }\n  });\n  const views = await prisma.view.count({\n    where: {\n      videoId: {\n        equals: video.id\n      }\n    }\n  });\n  const subscribersCount = await prisma.subscription.count({\n    where: {\n      subscribedToId: {\n        equals: video.userId\n      }\n    }\n  });\n  video.commentsCount = video.comments.length;\n  video.isLiked = Boolean(isLiked);\n  video.isDisliked = Boolean(isDisliked);\n  video.likesCount = likesCount;\n  video.views = views;\n  video.dislikesCount = dislikesCount;\n  video.isVideoMine = isVideoMine;\n  video.isSubscribed = Boolean(isSubscribed);\n  video.isViewed = Boolean(isViewed);\n  video.subscribersCount = subscribersCount;\n  res.status(200).json({\n    video\n  });\n}\n\nasync function deleteVideo(req, res) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    },\n    select: {\n      userId: true\n    }\n  });\n\n  if (req.user.id !== video.userId) {\n    return res.status(401).send('You are not authorizd to delete this video');\n  }\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    });\n  }\n\n  await prisma.view.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  });\n  await prisma.comment.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  });\n  await prisma.videoLike.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  });\n  await prisma.video.delete({\n    where: {\n      id: req.params.videoId\n    }\n  });\n  res.status(200).json({});\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvLmpzIl0sIm5hbWVzIjpbInByaXNtYSIsIlByaXNtYUNsaWVudCIsImdldFZpZGVvUm91dGVzIiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImdldFJlY29tbWVuZGVkVmlkZW9zIiwicG9zdCIsInByb3RlY3QiLCJhZGRWaWRlbyIsImdldFRyZW5kaW5nVmlkZW9zIiwic2VhcmNoVmlkZW9zIiwiZ2V0QXV0aFVzZXIiLCJnZXRWaWRlbyIsImFkZFZpZGVvVmlldyIsImxpa2VWaWRlbyIsImRpc2xpa2VWaWRlbyIsImFkZENvbW1lbnQiLCJkZWxldGUiLCJkZWxldGVWaWRlbyIsImRlbGV0ZUNvbW1lbnQiLCJnZXRWaWRlb1ZpZXdzIiwidmlkZW9zIiwidmlkZW8iLCJ2aWV3cyIsInZpZXciLCJjb3VudCIsIndoZXJlIiwidmlkZW9JZCIsImVxdWFscyIsImlkIiwicmVxIiwicmVzIiwiZmluZE1hbnkiLCJpbmNsdWRlIiwidXNlciIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJsZW5ndGgiLCJzdGF0dXMiLCJqc29uIiwic29ydCIsImEiLCJiIiwibmV4dCIsInF1ZXJ5Iiwic3RhdHVzQ29kZSIsIm1lc3NhZ2UiLCJPUiIsInRpdGxlIiwiY29udGFpbnMiLCJtb2RlIiwiZGVzY3JpcHRpb24iLCJ1cmwiLCJ0aHVtYm5haWwiLCJib2R5IiwiY3JlYXRlIiwiZGF0YSIsImNvbm5lY3QiLCJmaW5kVW5pcXVlIiwicGFyYW1zIiwiY29tbWVudCIsInRleHQiLCJjb21tZW50SWQiLCJzZWxlY3QiLCJ1c2VySWQiLCJzZW5kIiwiaXNMaWtlZCIsInZpZGVvTGlrZSIsImZpbmRGaXJzdCIsImxpa2UiLCJpc0Rpc2xpa2VkIiwidXBkYXRlIiwiY29tbWVudHMiLCJpc1ZpZGVvTWluZSIsImlzU3Vic2NyaWJlZCIsImlzVmlld2VkIiwic3Vic2NyaXB0aW9uIiwic3Vic2NyaWJlcklkIiwic3Vic2NyaWJlZFRvSWQiLCJsaWtlc0NvdW50IiwiQU5EIiwiZGlzbGlrZXNDb3VudCIsInN1YnNjcmliZXJzQ291bnQiLCJjb21tZW50c0NvdW50IiwiQm9vbGVhbiIsImRlbGV0ZU1hbnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFJQyxvQkFBSixFQUFmOztBQUVBLFNBQVNDLGNBQVQsR0FBMEI7QUFDeEIsUUFBTUMsTUFBTSxHQUFHQyxpQkFBUUMsTUFBUixFQUFmOztBQUVBRixFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxHQUFYLEVBQWdCQyxvQkFBaEI7QUFDQUosRUFBQUEsTUFBTSxDQUFDSyxJQUFQLENBQVksR0FBWixFQUFpQkMsc0JBQWpCLEVBQTBCQyxRQUExQjtBQUVBUCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxXQUFYLEVBQXdCSyxpQkFBeEI7QUFDQVIsRUFBQUEsTUFBTSxDQUFDRyxHQUFQLENBQVcsU0FBWCxFQUFzQk0sWUFBdEI7QUFFQVQsRUFBQUEsTUFBTSxDQUFDRyxHQUFQLENBQVcsV0FBWCxFQUF3Qk8sMEJBQXhCLEVBQXFDQyxRQUFyQztBQUNBWCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxXQUFYLEVBQXdCTywwQkFBeEIsRUFBcUNFLFlBQXJDO0FBQ0FaLEVBQUFBLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLGdCQUFYLEVBQTZCRyxzQkFBN0IsRUFBc0NPLFNBQXRDO0FBQ0FiLEVBQUFBLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLG1CQUFYLEVBQWdDRyxzQkFBaEMsRUFBeUNRLFlBQXpDO0FBQ0FkLEVBQUFBLE1BQU0sQ0FBQ0ssSUFBUCxDQUFZLG1CQUFaLEVBQWlDQyxzQkFBakMsRUFBMENTLFVBQTFDO0FBQ0FmLEVBQUFBLE1BQU0sQ0FBQ2dCLE1BQVAsQ0FBYyxrQkFBZCxFQUFrQ1Ysc0JBQWxDLEVBQTJDVyxXQUEzQztBQUVBakIsRUFBQUEsTUFBTSxDQUFDZ0IsTUFBUCxDQUFjLDhCQUFkLEVBQThDVixzQkFBOUMsRUFBdURZ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O0FBQ3hCUyxJQUFBQSxLQUFLLEVBQUU7QUFDTEcsTUFBQUEsRUFBRSxFQUFFQyxHQUFHLENBQUM2QixNQUFKLENBQVdoQztBQURWO0FBRGlCLEdBQXBCLENBQU47QUFNQUksRUFBQUEsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsRUFBckI7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9KYXZhU2NyaXB0L3lvdVR1YmUvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MsIHsgcmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCJcbmltcG9ydCB7IGdldEF1dGhVc2VyLCBwcm90ZWN0IH0gZnJvbSBcIi4uL21pZGRsZXdhcmUvYXV0aG9yaXphdGlvblwiO1xuXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KClcblxuZnVuY3Rpb24gZ2V0VmlkZW9Sb3V0ZXMoKSB7XG4gIGNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbiAgcm91dGVyLmdldCgnLycsIGdldFJlY29tbWVuZGVkVmlkZW9zKVxuICByb3V0ZXIucG9zdCgnLycsIHByb3RlY3QsIGFkZFZpZGVvKVxuXG4gIHJvdXRlci5nZXQoJy90cmVuZGluZycsIGdldFRyZW5kaW5nVmlkZW9zKVxuICByb3V0ZXIuZ2V0KCcvc2VhcmNoJywgc2VhcmNoVmlkZW9zKVxuXG4gIHJvdXRlci5nZXQoJy86dmlkZW9JZCcsIGdldEF1dGhVc2VyLCBnZXRWaWRlbylcbiAgcm91dGVyLmdldCgnLzp2aWRlb0lkJywgZ2V0QXV0aFVzZXIsIGFkZFZpZGVvVmlldylcbiAgcm91dGVyLmdldCgnLzp2aWRlb0lkL2xpa2UnLCBwcm90ZWN0LCBsaWtlVmlkZW8pXG4gIHJvdXRlci5nZXQoJy86dmlkZW9JZC9kaXNsaWtlJywgcHJvdGVjdCwgZGlzbGlrZVZpZGVvKVxuICByb3V0ZXIucG9zdCgnLzp2aWRlb0lkL2NvbW1lbnQnLCBwcm90ZWN0LCBhZGRDb21tZW50KVxuICByb3V0ZXIuZGVsZXRlKCcvOnZpZGVvSWQvZGVsZXRlJywgcHJvdGVjdCwgZGVsZXRlVmlkZW8pXG5cbiAgcm91dGVyLmRlbGV0ZSgnLzp2aWRlb0lkL2NvbW1lbnQvOmNvbW1lbnRJZCcsIHByb3RlY3QsIGRlbGV0ZUNvbW1lbnQpXG5cbiAgcmV0dXJuIHJvdXRlcjtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0VmlkZW9WaWV3cyh2aWRlb3MpIHtcbiAgZm9yIChjb25zdCB2aWRlbyBvZiB2aWRlb3MpIHtcbiAgICBjb25zdCB2aWV3cyA9IGF3YWl0IHByaXNtYS52aWV3LmNvdW50KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHZpZGVvLmlkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIHZpZGVvLnZpZXdzID0gdmlld3NcbiAgfVxuICByZXR1cm4gdmlkZW9zXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFJlY29tbWVuZGVkVmlkZW9zKHJlcSwgcmVzKSB7XG4gIGxldCB2aWRlb3MgPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZE1hbnkoe1xuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXI6IHRydWVcbiAgICB9LFxuICAgIG9yZGVyQnk6IHtcbiAgICAgIGNyZWF0ZWRBdDogXCJkZXNjXCJcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF2aWRlb3MubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdmlkZW9zIH0pXG5cbiAgfVxuICB2aWRlb3MgPSBhd2FpdCBnZXRWaWRlb1ZpZXdzKHZpZGVvcylcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB2aWRlb3MgfSlcblxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRUcmVuZGluZ1ZpZGVvcyhyZXEsIHJlcykge1xuICBsZXQgdmlkZW9zID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRNYW55KHtcbiAgICBpbmNsdWRlOiB7XG4gICAgICB1c2VyOiB0cnVlXG4gICAgfSxcbiAgICBvcmRlckJ5OiB7XG4gICAgICBjcmVhdGVkQXQ6IFwiZGVzY1wiXG4gICAgfVxuICB9KVxuXG4gIGlmICghdmlkZW9zLmxlbmd0aCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvcyB9KVxuXG4gIH1cbiAgdmlkZW9zID0gYXdhaXQgZ2V0VmlkZW9WaWV3cyh2aWRlb3MpXG4gIHZpZGVvcy5zb3J0KChhLCBiKSA9PiBiLnZpZXdzIC0gYS52aWV3cylcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB2aWRlb3MgfSlcblxufVxuXG5hc3luYyBmdW5jdGlvbiBzZWFyY2hWaWRlb3MocmVxLCByZXMsIG5leHQpIHtcbiAgaWYgKCFyZXEucXVlcnkucXVlcnkpIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBzdGF0dXNDb2RlOiA0MDAsXG4gICAgICBtZXNzYWdlOiBcIllvdSBoYXZlbmB0IGVudGVyZWQgdGhlIHNlcmFjaGFzZCBmYXNkZiBhZmdua2RjdmJyam5iZmp0YmdcIlxuICAgIH0pXG4gIH1cblxuICBsZXQgdmlkZW9zID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRNYW55KHtcbiAgICBpbmNsdWRlOiB7XG4gICAgICB1c2VyOiB0cnVlXG4gICAgfSxcbiAgICB3aGVyZToge1xuICAgICAgT1I6IFtcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICBjb250YWluczogcmVxLnF1ZXJ5LnF1ZXJ5LFxuICAgICAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgIGNvbnRhaW5zOiByZXEucXVlcnkucXVlcnksXG4gICAgICAgICAgICBtb2RlOiBcImluc2Vuc2l0aXZlXCJcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICBdXG4gICAgfVxuICB9KVxuXG4gIGlmICghdmlkZW9zLmxlbmd0aCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvcyB9KVxuXG4gIH1cbiAgdmlkZW9zID0gYXdhaXQgZ2V0VmlkZW9WaWV3cyh2aWRlb3MpXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdmlkZW9zIH0pXG5cbn1cblxuYXN5bmMgZnVuY3Rpb24gYWRkVmlkZW8ocmVxLCByZXMpIHtcbiAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHVybCwgdGh1bWJuYWlsIH0gPSByZXEuYm9keTtcblxuICBjb25zdCB2aWRlbyA9IGF3YWl0IHByaXNtYS52aWRlby5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIHRpdGxlLCBkZXNjcmlwdGlvbiwgdXJsLCB0aHVtYm5haWwsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICBpZDogcmVxLnVzZXIuaWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvIH0pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkZENvbW1lbnQocmVxLCByZXMsIG5leHQpIHtcbiAgY29uc3QgdmlkZW8gPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF2aWRlbykge1xuICAgIHJldHVybiBuZXh0KHtcbiAgICAgIG1lc3NhZ2U6IGBUaGUgdmlkZW8gd2l0aCAke3JlcS5wYXJhbXMudmlkZW9JZH0gZG9lc24ndCBleGlzdGAsXG4gICAgICBzdGF0dXNDb2RlOiA0MDRcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgY29tbWVudCA9IGF3YWl0IHByaXNtYS5jb21tZW50LmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgdGV4dDogcmVxLmJvZHkudGV4dCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgIGlkOiByZXEudXNlci5pZFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdmlkZW86IHtcbiAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGNvbW1lbnQgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ29tbWVudChyZXEsIHJlcykge1xuICBjb25zdCBjb21tZW50ID0gYXdhaXQgcHJpc21hLmNvbW1lbnQuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLmNvbW1lbnRJZFxuICAgIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICB1c2VySWQ6IHRydWVcbiAgICB9XG4gIH0pXG5cbiAgaWYgKGNvbW1lbnQudXNlcklkICE9PSByZXEudXNlci5pZCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZChcIllvdSBhcmUgbm90IGF1dGhvcmlzZWQgdG8gZGVsZXRlIHRoaXMgY29tbWVudFwiKVxuICB9XG5cbiAgYXdhaXQgcHJpc21hLmNvbW1lbnQuZGVsZXRlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS5wYXJhbXMuY29tbWVudElkXG4gICAgfVxuICB9KTtcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7fSkuc2VuZCgpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkZFZpZGVvVmlldyhyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB2aWRlbyA9IGF3YWl0IHByaXNtYS52aWRlby5maW5kVW5pcXVlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgIH1cbiAgfSlcblxuICBpZiAoIXZpZGVvKSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogYFRoZSB2aWRlbyB3aXRoICR7cmVxLnBhcmFtcy52aWRlb0lkfSBpZCBkb2Vzbid0IGV4aXN0YCxcbiAgICAgIHN0YXR1c0NvZGU6IDQwNFxuICAgIH0pXG4gIH1cblxuICBpZiAocmVxLnVzZXIpIHtcbiAgICBhd2FpdCBwcmlzbWEudmlldy5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB2aWRlbzoge1xuICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBjb25uZWN0OiB7XG4gICAgICAgICAgICBpZDogcmVxLnVzZXIuaWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGF3YWl0IHByaXNtYS52aWV3LmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHZpZGVvOiB7XG4gICAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgICAgaWQ6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7fSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlrZVZpZGVvKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHZpZGVvID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgfVxuICB9KVxuXG4gIGlmICghdmlkZW8pIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIlRoZSB2aWRlbyBkb2VzbmB0IGV4aXN0XCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDRcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgaXNMaWtlZCA9IGF3YWl0IHByaXNtYS52aWRlb0xpa2UuZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgIH0sXG4gICAgICB2aWRlb0lkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICB9LFxuICAgICAgbGlrZToge1xuICAgICAgICBlcXVhbHM6IDFcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgaXNEaXNsaWtlZCA9IGF3YWl0IHByaXNtYS52aWRlb0xpa2UuZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgIH0sXG4gICAgICB2aWRlb0lkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICB9LFxuICAgICAgbGlrZToge1xuICAgICAgICBlcXVhbHM6IC0xXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGlmIChpc0xpa2VkKSB7XG4gICAgYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5kZWxldGUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQ6IGlzTGlrZWQuaWRcbiAgICAgIH1cbiAgICB9KVxuICB9IGVsc2UgaWYgKGlzRGlzbGlrZWQpIHtcbiAgICBhd2FpdCBwcmlzbWEudmlkZW9MaWtlLnVwZGF0ZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZDogaXNEaXNsaWtlZC5pZFxuICAgICAgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbGlrZTogMVxuICAgICAgfVxuICAgIH0pXG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgICAgaWQ6IHJlcS51c2VyLmlkXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB2aWRlbzoge1xuICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGxpa2U6IDFcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe30pXG5cbn1cblxuYXN5bmMgZnVuY3Rpb24gZGlzbGlrZVZpZGVvKHJlcSwgcmVzLCBuZXh0KSB7XG5cbiAgY29uc3QgdmlkZW8gPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF2aWRlbykge1xuICAgIHJldHVybiBuZXh0KHtcbiAgICAgIG1lc3NhZ2U6IFwiVGhlIHZpZGVvIGRvZXNuYHQgZXhpc3RcIixcbiAgICAgIHN0YXR1c0NvZGU6IDQwNFxuICAgIH0pXG4gIH1cblxuICBjb25zdCBpc0xpa2VkID0gYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7XG4gICAgICB1c2VySWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgfSxcbiAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgIH0sXG4gICAgICBsaWtlOiB7XG4gICAgICAgIGVxdWFsczogMVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCBpc0Rpc2xpa2VkID0gYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7XG4gICAgICB1c2VySWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgfSxcbiAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgIH0sXG4gICAgICBsaWtlOiB7XG4gICAgICAgIGVxdWFsczogLTFcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgaWYgKGlzRGlzbGlrZWQpIHtcbiAgICBhd2FpdCBwcmlzbWEudmlkZW9MaWtlLmRlbGV0ZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZDogaXNEaXNsaWtlZC5pZFxuICAgICAgfVxuICAgIH0pXG4gIH0gZWxzZSBpZiAoaXNMaWtlZCkge1xuICAgIGF3YWl0IHByaXNtYS52aWRlb0xpa2UudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkOiBpc0xpa2VkLmlkXG4gICAgICB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBsaWtlOiAtMVxuICAgICAgfVxuICAgIH0pXG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgICAgaWQ6IHJlcS51c2VyLmlkXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB2aWRlbzoge1xuICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGxpa2U6IC0xXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHt9KVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFZpZGVvKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHZpZGVvID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICB1c2VyOiB0cnVlLFxuICAgICAgY29tbWVudHM6IHtcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHVzZXI6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgIGNyZWF0ZWRBdDogXCJkZXNjXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBpZiAoIXZpZGVvKSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogYFZpZGVvIHdpdGggSWQ6IFwiJHtyZXEucGFyYW1zLnZpZGVvSWR9XCIgbm90IGZvdW5kYCxcbiAgICAgIHN0YXR1c0NvZGU6IDQwNFxuICAgIH0pXG4gIH1cblxuICBsZXQgaXNWaWRlb01pbmUgPSBmYWxzZTtcbiAgbGV0IGlzTGlrZWQgPSBmYWxzZTtcbiAgbGV0IGlzRGlzbGlrZWQgPSBmYWxzZTtcbiAgbGV0IGlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICBsZXQgaXNWaWV3ZWQgPSBmYWxzZTtcblxuICBpZiAocmVxLnVzZXIpIHtcbiAgICBpc1ZpZGVvTWluZSA9IHJlcS51c2VyLmlkID09PSB2aWRlby51c2VySWQ7XG5cbiAgICBpc0xpa2VkID0gYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdXNlcklkOiB7XG4gICAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgICB9LFxuICAgICAgICB2aWRlb0lkOiB7XG4gICAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgfSxcbiAgICAgICAgbGlrZToge1xuICAgICAgICAgIGVxdWFsczogMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIGlzRGlzbGlrZWQgPSBhd2FpdCBwcmlzbWEudmlkZW9MaWtlLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICB1c2VySWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHJlcS51c2VyLmlkXG4gICAgICAgIH0sXG4gICAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgICAgICB9LFxuICAgICAgICBsaWtlOiB7XG4gICAgICAgICAgZXF1YWxzOiAtMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIGlzVmlld2VkID0gcHJpc21hLnZpZXcuZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHVzZXJJZDoge1xuICAgICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgICAgfSxcbiAgICAgICAgdmlkZW9JZDoge1xuICAgICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaXNTdWJzY3JpYmVkID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgc3Vic2NyaWJlcklkOiB7XG4gICAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgICB9LFxuICAgICAgICBzdWJzY3JpYmVkVG9JZDoge1xuICAgICAgICAgIGVxdWFsczogdmlkZW8udXNlcklkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgY29uc3QgbGlrZXNDb3VudCA9IGF3YWl0IHByaXNtYS52aWRlb0xpa2UuY291bnQoe1xuICAgIHdoZXJlOiB7XG4gICAgICBBTkQ6IHtcbiAgICAgICAgdmlkZW9JZDoge1xuICAgICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICAgIH0sXG4gICAgICAgIGxpa2U6IHtcbiAgICAgICAgICBlcXVhbHM6IDFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCBkaXNsaWtlc0NvdW50ID0gYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5jb3VudCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIEFORDoge1xuICAgICAgICB2aWRlb0lkOiB7XG4gICAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgfSxcbiAgICAgICAgbGlrZToge1xuICAgICAgICAgIGVxdWFsczogLTFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCB2aWV3cyA9IGF3YWl0IHByaXNtYS52aWV3LmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgdmlkZW9JZDoge1xuICAgICAgICBlcXVhbHM6IHZpZGVvLmlkXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IHN1YnNjcmliZXJzQ291bnQgPSBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgc3Vic2NyaWJlZFRvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiB2aWRlby51c2VySWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgdmlkZW8uY29tbWVudHNDb3VudCA9IHZpZGVvLmNvbW1lbnRzLmxlbmd0aDtcbiAgdmlkZW8uaXNMaWtlZCA9IEJvb2xlYW4oaXNMaWtlZCk7XG4gIHZpZGVvLmlzRGlzbGlrZWQgPSBCb29sZWFuKGlzRGlzbGlrZWQpO1xuICB2aWRlby5saWtlc0NvdW50ID0gbGlrZXNDb3VudDtcbiAgdmlkZW8udmlld3MgPSB2aWV3cztcbiAgdmlkZW8uZGlzbGlrZXNDb3VudCA9IGRpc2xpa2VzQ291bnQ7XG4gIHZpZGVvLmlzVmlkZW9NaW5lID0gaXNWaWRlb01pbmU7XG4gIHZpZGVvLmlzU3Vic2NyaWJlZCA9IEJvb2xlYW4oaXNTdWJzY3JpYmVkKTtcbiAgdmlkZW8uaXNWaWV3ZWQgPSBCb29sZWFuKGlzVmlld2VkKTtcbiAgdmlkZW8uc3Vic2NyaWJlcnNDb3VudCA9IHN1YnNjcmliZXJzQ291bnQ7XG5cblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvIH0pXG59XG5cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlVmlkZW8ocmVxLCByZXMpIHtcbiAgY29uc3QgdmlkZW8gPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICB9LFxuICAgIHNlbGVjdDoge1xuICAgICAgdXNlcklkOiB0cnVlXG4gICAgfVxuICB9KVxuXG4gIGlmIChyZXEudXNlci5pZCAhPT0gdmlkZW8udXNlcklkKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5zZW5kKCdZb3UgYXJlIG5vdCBhdXRob3JpemQgdG8gZGVsZXRlIHRoaXMgdmlkZW8nKTtcbiAgfVxuXG4gIGlmICghdmlkZW8pIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIlRoZSB2aWRlbyBkb2VzbmB0IGV4aXN0XCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDRcbiAgICB9KVxuICB9XG5cbiAgYXdhaXQgcHJpc21hLnZpZXcuZGVsZXRlTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgYXdhaXQgcHJpc21hLmNvbW1lbnQuZGVsZXRlTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5kZWxldGVNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgdmlkZW9JZDoge1xuICAgICAgICBlcXVhbHM6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBhd2FpdCBwcmlzbWEudmlkZW8uZGVsZXRlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgIH1cbiAgfSlcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7fSlcbn1cblxuZXhwb3J0IHsgZ2V0VmlkZW9Sb3V0ZXMsIGdldFZpZGVvVmlld3MgfTsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "video.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getVideoRoutes",
        "router",
        "express",
        "Router",
        "get",
        "getRecommendedVideos",
        "post",
        "protect",
        "addVideo",
        "getTrendingVideos",
        "searchVideos",
        "getAuthUser",
        "getVideo",
        "addVideoView",
        "likeVideo",
        "dislikeVideo",
        "addComment",
        "delete",
        "deleteVideo",
        "deleteComment",
        "getVideoViews",
        "videos",
        "video",
        "views",
        "view",
        "count",
        "where",
        "videoId",
        "equals",
        "id",
        "req",
        "res",
        "findMany",
        "include",
        "user",
        "orderBy",
        "createdAt",
        "length",
        "status",
        "json",
        "sort",
        "a",
        "b",
        "next",
        "query",
        "statusCode",
        "message",
        "OR",
        "title",
        "contains",
        "mode",
        "description",
        "url",
        "thumbnail",
        "body",
        "create",
        "data",
        "connect",
        "findUnique",
        "params",
        "comment",
        "text",
        "commentId",
        "select",
        "userId",
        "send",
        "isLiked",
        "videoLike",
        "findFirst",
        "like",
        "isDisliked",
        "update",
        "comments",
        "isVideoMine",
        "isSubscribed",
        "isViewed",
        "subscription",
        "subscriberId",
        "subscribedToId",
        "likesCount",
        "AND",
        "dislikesCount",
        "subscribersCount",
        "commentsCount",
        "Boolean",
        "deleteMany"
      ],
      "mappings": ";;;;;;;;AAAA;;AACA;;AACA;;;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,oBAAJ,EAAf;;AAEA,SAASC,cAAT,GAA0B;AACxB,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEAF,EAAAA,MAAM,CAACG,GAAP,CAAW,GAAX,EAAgBC,oBAAhB;AACAJ,EAAAA,MAAM,CAACK,IAAP,CAAY,GAAZ,EAAiBC,sBAAjB,EAA0BC,QAA1B;AAEAP,EAAAA,MAAM,CAACG,GAAP,CAAW,WAAX,EAAwBK,iBAAxB;AACAR,EAAAA,MAAM,CAACG,GAAP,CAAW,SAAX,EAAsBM,YAAtB;AAEAT,EAAAA,MAAM,CAACG,GAAP,CAAW,WAAX,EAAwBO,0BAAxB,EAAqCC,QAArC;AACAX,EAAAA,MAAM,CAACG,GAAP,CAAW,WAAX,EAAwBO,0BAAxB,EAAqCE,YAArC;AACAZ,EAAAA,MAAM,CAACG,GAAP,CAAW,gBAAX,EAA6BG,sBAA7B,EAAsCO,SAAtC;AACAb,EAAAA,MAAM,CAACG,GAAP,CAAW,mBAAX,EAAgCG,sBAAhC,EAAyCQ,YAAzC;AACAd,EAAAA,MAAM,CAACK,IAAP,CAAY,mBAAZ,EAAiCC,sBAAjC,EAA0CS,UAA1C;AACAf,EAAAA,MAAM,CAACgB,MAAP,CAAc,kBAAd,EAAkCV,sBAAlC,EAA2CW,WAA3C;AAEAjB,EAAAA,MAAM,CAACgB,MAAP,CAAc,8BAAd,EAA8CV,sBAA9C,EAAuDY,aAAvD;AAEA,SAAOlB,MAAP;AACD;;AAED,eAAemB,aAAf,CAA6BC,MAA7B,EAAqC;AACnC,OAAK,MAAMC,KAAX,IAAoBD,MAApB,EAA4B;AAC1B,UAAME,KAAK,GAAG,MAAMzB,MAAM,CAAC0B,IAAP,CAAYC,KAAZ,CAAkB;AACpCC,MAAAA,KAAK,EAAE;AACLC,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAEN,KAAK,CAACO;AADP;AADJ;AAD6B,KAAlB,CAApB;AAOAP,IAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACD;;AACD,SAAOF,MAAP;AACD;;AAED,eAAehB,oBAAf,CAAoCyB,GAApC,EAAyCC,GAAzC,EAA8C;AAC5C,MAAIV,MAAM,GAAG,MAAMvB,MAAM,CAACwB,KAAP,CAAaU,QAAb,CAAsB;AACvCC,IAAAA,OAAO,EAAE;AACPC,MAAAA,IAAI,EAAE;AADC,KAD8B;AAIvCC,IAAAA,OAAO,EAAE;AACPC,MAAAA,SAAS,EAAE;AADJ;AAJ8B,GAAtB,CAAnB;;AASA,MAAI,CAACf,MAAM,CAACgB,MAAZ,EAAoB;AAClB,WAAON,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAElB,MAAAA;AAAF,KAArB,CAAP;AAED;;AACDA,EAAAA,MAAM,GAAG,MAAMD,aAAa,CAACC,MAAD,CAA5B;AACAU,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAElB,IAAAA;AAAF,GAArB;AAED;;AAED,eAAeZ,iBAAf,CAAiCqB,GAAjC,EAAsCC,GAAtC,EAA2C;AACzC,MAAIV,MAAM,GAAG,MAAMvB,MAAM,CAACwB,KAAP,CAAaU,QAAb,CAAsB;AACvCC,IAAAA,OAAO,EAAE;AACPC,MAAAA,IAAI,EAAE;AADC,KAD8B;AAIvCC,IAAAA,OAAO,EAAE;AACPC,MAAAA,SAAS,EAAE;AADJ;AAJ8B,GAAtB,CAAnB;;AASA,MAAI,CAACf,MAAM,CAACgB,MAAZ,EAAoB;AAClB,WAAON,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAElB,MAAAA;AAAF,KAArB,CAAP;AAED;;AACDA,EAAAA,MAAM,GAAG,MAAMD,aAAa,CAACC,MAAD,CAA5B;AACAA,EAAAA,MAAM,CAACmB,IAAP,CAAY,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACnB,KAAF,GAAUkB,CAAC,CAAClB,KAAlC;AACAQ,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAElB,IAAAA;AAAF,GAArB;AAED;;AAED,eAAeX,YAAf,CAA4BoB,GAA5B,EAAiCC,GAAjC,EAAsCY,IAAtC,EAA4C;AAC1C,MAAI,CAACb,GAAG,CAACc,KAAJ,CAAUA,KAAf,EAAsB;AACpB,WAAOD,IAAI,CAAC;AACVE,MAAAA,UAAU,EAAE,GADF;AAEVC,MAAAA,OAAO,EAAE;AAFC,KAAD,CAAX;AAID;;AAED,MAAIzB,MAAM,GAAG,MAAMvB,MAAM,CAACwB,KAAP,CAAaU,QAAb,CAAsB;AACvCC,IAAAA,OAAO,EAAE;AACPC,MAAAA,IAAI,EAAE;AADC,KAD8B;AAIvCR,IAAAA,KAAK,EAAE;AACLqB,MAAAA,EAAE,EAAE,CACF;AACEC,QAAAA,KAAK,EAAE;AACLC,UAAAA,QAAQ,EAAEnB,GAAG,CAACc,KAAJ,CAAUA,KADf;AAELM,UAAAA,IAAI,EAAE;AAFD;AADT,OADE,EAOF;AACEC,QAAAA,WAAW,EAAE;AACXF,UAAAA,QAAQ,EAAEnB,GAAG,CAACc,KAAJ,CAAUA,KADT;AAEXM,UAAAA,IAAI,EAAE;AAFK;AADf,OAPE;AADC;AAJgC,GAAtB,CAAnB;;AAsBA,MAAI,CAAC7B,MAAM,CAACgB,MAAZ,EAAoB;AAClB,WAAON,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAElB,MAAAA;AAAF,KAArB,CAAP;AAED;;AACDA,EAAAA,MAAM,GAAG,MAAMD,aAAa,CAACC,MAAD,CAA5B;AACAU,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAElB,IAAAA;AAAF,GAArB;AAED;;AAED,eAAeb,QAAf,CAAwBsB,GAAxB,EAA6BC,GAA7B,EAAkC;AAChC,QAAM;AAAEiB,IAAAA,KAAF;AAASG,IAAAA,WAAT;AAAsBC,IAAAA,GAAtB;AAA2BC,IAAAA;AAA3B,MAAyCvB,GAAG,CAACwB,IAAnD;AAEA,QAAMhC,KAAK,GAAG,MAAMxB,MAAM,CAACwB,KAAP,CAAaiC,MAAb,CAAoB;AACtCC,IAAAA,IAAI,EAAE;AACJR,MAAAA,KADI;AACGG,MAAAA,WADH;AACgBC,MAAAA,GADhB;AACqBC,MAAAA,SADrB;AAEJnB,MAAAA,IAAI,EAAE;AACJuB,QAAAA,OAAO,EAAE;AACP5B,UAAAA,EAAE,EAAEC,GAAG,CAACI,IAAJ,CAASL;AADN;AADL;AAFF;AADgC,GAApB,CAApB;AAWAE,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEjB,IAAAA;AAAF,GAArB;AACD;;AAED,eAAeN,UAAf,CAA0Bc,GAA1B,EAA+BC,GAA/B,EAAoCY,IAApC,EAA0C;AACxC,QAAMrB,KAAK,GAAG,MAAMxB,MAAM,CAACwB,KAAP,CAAaoC,UAAb,CAAwB;AAC1ChC,IAAAA,KAAK,EAAE;AACLG,MAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWhC;AADV;AADmC,GAAxB,CAApB;;AAMA,MAAI,CAACL,KAAL,EAAY;AACV,WAAOqB,IAAI,CAAC;AACVG,MAAAA,OAAO,EAAG,kBAAiBhB,GAAG,CAAC6B,MAAJ,CAAWhC,OAAQ,gBADpC;AAEVkB,MAAAA,UAAU,EAAE;AAFF,KAAD,CAAX;AAID;;AAED,QAAMe,OAAO,GAAG,MAAM9D,MAAM,CAAC8D,OAAP,CAAeL,MAAf,CAAsB;AAC1CC,IAAAA,IAAI,EAAE;AACJK,MAAAA,IAAI,EAAE/B,GAAG,CAACwB,IAAJ,CAASO,IADX;AAEJ3B,MAAAA,IAAI,EAAE;AACJuB,QAAAA,OAAO,EAAE;AACP5B,UAAAA,EAAE,EAAEC,GAAG,CAACI,IAAJ,CAASL;AADN;AADL,OAFF;AAOJP,MAAAA,KAAK,EAAE;AACLmC,QAAAA,OAAO,EAAE;AACP5B,UAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWhC;AADR;AADJ;AAPH;AADoC,GAAtB,CAAtB;AAgBAI,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEqB,IAAAA;AAAF,GAArB;AACD;;AAED,eAAezC,aAAf,CAA6BW,GAA7B,EAAkCC,GAAlC,EAAuC;AACrC,QAAM6B,OAAO,GAAG,MAAM9D,MAAM,CAAC8D,OAAP,CAAeF,UAAf,CAA0B;AAC9ChC,IAAAA,KAAK,EAAE;AACLG,MAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWG;AADV,KADuC;AAI9CC,IAAAA,MAAM,EAAE;AACNC,MAAAA,MAAM,EAAE;AADF;AAJsC,GAA1B,CAAtB;;AASA,MAAIJ,OAAO,CAACI,MAAR,KAAmBlC,GAAG,CAACI,IAAJ,CAASL,EAAhC,EAAoC;AAClC,WAAOE,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgB2B,IAAhB,CAAqB,+CAArB,CAAP;AACD;;AAED,QAAMnE,MAAM,CAAC8D,OAAP,CAAe3C,MAAf,CAAsB;AAC1BS,IAAAA,KAAK,EAAE;AACLG,MAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWG;AADV;AADmB,GAAtB,CAAN;AAMA/B,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAArB,EAAyB0B,IAAzB;AACD;;AAED,eAAepD,YAAf,CAA4BiB,GAA5B,EAAiCC,GAAjC,EAAsCY,IAAtC,EAA4C;AAC1C,QAAMrB,KAAK,GAAG,MAAMxB,MAAM,CAACwB,KAAP,CAAaoC,UAAb,CAAwB;AAC1ChC,IAAAA,KAAK,EAAE;AACLG,MAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWhC;AADV;AADmC,GAAxB,CAApB;;AAMA,MAAI,CAACL,KAAL,EAAY;AACV,WAAOqB,IAAI,CAAC;AACVG,MAAAA,OAAO,EAAG,kBAAiBhB,GAAG,CAAC6B,MAAJ,CAAWhC,OAAQ,mBADpC;AAEVkB,MAAAA,UAAU,EAAE;AAFF,KAAD,CAAX;AAID;;AAED,MAAIf,GAAG,CAACI,IAAR,EAAc;AACZ,UAAMpC,MAAM,CAAC0B,IAAP,CAAY+B,MAAZ,CAAmB;AACvBC,MAAAA,IAAI,EAAE;AACJlC,QAAAA,KAAK,EAAE;AACLmC,UAAAA,OAAO,EAAE;AACP5B,YAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWhC;AADR;AADJ,SADH;AAMJO,QAAAA,IAAI,EAAE;AACJuB,UAAAA,OAAO,EAAE;AACP5B,YAAAA,EAAE,EAAEC,GAAG,CAACI,IAAJ,CAASL;AADN;AADL;AANF;AADiB,KAAnB,CAAN;AAcD,GAfD,MAeO;AACL,UAAM/B,MAAM,CAAC0B,IAAP,CAAY+B,MAAZ,CAAmB;AACvBC,MAAAA,IAAI,EAAE;AACJlC,QAAAA,KAAK,EAAE;AACLmC,UAAAA,OAAO,EAAE;AACP5B,YAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWhC;AADR;AADJ;AADH;AADiB,KAAnB,CAAN;AASD;;AAEDI,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAArB;AACD;;AAED,eAAezB,SAAf,CAAyBgB,GAAzB,EAA8BC,GAA9B,EAAmCY,IAAnC,EAAyC;AACvC,QAAMrB,KAAK,GAAG,MAAMxB,MAAM,CAACwB,KAAP,CAAaoC,UAAb,CAAwB;AAC1ChC,IAAAA,KAAK,EAAE;AACLG,MAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWhC;AADV;AADmC,GAAxB,CAApB;;AAMA,MAAI,CAACL,KAAL,EAAY;AACV,WAAOqB,IAAI,CAAC;AACVG,MAAAA,OAAO,EAAE,yBADC;AAEVD,MAAAA,UAAU,EAAE;AAFF,KAAD,CAAX;AAID;;AAED,QAAMqB,OAAO,GAAG,MAAMpE,MAAM,CAACqE,SAAP,CAAiBC,SAAjB,CAA2B;AAC/C1C,IAAAA,KAAK,EAAE;AACLsC,MAAAA,MAAM,EAAE;AACNpC,QAAAA,MAAM,EAAEE,GAAG,CAACI,IAAJ,CAASL;AADX,OADH;AAILF,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAEE,GAAG,CAAC6B,MAAJ,CAAWhC;AADZ,OAJJ;AAOL0C,MAAAA,IAAI,EAAE;AACJzC,QAAAA,MAAM,EAAE;AADJ;AAPD;AADwC,GAA3B,CAAtB;AAcA,QAAM0C,UAAU,GAAG,MAAMxE,MAAM,CAACqE,SAAP,CAAiBC,SAAjB,CAA2B;AAClD1C,IAAAA,KAAK,EAAE;AACLsC,MAAAA,MAAM,EAAE;AACNpC,QAAAA,MAAM,EAAEE,GAAG,CAACI,IAAJ,CAASL;AADX,OADH;AAILF,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAEE,GAAG,CAAC6B,MAAJ,CAAWhC;AADZ,OAJJ;AAOL0C,MAAAA,IAAI,EAAE;AACJzC,QAAAA,MAAM,EAAE,CAAC;AADL;AAPD;AAD2C,GAA3B,CAAzB;;AAcA,MAAIsC,OAAJ,EAAa;AACX,UAAMpE,MAAM,CAACqE,SAAP,CAAiBlD,MAAjB,CAAwB;AAC5BS,MAAAA,KAAK,EAAE;AACLG,QAAAA,EAAE,EAAEqC,OAAO,CAACrC;AADP;AADqB,KAAxB,CAAN;AAKD,GAND,MAMO,IAAIyC,UAAJ,EAAgB;AACrB,UAAMxE,MAAM,CAACqE,SAAP,CAAiBI,MAAjB,CAAwB;AAC5B7C,MAAAA,KAAK,EAAE;AACLG,QAAAA,EAAE,EAAEyC,UAAU,CAACzC;AADV,OADqB;AAI5B2B,MAAAA,IAAI,EAAE;AACJa,QAAAA,IAAI,EAAE;AADF;AAJsB,KAAxB,CAAN;AAQD,GATM,MASA;AACL,UAAMvE,MAAM,CAACqE,SAAP,CAAiBZ,MAAjB,CAAwB;AAC5BC,MAAAA,IAAI,EAAE;AACJtB,QAAAA,IAAI,EAAE;AACJuB,UAAAA,OAAO,EAAE;AACP5B,YAAAA,EAAE,EAAEC,GAAG,CAACI,IAAJ,CAASL;AADN;AADL,SADF;AAMJP,QAAAA,KAAK,EAAE;AACLmC,UAAAA,OAAO,EAAE;AACP5B,YAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWhC;AADR;AADJ,SANH;AAWJ0C,QAAAA,IAAI,EAAE;AAXF;AADsB,KAAxB,CAAN;AAeD;;AAEDtC,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAArB;AAED;;AAED,eAAexB,YAAf,CAA4Be,GAA5B,EAAiCC,GAAjC,EAAsCY,IAAtC,EAA4C;AAE1C,QAAMrB,KAAK,GAAG,MAAMxB,MAAM,CAACwB,KAAP,CAAaoC,UAAb,CAAwB;AAC1ChC,IAAAA,KAAK,EAAE;AACLG,MAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWhC;AADV;AADmC,GAAxB,CAApB;;AAMA,MAAI,CAACL,KAAL,EAAY;AACV,WAAOqB,IAAI,CAAC;AACVG,MAAAA,OAAO,EAAE,yBADC;AAEVD,MAAAA,UAAU,EAAE;AAFF,KAAD,CAAX;AAID;;AAED,QAAMqB,OAAO,GAAG,MAAMpE,MAAM,CAACqE,SAAP,CAAiBC,SAAjB,CAA2B;AAC/C1C,IAAAA,KAAK,EAAE;AACLsC,MAAAA,MAAM,EAAE;AACNpC,QAAAA,MAAM,EAAEE,GAAG,CAACI,IAAJ,CAASL;AADX,OADH;AAILF,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAEE,GAAG,CAAC6B,MAAJ,CAAWhC;AADZ,OAJJ;AAOL0C,MAAAA,IAAI,EAAE;AACJzC,QAAAA,MAAM,EAAE;AADJ;AAPD;AADwC,GAA3B,CAAtB;AAcA,QAAM0C,UAAU,GAAG,MAAMxE,MAAM,CAACqE,SAAP,CAAiBC,SAAjB,CAA2B;AAClD1C,IAAAA,KAAK,EAAE;AACLsC,MAAAA,MAAM,EAAE;AACNpC,QAAAA,MAAM,EAAEE,GAAG,CAACI,IAAJ,CAASL;AADX,OADH;AAILF,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAEE,GAAG,CAAC6B,MAAJ,CAAWhC;AADZ,OAJJ;AAOL0C,MAAAA,IAAI,EAAE;AACJzC,QAAAA,MAAM,EAAE,CAAC;AADL;AAPD;AAD2C,GAA3B,CAAzB;;AAcA,MAAI0C,UAAJ,EAAgB;AACd,UAAMxE,MAAM,CAACqE,SAAP,CAAiBlD,MAAjB,CAAwB;AAC5BS,MAAAA,KAAK,EAAE;AACLG,QAAAA,EAAE,EAAEyC,UAAU,CAACzC;AADV;AADqB,KAAxB,CAAN;AAKD,GAND,MAMO,IAAIqC,OAAJ,EAAa;AAClB,UAAMpE,MAAM,CAACqE,SAAP,CAAiBI,MAAjB,CAAwB;AAC5B7C,MAAAA,KAAK,EAAE;AACLG,QAAAA,EAAE,EAAEqC,OAAO,CAACrC;AADP,OADqB;AAI5B2B,MAAAA,IAAI,EAAE;AACJa,QAAAA,IAAI,EAAE,CAAC;AADH;AAJsB,KAAxB,CAAN;AAQD,GATM,MASA;AACL,UAAMvE,MAAM,CAACqE,SAAP,CAAiBZ,MAAjB,CAAwB;AAC5BC,MAAAA,IAAI,EAAE;AACJtB,QAAAA,IAAI,EAAE;AACJuB,UAAAA,OAAO,EAAE;AACP5B,YAAAA,EAAE,EAAEC,GAAG,CAACI,IAAJ,CAASL;AADN;AADL,SADF;AAMJP,QAAAA,KAAK,EAAE;AACLmC,UAAAA,OAAO,EAAE;AACP5B,YAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWhC;AADR;AADJ,SANH;AAWJ0C,QAAAA,IAAI,EAAE,CAAC;AAXH;AADsB,KAAxB,CAAN;AAeD;;AAEDtC,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAArB;AAED;;AAED,eAAe3B,QAAf,CAAwBkB,GAAxB,EAA6BC,GAA7B,EAAkCY,IAAlC,EAAwC;AACtC,QAAMrB,KAAK,GAAG,MAAMxB,MAAM,CAACwB,KAAP,CAAaoC,UAAb,CAAwB;AAC1ChC,IAAAA,KAAK,EAAE;AACLG,MAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWhC;AADV,KADmC;AAI1CM,IAAAA,OAAO,EAAE;AACPC,MAAAA,IAAI,EAAE,IADC;AAEPsC,MAAAA,QAAQ,EAAE;AACRvC,QAAAA,OAAO,EAAE;AACPC,UAAAA,IAAI,EAAE;AADC,SADD;AAIRC,QAAAA,OAAO,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AAJD;AAFH;AAJiC,GAAxB,CAApB;;AAiBA,MAAI,CAACd,KAAL,EAAY;AACV,WAAOqB,IAAI,CAAC;AACVG,MAAAA,OAAO,EAAG,mBAAkBhB,GAAG,CAAC6B,MAAJ,CAAWhC,OAAQ,aADrC;AAEVkB,MAAAA,UAAU,EAAE;AAFF,KAAD,CAAX;AAID;;AAED,MAAI4B,WAAW,GAAG,KAAlB;AACA,MAAIP,OAAO,GAAG,KAAd;AACA,MAAII,UAAU,GAAG,KAAjB;AACA,MAAII,YAAY,GAAG,KAAnB;AACA,MAAIC,QAAQ,GAAG,KAAf;;AAEA,MAAI7C,GAAG,CAACI,IAAR,EAAc;AACZuC,IAAAA,WAAW,GAAG3C,GAAG,CAACI,IAAJ,CAASL,EAAT,KAAgBP,KAAK,CAAC0C,MAApC;AAEAE,IAAAA,OAAO,GAAG,MAAMpE,MAAM,CAACqE,SAAP,CAAiBC,SAAjB,CAA2B;AACzC1C,MAAAA,KAAK,EAAE;AACLsC,QAAAA,MAAM,EAAE;AACNpC,UAAAA,MAAM,EAAEE,GAAG,CAACI,IAAJ,CAASL;AADX,SADH;AAILF,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAEE,GAAG,CAAC6B,MAAJ,CAAWhC;AADZ,SAJJ;AAOL0C,QAAAA,IAAI,EAAE;AACJzC,UAAAA,MAAM,EAAE;AADJ;AAPD;AADkC,KAA3B,CAAhB;AAcA0C,IAAAA,UAAU,GAAG,MAAMxE,MAAM,CAACqE,SAAP,CAAiBC,SAAjB,CAA2B;AAC5C1C,MAAAA,KAAK,EAAE;AACLsC,QAAAA,MAAM,EAAE;AACNpC,UAAAA,MAAM,EAAEE,GAAG,CAACI,IAAJ,CAASL;AADX,SADH;AAILF,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAEE,GAAG,CAAC6B,MAAJ,CAAWhC;AADZ,SAJJ;AAOL0C,QAAAA,IAAI,EAAE;AACJzC,UAAAA,MAAM,EAAE,CAAC;AADL;AAPD;AADqC,KAA3B,CAAnB;AAcA+C,IAAAA,QAAQ,GAAG7E,MAAM,CAAC0B,IAAP,CAAY4C,SAAZ,CAAsB;AAC/B1C,MAAAA,KAAK,EAAE;AACLsC,QAAAA,MAAM,EAAE;AACNpC,UAAAA,MAAM,EAAEE,GAAG,CAACI,IAAJ,CAASL;AADX,SADH;AAILF,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAEE,GAAG,CAAC6B,MAAJ,CAAWhC;AADZ;AAJJ;AADwB,KAAtB,CAAX;AAWA+C,IAAAA,YAAY,GAAG,MAAM5E,MAAM,CAAC8E,YAAP,CAAoBR,SAApB,CAA8B;AACjD1C,MAAAA,KAAK,EAAE;AACLmD,QAAAA,YAAY,EAAE;AACZjD,UAAAA,MAAM,EAAEE,GAAG,CAACI,IAAJ,CAASL;AADL,SADT;AAILiD,QAAAA,cAAc,EAAE;AACdlD,UAAAA,MAAM,EAAEN,KAAK,CAAC0C;AADA;AAJX;AAD0C,KAA9B,CAArB;AAUD;;AAED,QAAMe,UAAU,GAAG,MAAMjF,MAAM,CAACqE,SAAP,CAAiB1C,KAAjB,CAAuB;AAC9CC,IAAAA,KAAK,EAAE;AACLsD,MAAAA,GAAG,EAAE;AACHrD,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAEE,GAAG,CAAC6B,MAAJ,CAAWhC;AADZ,SADN;AAIH0C,QAAAA,IAAI,EAAE;AACJzC,UAAAA,MAAM,EAAE;AADJ;AAJH;AADA;AADuC,GAAvB,CAAzB;AAaA,QAAMqD,aAAa,GAAG,MAAMnF,MAAM,CAACqE,SAAP,CAAiB1C,KAAjB,CAAuB;AACjDC,IAAAA,KAAK,EAAE;AACLsD,MAAAA,GAAG,EAAE;AACHrD,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAEE,GAAG,CAAC6B,MAAJ,CAAWhC;AADZ,SADN;AAIH0C,QAAAA,IAAI,EAAE;AACJzC,UAAAA,MAAM,EAAE,CAAC;AADL;AAJH;AADA;AAD0C,GAAvB,CAA5B;AAaA,QAAML,KAAK,GAAG,MAAMzB,MAAM,CAAC0B,IAAP,CAAYC,KAAZ,CAAkB;AACpCC,IAAAA,KAAK,EAAE;AACLC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAEN,KAAK,CAACO;AADP;AADJ;AAD6B,GAAlB,CAApB;AAQA,QAAMqD,gBAAgB,GAAG,MAAMpF,MAAM,CAAC8E,YAAP,CAAoBnD,KAApB,CAA0B;AACvDC,IAAAA,KAAK,EAAE;AACLoD,MAAAA,cAAc,EAAE;AACdlD,QAAAA,MAAM,EAAEN,KAAK,CAAC0C;AADA;AADX;AADgD,GAA1B,CAA/B;AAQA1C,EAAAA,KAAK,CAAC6D,aAAN,GAAsB7D,KAAK,CAACkD,QAAN,CAAenC,MAArC;AACAf,EAAAA,KAAK,CAAC4C,OAAN,GAAgBkB,OAAO,CAAClB,OAAD,CAAvB;AACA5C,EAAAA,KAAK,CAACgD,UAAN,GAAmBc,OAAO,CAACd,UAAD,CAA1B;AACAhD,EAAAA,KAAK,CAACyD,UAAN,GAAmBA,UAAnB;AACAzD,EAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACAD,EAAAA,KAAK,CAAC2D,aAAN,GAAsBA,aAAtB;AACA3D,EAAAA,KAAK,CAACmD,WAAN,GAAoBA,WAApB;AACAnD,EAAAA,KAAK,CAACoD,YAAN,GAAqBU,OAAO,CAACV,YAAD,CAA5B;AACApD,EAAAA,KAAK,CAACqD,QAAN,GAAiBS,OAAO,CAACT,QAAD,CAAxB;AACArD,EAAAA,KAAK,CAAC4D,gBAAN,GAAyBA,gBAAzB;AAGAnD,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEjB,IAAAA;AAAF,GAArB;AACD;;AAGD,eAAeJ,WAAf,CAA2BY,GAA3B,EAAgCC,GAAhC,EAAqC;AACnC,QAAMT,KAAK,GAAG,MAAMxB,MAAM,CAACwB,KAAP,CAAaoC,UAAb,CAAwB;AAC1ChC,IAAAA,KAAK,EAAE;AACLG,MAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWhC;AADV,KADmC;AAI1CoC,IAAAA,MAAM,EAAE;AACNC,MAAAA,MAAM,EAAE;AADF;AAJkC,GAAxB,CAApB;;AASA,MAAIlC,GAAG,CAACI,IAAJ,CAASL,EAAT,KAAgBP,KAAK,CAAC0C,MAA1B,EAAkC;AAChC,WAAOjC,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgB2B,IAAhB,CAAqB,4CAArB,CAAP;AACD;;AAED,MAAI,CAAC3C,KAAL,EAAY;AACV,WAAOqB,IAAI,CAAC;AACVG,MAAAA,OAAO,EAAE,yBADC;AAEVD,MAAAA,UAAU,EAAE;AAFF,KAAD,CAAX;AAID;;AAED,QAAM/C,MAAM,CAAC0B,IAAP,CAAY6D,UAAZ,CAAuB;AAC3B3D,IAAAA,KAAK,EAAE;AACLC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAEE,GAAG,CAAC6B,MAAJ,CAAWhC;AADZ;AADJ;AADoB,GAAvB,CAAN;AAQA,QAAM7B,MAAM,CAAC8D,OAAP,CAAeyB,UAAf,CAA0B;AAC9B3D,IAAAA,KAAK,EAAE;AACLC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAEE,GAAG,CAAC6B,MAAJ,CAAWhC;AADZ;AADJ;AADuB,GAA1B,CAAN;AAQA,QAAM7B,MAAM,CAACqE,SAAP,CAAiBkB,UAAjB,CAA4B;AAChC3D,IAAAA,KAAK,EAAE;AACLC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAEE,GAAG,CAAC6B,MAAJ,CAAWhC;AADZ;AADJ;AADyB,GAA5B,CAAN;AAQA,QAAM7B,MAAM,CAACwB,KAAP,CAAaL,MAAb,CAAoB;AACxBS,IAAAA,KAAK,EAAE;AACLG,MAAAA,EAAE,EAAEC,GAAG,CAAC6B,MAAJ,CAAWhC;AADV;AADiB,GAApB,CAAN;AAMAI,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAArB;AACD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express, { response } from \"express\";\nimport { PrismaClient } from \"@prisma/client\"\nimport { getAuthUser, protect } from \"../middleware/authorization\";\n\nconst prisma = new PrismaClient()\n\nfunction getVideoRoutes() {\n  const router = express.Router();\n\n  router.get('/', getRecommendedVideos)\n  router.post('/', protect, addVideo)\n\n  router.get('/trending', getTrendingVideos)\n  router.get('/search', searchVideos)\n\n  router.get('/:videoId', getAuthUser, getVideo)\n  router.get('/:videoId', getAuthUser, addVideoView)\n  router.get('/:videoId/like', protect, likeVideo)\n  router.get('/:videoId/dislike', protect, dislikeVideo)\n  router.post('/:videoId/comment', protect, addComment)\n  router.delete('/:videoId/delete', protect, deleteVideo)\n\n  router.delete('/:videoId/comment/:commentId', protect, deleteComment)\n\n  return router;\n}\n\nasync function getVideoViews(videos) {\n  for (const video of videos) {\n    const views = await prisma.view.count({\n      where: {\n        videoId: {\n          equals: video.id\n        }\n      }\n    })\n    video.views = views\n  }\n  return videos\n}\n\nasync function getRecommendedVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n  videos = await getVideoViews(videos)\n  res.status(200).json({ videos })\n\n}\n\nasync function getTrendingVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n  videos = await getVideoViews(videos)\n  videos.sort((a, b) => b.views - a.views)\n  res.status(200).json({ videos })\n\n}\n\nasync function searchVideos(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      statusCode: 400,\n      message: \"You haven`t entered the serachasd fasdf afgnkdcvbrjnbfjtbg\"\n    })\n  }\n\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    where: {\n      OR: [\n        {\n          title: {\n            contains: req.query.query,\n            mode: \"insensitive\"\n          }\n        },\n        {\n          description: {\n            contains: req.query.query,\n            mode: \"insensitive\"\n          },\n        }\n      ]\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n  videos = await getVideoViews(videos)\n  res.status(200).json({ videos })\n\n}\n\nasync function addVideo(req, res) {\n  const { title, description, url, thumbnail } = req.body;\n\n  const video = await prisma.video.create({\n    data: {\n      title, description, url, thumbnail,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      }\n    }\n  })\n\n  res.status(200).json({ video })\n}\n\nasync function addComment(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} doesn't exist`,\n      statusCode: 404\n    })\n  }\n\n  const comment = await prisma.comment.create({\n    data: {\n      text: req.body.text,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      },\n      video: {\n        connect: {\n          id: req.params.videoId\n        }\n      }\n    }\n  })\n\n  res.status(200).json({ comment })\n}\n\nasync function deleteComment(req, res) {\n  const comment = await prisma.comment.findUnique({\n    where: {\n      id: req.params.commentId\n    },\n    select: {\n      userId: true\n    }\n  })\n\n  if (comment.userId !== req.user.id) {\n    return res.status(401).send(\"You are not authorised to delete this comment\")\n  }\n\n  await prisma.comment.delete({\n    where: {\n      id: req.params.commentId\n    }\n  });\n\n  res.status(200).json({}).send()\n}\n\nasync function addVideoView(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} id doesn't exist`,\n      statusCode: 404\n    })\n  }\n\n  if (req.user) {\n    await prisma.view.create({\n      data: {\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        }\n      }\n    })\n  } else {\n    await prisma.view.create({\n      data: {\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        }\n      }\n    })\n  }\n\n  res.status(200).json({})\n}\n\nasync function likeVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    })\n  }\n\n  const isLiked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: 1\n      }\n    }\n  })\n\n  const isDisliked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: -1\n      }\n    }\n  })\n\n  if (isLiked) {\n    await prisma.videoLike.delete({\n      where: {\n        id: isLiked.id\n      }\n    })\n  } else if (isDisliked) {\n    await prisma.videoLike.update({\n      where: {\n        id: isDisliked.id\n      },\n      data: {\n        like: 1\n      }\n    })\n  } else {\n    await prisma.videoLike.create({\n      data: {\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        like: 1\n      }\n    })\n  }\n\n  res.status(200).json({})\n\n}\n\nasync function dislikeVideo(req, res, next) {\n\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    })\n  }\n\n  const isLiked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: 1\n      }\n    }\n  })\n\n  const isDisliked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: -1\n      }\n    }\n  })\n\n  if (isDisliked) {\n    await prisma.videoLike.delete({\n      where: {\n        id: isDisliked.id\n      }\n    })\n  } else if (isLiked) {\n    await prisma.videoLike.update({\n      where: {\n        id: isLiked.id\n      },\n      data: {\n        like: -1\n      }\n    })\n  } else {\n    await prisma.videoLike.create({\n      data: {\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        like: -1\n      }\n    })\n  }\n\n  res.status(200).json({})\n\n}\n\nasync function getVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    },\n    include: {\n      user: true,\n      comments: {\n        include: {\n          user: true\n        },\n        orderBy: {\n          createdAt: \"desc\"\n        }\n      }\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: `Video with Id: \"${req.params.videoId}\" not found`,\n      statusCode: 404\n    })\n  }\n\n  let isVideoMine = false;\n  let isLiked = false;\n  let isDisliked = false;\n  let isSubscribed = false;\n  let isViewed = false;\n\n  if (req.user) {\n    isVideoMine = req.user.id === video.userId;\n\n    isLiked = await prisma.videoLike.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: 1\n        }\n      }\n    })\n\n    isDisliked = await prisma.videoLike.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: -1\n        }\n      }\n    })\n\n    isViewed = prisma.view.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        }\n      }\n    })\n\n    isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        subscriberId: {\n          equals: req.user.id\n        },\n        subscribedToId: {\n          equals: video.userId\n        }\n      }\n    })\n  }\n\n  const likesCount = await prisma.videoLike.count({\n    where: {\n      AND: {\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: 1\n        }\n      }\n    }\n  })\n\n  const dislikesCount = await prisma.videoLike.count({\n    where: {\n      AND: {\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: -1\n        }\n      }\n    }\n  })\n\n  const views = await prisma.view.count({\n    where: {\n      videoId: {\n        equals: video.id\n      }\n    }\n  })\n\n  const subscribersCount = await prisma.subscription.count({\n    where: {\n      subscribedToId: {\n        equals: video.userId\n      }\n    }\n  })\n\n  video.commentsCount = video.comments.length;\n  video.isLiked = Boolean(isLiked);\n  video.isDisliked = Boolean(isDisliked);\n  video.likesCount = likesCount;\n  video.views = views;\n  video.dislikesCount = dislikesCount;\n  video.isVideoMine = isVideoMine;\n  video.isSubscribed = Boolean(isSubscribed);\n  video.isViewed = Boolean(isViewed);\n  video.subscribersCount = subscribersCount;\n\n\n  res.status(200).json({ video })\n}\n\n\nasync function deleteVideo(req, res) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    },\n    select: {\n      userId: true\n    }\n  })\n\n  if (req.user.id !== video.userId) {\n    return res.status(401).send('You are not authorizd to delete this video');\n  }\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    })\n  }\n\n  await prisma.view.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  })\n\n  await prisma.comment.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  })\n\n  await prisma.videoLike.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  })\n\n  await prisma.video.delete({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  res.status(200).json({})\n}\n\nexport { getVideoRoutes, getVideoViews };"
      ]
    },
    "sourceType": "script",
    "mtime": 1633853746050
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
        "sourceFileName": "error.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.errorMiddleware = errorMiddleware;\nexports.setupCloseOnExit = setupCloseOnExit;\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Middleware that will help us catch generic express-related errors\nfunction errorMiddleware(error, req, res, next) {\n  if (res.headersSent) {\n    next(error);\n  } else {\n    _loglevel.default.error(error);\n\n    res.status(error.statusCode || 500);\n    res.json({\n      message: error.message,\n      ...(process.env.NODE_ENV === \"production\" ? null : {\n        stack: error.stack\n      })\n    });\n  }\n} // This closes the server in the event of an error so\n// that our requests do not hang\n\n\nfunction setupCloseOnExit(server) {\n  async function exitHandler(options = {}) {\n    await server.close().then(() => {\n      _loglevel.default.info(\"Server successfully closed\");\n    }).catch(error => {\n      _loglevel.default.warn(\"Something went wrong closing the server\", error.stack);\n    });\n    if (options.exit) process.exit();\n  } // Do something when app is closing\n\n\n  process.on(\"exit\", exitHandler); // Catches ctrl+c event\n\n  process.on(\"SIGINT\", exitHandler.bind(null, {\n    exit: true\n  })); // Catches \"kill pid\" (for example: nodemon restart)\n\n  process.on(\"SIGUSR1\", exitHandler.bind(null, {\n    exit: true\n  }));\n  process.on(\"SIGUSR2\", exitHandler.bind(null, {\n    exit: true\n  })); // Catches uncaught exceptions\n\n  process.on(\"uncaughtException\", exitHandler.bind(null, {\n    exit: true\n  }));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVycm9yLmpzIl0sIm5hbWVzIjpbImVycm9yTWlkZGxld2FyZSIsImVycm9yIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlcnNTZW50IiwibG9nZ2VyIiwic3RhdHVzIiwic3RhdHVzQ29kZSIsImpzb24iLCJtZXNzYWdlIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic3RhY2siLCJzZXR1cENsb3NlT25FeGl0Iiwic2VydmVyIiwiZXhpdEhhbmRsZXIiLCJvcHRpb25zIiwiY2xvc2UiLCJ0aGVuIiwiaW5mbyIsImNhdGNoIiwid2FybiIsImV4aXQiLCJvbiIsImJpbmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7Ozs7QUFFQTtBQUNBLFNBQVNBLGVBQVQsQ0FBeUJDLEtBQXpCLEVBQWdDQyxHQUFoQyxFQUFxQ0MsR0FBckMsRUFBMENDLElBQTFDLEVBQWdEO0FBQzlDLE1BQUlELEdBQUcsQ0FBQ0UsV0FBUixFQUFxQjtBQUNuQkQsSUFBQUEsSUFBSSxDQUFDSCxLQUFELENBQUo7QUFDRCxHQUZELE1BRU87QUFDTEssc0JBQU9MLEtBQVAsQ0FBYUEsS0FBYjs7QUFDQUUsSUFBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVdOLEtBQUssQ0FBQ08sVUFBTixJQUFvQixHQUEvQjtBQUNBTCxJQUFBQSxHQUFHLENBQUNNLElBQUosQ0FBUztBQUNQQyxNQUFBQSxPQUFPLEVBQUVULEtBQUssQ0FBQ1MsT0FEUjtBQUVQLFVBQUlDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxRQUFaLEtBQXlCLFlBQXpCLEdBQ0EsSUFEQSxHQUVBO0FBQUVDLFFBQUFBLEtBQUssRUFBRWIsS0FBSyxDQUFDYTtBQUFmLE9BRko7QUFGTyxLQUFUO0FBTUQ7QUFDRixDLENBRUQ7QUFDQTs7O0FBQ0EsU0FBU0MsZ0JBQVQsQ0FBMEJDLE1BQTFCLEVBQWtDO0FBQ2hDLGlCQUFlQyxXQUFmLENBQTJCQyxPQUFPLEdBQUcsRUFBckMsRUFBeUM7QUFDdkMsVUFBTUYsTUFBTSxDQUNURyxLQURHLEdBRUhDLElBRkcsQ0FFRSxNQUFNO0FBQ1ZkLHdCQUFPZSxJQUFQLENBQVksNEJBQVo7QUFDRCxLQUpHLEVBS0hDLEtBTEcsQ0FLSXJCLEtBQUQsSUFBVztBQUNoQkssd0JBQU9pQixJQUFQLENBQVkseUNBQVosRUFBdUR0QixLQUFLLENBQUNhLEtBQTdEO0FBQ0QsS0FQRyxDQUFOO0FBUUEsUUFBSUksT0FBTyxDQUFDTSxJQUFaLEVBQWtCYixPQUFPLENBQUNhLElBQVI7QUFDbkIsR0FYK0IsQ0FZaEM7OztBQUNBYixFQUFBQSxPQUFPLENBQUNjLEVBQVIsQ0FBVyxNQUFYLEVBQW1CUixXQUFuQixFQWJnQyxDQWNoQzs7QUFDQU4sRUFBQUEsT0FBTyxDQUFDYyxFQUFSLENBQVcsUUFBWCxFQUFxQlIsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQXJCLEVBZmdDLENBZ0JoQzs7QUFDQWIsRUFBQUEsT0FBTyxDQUFDYyxFQUFSLENBQVcsU0FBWCxFQUFzQlIsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQXRCO0FBQ0FiLEVBQUFBLE9BQU8sQ0FBQ2MsRUFBUixDQUFXLFNBQVgsRUFBc0JSLFdBQVcsQ0FBQ1MsSUFBWixDQUFpQixJQUFqQixFQUF1QjtBQUFFRixJQUFBQSxJQUFJLEVBQUU7QUFBUixHQUF2QixDQUF0QixFQWxCZ0MsQ0FtQmhDOztBQUNBYixFQUFBQSxPQUFPLENBQUNjLEVBQVIsQ0FBVyxtQkFBWCxFQUFnQ1IsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQWhDO0FBQ0QiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvbWlkZGxld2FyZS8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nZ2VyIGZyb20gXCJsb2dsZXZlbFwiO1xuXG4vLyBNaWRkbGV3YXJlIHRoYXQgd2lsbCBoZWxwIHVzIGNhdGNoIGdlbmVyaWMgZXhwcmVzcy1yZWxhdGVkIGVycm9yc1xuZnVuY3Rpb24gZXJyb3JNaWRkbGV3YXJlKGVycm9yLCByZXEsIHJlcywgbmV4dCkge1xuICBpZiAocmVzLmhlYWRlcnNTZW50KSB7XG4gICAgbmV4dChlcnJvcik7XG4gIH0gZWxzZSB7XG4gICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICByZXMuc3RhdHVzKGVycm9yLnN0YXR1c0NvZGUgfHwgNTAwKTtcbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgLi4uKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIlxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiB7IHN0YWNrOiBlcnJvci5zdGFjayB9KSxcbiAgICB9KTtcbiAgfVxufVxuXG4vLyBUaGlzIGNsb3NlcyB0aGUgc2VydmVyIGluIHRoZSBldmVudCBvZiBhbiBlcnJvciBzb1xuLy8gdGhhdCBvdXIgcmVxdWVzdHMgZG8gbm90IGhhbmdcbmZ1bmN0aW9uIHNldHVwQ2xvc2VPbkV4aXQoc2VydmVyKSB7XG4gIGFzeW5jIGZ1bmN0aW9uIGV4aXRIYW5kbGVyKG9wdGlvbnMgPSB7fSkge1xuICAgIGF3YWl0IHNlcnZlclxuICAgICAgLmNsb3NlKClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJTZXJ2ZXIgc3VjY2Vzc2Z1bGx5IGNsb3NlZFwiKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGxvZ2dlci53YXJuKFwiU29tZXRoaW5nIHdlbnQgd3JvbmcgY2xvc2luZyB0aGUgc2VydmVyXCIsIGVycm9yLnN0YWNrKTtcbiAgICAgIH0pO1xuICAgIGlmIChvcHRpb25zLmV4aXQpIHByb2Nlc3MuZXhpdCgpO1xuICB9XG4gIC8vIERvIHNvbWV0aGluZyB3aGVuIGFwcCBpcyBjbG9zaW5nXG4gIHByb2Nlc3Mub24oXCJleGl0XCIsIGV4aXRIYW5kbGVyKTtcbiAgLy8gQ2F0Y2hlcyBjdHJsK2MgZXZlbnRcbiAgcHJvY2Vzcy5vbihcIlNJR0lOVFwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG4gIC8vIENhdGNoZXMgXCJraWxsIHBpZFwiIChmb3IgZXhhbXBsZTogbm9kZW1vbiByZXN0YXJ0KVxuICBwcm9jZXNzLm9uKFwiU0lHVVNSMVwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG4gIHByb2Nlc3Mub24oXCJTSUdVU1IyXCIsIGV4aXRIYW5kbGVyLmJpbmQobnVsbCwgeyBleGl0OiB0cnVlIH0pKTtcbiAgLy8gQ2F0Y2hlcyB1bmNhdWdodCBleGNlcHRpb25zXG4gIHByb2Nlc3Mub24oXCJ1bmNhdWdodEV4Y2VwdGlvblwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG59XG5cbmV4cG9ydCB7IGVycm9yTWlkZGxld2FyZSwgc2V0dXBDbG9zZU9uRXhpdCB9O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "error.js"
      ],
      "names": [
        "errorMiddleware",
        "error",
        "req",
        "res",
        "next",
        "headersSent",
        "logger",
        "status",
        "statusCode",
        "json",
        "message",
        "process",
        "env",
        "NODE_ENV",
        "stack",
        "setupCloseOnExit",
        "server",
        "exitHandler",
        "options",
        "close",
        "then",
        "info",
        "catch",
        "warn",
        "exit",
        "on",
        "bind"
      ],
      "mappings": ";;;;;;;;AAAA;;;;AAEA;AACA,SAASA,eAAT,CAAyBC,KAAzB,EAAgCC,GAAhC,EAAqCC,GAArC,EAA0CC,IAA1C,EAAgD;AAC9C,MAAID,GAAG,CAACE,WAAR,EAAqB;AACnBD,IAAAA,IAAI,CAACH,KAAD,CAAJ;AACD,GAFD,MAEO;AACLK,sBAAOL,KAAP,CAAaA,KAAb;;AACAE,IAAAA,GAAG,CAACI,MAAJ,CAAWN,KAAK,CAACO,UAAN,IAAoB,GAA/B;AACAL,IAAAA,GAAG,CAACM,IAAJ,CAAS;AACPC,MAAAA,OAAO,EAAET,KAAK,CAACS,OADR;AAEP,UAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACA,IADA,GAEA;AAAEC,QAAAA,KAAK,EAAEb,KAAK,CAACa;AAAf,OAFJ;AAFO,KAAT;AAMD;AACF,C,CAED;AACA;;;AACA,SAASC,gBAAT,CAA0BC,MAA1B,EAAkC;AAChC,iBAAeC,WAAf,CAA2BC,OAAO,GAAG,EAArC,EAAyC;AACvC,UAAMF,MAAM,CACTG,KADG,GAEHC,IAFG,CAEE,MAAM;AACVd,wBAAOe,IAAP,CAAY,4BAAZ;AACD,KAJG,EAKHC,KALG,CAKIrB,KAAD,IAAW;AAChBK,wBAAOiB,IAAP,CAAY,yCAAZ,EAAuDtB,KAAK,CAACa,KAA7D;AACD,KAPG,CAAN;AAQA,QAAII,OAAO,CAACM,IAAZ,EAAkBb,OAAO,CAACa,IAAR;AACnB,GAX+B,CAYhC;;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,MAAX,EAAmBR,WAAnB,EAbgC,CAchC;;AACAN,EAAAA,OAAO,CAACc,EAAR,CAAW,QAAX,EAAqBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAArB,EAfgC,CAgBhC;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,SAAX,EAAsBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAtB;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,SAAX,EAAsBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAtB,EAlBgC,CAmBhC;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,mBAAX,EAAgCR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAhC;AACD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "sourcesContent": [
        "import logger from \"loglevel\";\n\n// Middleware that will help us catch generic express-related errors\nfunction errorMiddleware(error, req, res, next) {\n  if (res.headersSent) {\n    next(error);\n  } else {\n    logger.error(error);\n    res.status(error.statusCode || 500);\n    res.json({\n      message: error.message,\n      ...(process.env.NODE_ENV === \"production\"\n        ? null\n        : { stack: error.stack }),\n    });\n  }\n}\n\n// This closes the server in the event of an error so\n// that our requests do not hang\nfunction setupCloseOnExit(server) {\n  async function exitHandler(options = {}) {\n    await server\n      .close()\n      .then(() => {\n        logger.info(\"Server successfully closed\");\n      })\n      .catch((error) => {\n        logger.warn(\"Something went wrong closing the server\", error.stack);\n      });\n    if (options.exit) process.exit();\n  }\n  // Do something when app is closing\n  process.on(\"exit\", exitHandler);\n  // Catches ctrl+c event\n  process.on(\"SIGINT\", exitHandler.bind(null, { exit: true }));\n  // Catches \"kill pid\" (for example: nodemon restart)\n  process.on(\"SIGUSR1\", exitHandler.bind(null, { exit: true }));\n  process.on(\"SIGUSR2\", exitHandler.bind(null, { exit: true }));\n  // Catches uncaught exceptions\n  process.on(\"uncaughtException\", exitHandler.bind(null, { exit: true }));\n}\n\nexport { errorMiddleware, setupCloseOnExit };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
        "sourceFileName": "start.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.startServer = startServer;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nrequire(\"express-async-errors\");\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\n\nvar _routes = require(\"./routes\");\n\nvar _error = require(\"./middleware/error\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Import this module to handle errors when using async functions for our route handlers\n_dotenv.default.config();\n\nfunction startServer({\n  port = process.env.PORT\n} = {}) {\n  const app = (0, _express.default)();\n  app.use((0, _morgan.default)(\"dev\"));\n  app.use((0, _cors.default)());\n  app.use((0, _cookieParser.default)());\n  app.use(_express.default.json()); // all API routes are prefixed with /api/v1\n\n  app.use(\"/api/v1\", (0, _routes.getRoutes)()); // Generic error handler if errors are missed by 'express-async-errors' middleware\n\n  app.use(_error.errorMiddleware); // When our project is pushed to production, we will serve // the react app using express.static() middleware\n\n  if (process.env.NODE_ENV === \"production\") {\n    app.use(_express.default.static(_path.default.resolve(__dirname, \"../client/build\"))); // Any request not caught by our API will be routed\n    // to our built react app\n\n    app.get(\"*\", function (req, res) {\n      res.sendFile(_path.default.resolve(__dirname, \"../client/build\", \"index.html\"));\n    });\n  } // This block of code is made to reliably start and close our express app\n  // It is written as a promise, which can be more easily tested\n\n\n  return new Promise(resolve => {\n    const server = app.listen(port, () => {\n      _loglevel.default.info(`Listening on port ${server.address().port}`);\n\n      const originalClose = server.close.bind(server);\n\n      server.close = () => {\n        return new Promise(resolveClose => {\n          originalClose(resolveClose);\n        });\n      }; // This function properly closes the server when the program exits\n\n\n      (0, _error.setupCloseOnExit)(server);\n      resolve(server);\n    });\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXJ0LmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsInN0YXJ0U2VydmVyIiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwiYXBwIiwidXNlIiwiZXhwcmVzcyIsImpzb24iLCJlcnJvck1pZGRsZXdhcmUiLCJOT0RFX0VOViIsInN0YXRpYyIsInBhdGgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiZ2V0IiwicmVxIiwicmVzIiwic2VuZEZpbGUiLCJQcm9taXNlIiwic2VydmVyIiwibGlzdGVuIiwibG9nZ2VyIiwiaW5mbyIsImFkZHJlc3MiLCJvcmlnaW5hbENsb3NlIiwiY2xvc2UiLCJiaW5kIiwicmVzb2x2ZUNsb3NlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFWQTtBQVlBQSxnQkFBT0MsTUFBUDs7QUFFQSxTQUFTQyxXQUFULENBQXFCO0FBQUVDLEVBQUFBLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDO0FBQXJCLElBQThCLEVBQW5ELEVBQXVEO0FBQ3JELFFBQU1DLEdBQUcsR0FBRyx1QkFBWjtBQUNBQSxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxxQkFBTyxLQUFQLENBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsb0JBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsNEJBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVFDLGlCQUFRQyxJQUFSLEVBQVIsRUFMcUQsQ0FNckQ7O0FBQ0FILEVBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLFNBQVIsRUFBbUIsd0JBQW5CLEVBUHFELENBU3JEOztBQUNBRCxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUUcsc0JBQVIsRUFWcUQsQ0FZckQ7O0FBQ0EsTUFBSVAsT0FBTyxDQUFDQyxHQUFSLENBQVlPLFFBQVosS0FBeUIsWUFBN0IsRUFBMkM7QUFDekNMLElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxpQkFBUUksTUFBUixDQUFlQyxjQUFLQyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsaUJBQXhCLENBQWYsQ0FBUixFQUR5QyxDQUd6QztBQUNBOztBQUNBVCxJQUFBQSxHQUFHLENBQUNVLEdBQUosQ0FBUSxHQUFSLEVBQWEsVUFBVUMsR0FBVixFQUFlQyxHQUFmLEVBQW9CO0FBQy9CQSxNQUFBQSxHQUFHLENBQUNDLFFBQUosQ0FBYU4sY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLGlCQUF4QixFQUEyQyxZQUEzQyxDQUFiO0FBQ0QsS0FGRDtBQUdELEdBckJvRCxDQXVCckQ7QUFDQTs7O0FBQ0EsU0FBTyxJQUFJSyxPQUFKLENBQWFOLE9BQUQsSUFBYTtBQUM5QixVQUFNTyxNQUFNLEdBQUdmLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBV3BCLElBQVgsRUFBaUIsTUFBTTtBQUNwQ3FCLHdCQUFPQyxJQUFQLENBQWEscUJBQW9CSCxNQUFNLENBQUNJLE9BQVAsR0FBaUJ2QixJQUFLLEVBQXZEOztBQUVBLFlBQU13QixhQUFhLEdBQUdMLE1BQU0sQ0FBQ00sS0FBUCxDQUFhQyxJQUFiLENBQWtCUCxNQUFsQixDQUF0Qjs7QUFDQUEsTUFBQUEsTUFBTSxDQUFDTSxLQUFQLEdBQWUsTUFBTTtBQUNuQixlQUFPLElBQUlQLE9BQUosQ0FBYVMsWUFBRCxJQUFrQjtBQUNuQ0gsVUFBQUEsYUFBYSxDQUFDRyxZQUFELENBQWI7QUFDRCxTQUZNLENBQVA7QUFHRCxPQUpELENBSm9DLENBU3BDOzs7QUFDQSxtQ0FBaUJSLE1BQWpCO0FBQ0FQLE1BQUFBLE9BQU8sQ0FBQ08sTUFBRCxDQUFQO0FBQ0QsS0FaYyxDQUFmO0FBYUQsR0FkTSxDQUFQO0FBZUQiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcbi8vIEltcG9ydCB0aGlzIG1vZHVsZSB0byBoYW5kbGUgZXJyb3JzIHdoZW4gdXNpbmcgYXN5bmMgZnVuY3Rpb25zIGZvciBvdXIgcm91dGUgaGFuZGxlcnNcbmltcG9ydCBcImV4cHJlc3MtYXN5bmMtZXJyb3JzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcImxvZ2xldmVsXCI7XG5pbXBvcnQgbW9yZ2FuIGZyb20gXCJtb3JnYW5cIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tIFwiY29va2llLXBhcnNlclwiO1xuXG5pbXBvcnQgeyBnZXRSb3V0ZXMgfSBmcm9tIFwiLi9yb3V0ZXNcIjtcbmltcG9ydCB7IGVycm9yTWlkZGxld2FyZSwgc2V0dXBDbG9zZU9uRXhpdCB9IGZyb20gXCIuL21pZGRsZXdhcmUvZXJyb3JcIjtcblxuZG90ZW52LmNvbmZpZygpO1xuXG5mdW5jdGlvbiBzdGFydFNlcnZlcih7IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIH0gPSB7fSkge1xuICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG4gIGFwcC51c2UobW9yZ2FuKFwiZGV2XCIpKTtcbiAgYXBwLnVzZShjb3JzKCkpO1xuICBhcHAudXNlKGNvb2tpZVBhcnNlcigpKTtcbiAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gIC8vIGFsbCBBUEkgcm91dGVzIGFyZSBwcmVmaXhlZCB3aXRoIC9hcGkvdjFcbiAgYXBwLnVzZShcIi9hcGkvdjFcIiwgZ2V0Um91dGVzKCkpO1xuXG4gIC8vIEdlbmVyaWMgZXJyb3IgaGFuZGxlciBpZiBlcnJvcnMgYXJlIG1pc3NlZCBieSAnZXhwcmVzcy1hc3luYy1lcnJvcnMnIG1pZGRsZXdhcmVcbiAgYXBwLnVzZShlcnJvck1pZGRsZXdhcmUpO1xuXG4gIC8vIFdoZW4gb3VyIHByb2plY3QgaXMgcHVzaGVkIHRvIHByb2R1Y3Rpb24sIHdlIHdpbGwgc2VydmUgLy8gdGhlIHJlYWN0IGFwcCB1c2luZyBleHByZXNzLnN0YXRpYygpIG1pZGRsZXdhcmVcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xuICAgIGFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuLi9jbGllbnQvYnVpbGRcIikpKTtcblxuICAgIC8vIEFueSByZXF1ZXN0IG5vdCBjYXVnaHQgYnkgb3VyIEFQSSB3aWxsIGJlIHJvdXRlZFxuICAgIC8vIHRvIG91ciBidWlsdCByZWFjdCBhcHBcbiAgICBhcHAuZ2V0KFwiKlwiLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICAgIHJlcy5zZW5kRmlsZShwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uL2NsaWVudC9idWlsZFwiLCBcImluZGV4Lmh0bWxcIikpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gVGhpcyBibG9jayBvZiBjb2RlIGlzIG1hZGUgdG8gcmVsaWFibHkgc3RhcnQgYW5kIGNsb3NlIG91ciBleHByZXNzIGFwcFxuICAvLyBJdCBpcyB3cml0dGVuIGFzIGEgcHJvbWlzZSwgd2hpY2ggY2FuIGJlIG1vcmUgZWFzaWx5IHRlc3RlZFxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBzZXJ2ZXIgPSBhcHAubGlzdGVuKHBvcnQsICgpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKGBMaXN0ZW5pbmcgb24gcG9ydCAke3NlcnZlci5hZGRyZXNzKCkucG9ydH1gKTtcblxuICAgICAgY29uc3Qgb3JpZ2luYWxDbG9zZSA9IHNlcnZlci5jbG9zZS5iaW5kKHNlcnZlcik7XG4gICAgICBzZXJ2ZXIuY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZUNsb3NlKSA9PiB7XG4gICAgICAgICAgb3JpZ2luYWxDbG9zZShyZXNvbHZlQ2xvc2UpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICAvLyBUaGlzIGZ1bmN0aW9uIHByb3Blcmx5IGNsb3NlcyB0aGUgc2VydmVyIHdoZW4gdGhlIHByb2dyYW0gZXhpdHNcbiAgICAgIHNldHVwQ2xvc2VPbkV4aXQoc2VydmVyKTtcbiAgICAgIHJlc29sdmUoc2VydmVyKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCB7IHN0YXJ0U2VydmVyIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "start.js"
      ],
      "names": [
        "dotenv",
        "config",
        "startServer",
        "port",
        "process",
        "env",
        "PORT",
        "app",
        "use",
        "express",
        "json",
        "errorMiddleware",
        "NODE_ENV",
        "static",
        "path",
        "resolve",
        "__dirname",
        "get",
        "req",
        "res",
        "sendFile",
        "Promise",
        "server",
        "listen",
        "logger",
        "info",
        "address",
        "originalClose",
        "close",
        "bind",
        "resolveClose"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAVA;AAYAA,gBAAOC,MAAP;;AAEA,SAASC,WAAT,CAAqB;AAAEC,EAAAA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC;AAArB,IAA8B,EAAnD,EAAuD;AACrD,QAAMC,GAAG,GAAG,uBAAZ;AACAA,EAAAA,GAAG,CAACC,GAAJ,CAAQ,qBAAO,KAAP,CAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQ,4BAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQC,IAAR,EAAR,EALqD,CAMrD;;AACAH,EAAAA,GAAG,CAACC,GAAJ,CAAQ,SAAR,EAAmB,wBAAnB,EAPqD,CASrD;;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQG,sBAAR,EAVqD,CAYrD;;AACA,MAAIP,OAAO,CAACC,GAAR,CAAYO,QAAZ,KAAyB,YAA7B,EAA2C;AACzCL,IAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQI,MAAR,CAAeC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,CAAf,CAAR,EADyC,CAGzC;AACA;;AACAT,IAAAA,GAAG,CAACU,GAAJ,CAAQ,GAAR,EAAa,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC/BA,MAAAA,GAAG,CAACC,QAAJ,CAAaN,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,EAA2C,YAA3C,CAAb;AACD,KAFD;AAGD,GArBoD,CAuBrD;AACA;;;AACA,SAAO,IAAIK,OAAJ,CAAaN,OAAD,IAAa;AAC9B,UAAMO,MAAM,GAAGf,GAAG,CAACgB,MAAJ,CAAWpB,IAAX,EAAiB,MAAM;AACpCqB,wBAAOC,IAAP,CAAa,qBAAoBH,MAAM,CAACI,OAAP,GAAiBvB,IAAK,EAAvD;;AAEA,YAAMwB,aAAa,GAAGL,MAAM,CAACM,KAAP,CAAaC,IAAb,CAAkBP,MAAlB,CAAtB;;AACAA,MAAAA,MAAM,CAACM,KAAP,GAAe,MAAM;AACnB,eAAO,IAAIP,OAAJ,CAAaS,YAAD,IAAkB;AACnCH,UAAAA,aAAa,CAACG,YAAD,CAAb;AACD,SAFM,CAAP;AAGD,OAJD,CAJoC,CASpC;;;AACA,mCAAiBR,MAAjB;AACAP,MAAAA,OAAO,CAACO,MAAD,CAAP;AACD,KAZc,CAAf;AAaD,GAdM,CAAP;AAeD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
      "sourcesContent": [
        "import express from \"express\";\n// Import this module to handle errors when using async functions for our route handlers\nimport \"express-async-errors\";\nimport path from \"path\";\nimport cors from \"cors\";\nimport logger from \"loglevel\";\nimport morgan from \"morgan\";\nimport dotenv from \"dotenv\";\nimport cookieParser from \"cookie-parser\";\n\nimport { getRoutes } from \"./routes\";\nimport { errorMiddleware, setupCloseOnExit } from \"./middleware/error\";\n\ndotenv.config();\n\nfunction startServer({ port = process.env.PORT } = {}) {\n  const app = express();\n  app.use(morgan(\"dev\"));\n  app.use(cors());\n  app.use(cookieParser());\n  app.use(express.json());\n  // all API routes are prefixed with /api/v1\n  app.use(\"/api/v1\", getRoutes());\n\n  // Generic error handler if errors are missed by 'express-async-errors' middleware\n  app.use(errorMiddleware);\n\n  // When our project is pushed to production, we will serve // the react app using express.static() middleware\n  if (process.env.NODE_ENV === \"production\") {\n    app.use(express.static(path.resolve(__dirname, \"../client/build\")));\n\n    // Any request not caught by our API will be routed\n    // to our built react app\n    app.get(\"*\", function (req, res) {\n      res.sendFile(path.resolve(__dirname, \"../client/build\", \"index.html\"));\n    });\n  }\n\n  // This block of code is made to reliably start and close our express app\n  // It is written as a promise, which can be more easily tested\n  return new Promise((resolve) => {\n    const server = app.listen(port, () => {\n      logger.info(`Listening on port ${server.address().port}`);\n\n      const originalClose = server.close.bind(server);\n      server.close = () => {\n        return new Promise((resolveClose) => {\n          originalClose(resolveClose);\n        });\n      };\n      // This function properly closes the server when the program exits\n      setupCloseOnExit(server);\n      resolve(server);\n    });\n  });\n}\n\nexport { startServer };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRoutes = getRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _auth = require(\"./auth\");\n\nvar _user = require(\"./user\");\n\nvar _video = require(\"./video\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getRoutes() {\n  // All routes in our Node API are placed on this router\n  const router = _express.default.Router(); // router.use() prefixes our route (i.e. /api/v1/auth)\n\n\n  router.use(\"/auth\", (0, _auth.getAuthRoutes)());\n  router.use(\"/users\", (0, _user.getUserRoutes)());\n  router.use(\"/videos\", (0, _video.getVideoRoutes)());\n  return router;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImdldFJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJ1c2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUVBLFNBQVNBLFNBQVQsR0FBcUI7QUFDbkI7QUFDQSxRQUFNQyxNQUFNLEdBQUdDLGlCQUFRQyxNQUFSLEVBQWYsQ0FGbUIsQ0FJbkI7OztBQUNBRixFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxPQUFYLEVBQW9CLDBCQUFwQjtBQUNBSCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxRQUFYLEVBQXFCLDBCQUFyQjtBQUNBSCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxTQUFYLEVBQXNCLDRCQUF0QjtBQUVBLFNBQU9ILE1BQVA7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9KYXZhU2NyaXB0L3lvdVR1YmUvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcblxuaW1wb3J0IHsgZ2V0QXV0aFJvdXRlcyB9IGZyb20gXCIuL2F1dGhcIjtcbmltcG9ydCB7IGdldFVzZXJSb3V0ZXMgfSBmcm9tIFwiLi91c2VyXCI7XG5pbXBvcnQgeyBnZXRWaWRlb1JvdXRlcyB9IGZyb20gXCIuL3ZpZGVvXCI7XG5cbmZ1bmN0aW9uIGdldFJvdXRlcygpIHtcbiAgLy8gQWxsIHJvdXRlcyBpbiBvdXIgTm9kZSBBUEkgYXJlIHBsYWNlZCBvbiB0aGlzIHJvdXRlclxuICBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gIC8vIHJvdXRlci51c2UoKSBwcmVmaXhlcyBvdXIgcm91dGUgKGkuZS4gL2FwaS92MS9hdXRoKVxuICByb3V0ZXIudXNlKFwiL2F1dGhcIiwgZ2V0QXV0aFJvdXRlcygpKTtcbiAgcm91dGVyLnVzZShcIi91c2Vyc1wiLCBnZXRVc2VyUm91dGVzKCkpO1xuICByb3V0ZXIudXNlKFwiL3ZpZGVvc1wiLCBnZXRWaWRlb1JvdXRlcygpKTtcblxuICByZXR1cm4gcm91dGVyO1xufVxuXG5leHBvcnQgeyBnZXRSb3V0ZXMgfTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "getRoutes",
        "router",
        "express",
        "Router",
        "use"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;;;AAEA,SAASA,SAAT,GAAqB;AACnB;AACA,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf,CAFmB,CAInB;;;AACAF,EAAAA,MAAM,CAACG,GAAP,CAAW,OAAX,EAAoB,0BAApB;AACAH,EAAAA,MAAM,CAACG,GAAP,CAAW,QAAX,EAAqB,0BAArB;AACAH,EAAAA,MAAM,CAACG,GAAP,CAAW,SAAX,EAAsB,4BAAtB;AAEA,SAAOH,MAAP;AACD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\n\nimport { getAuthRoutes } from \"./auth\";\nimport { getUserRoutes } from \"./user\";\nimport { getVideoRoutes } from \"./video\";\n\nfunction getRoutes() {\n  // All routes in our Node API are placed on this router\n  const router = express.Router();\n\n  // router.use() prefixes our route (i.e. /api/v1/auth)\n  router.use(\"/auth\", getAuthRoutes());\n  router.use(\"/users\", getUserRoutes());\n  router.use(\"/videos\", getVideoRoutes());\n\n  return router;\n}\n\nexport { getRoutes };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAuthRoutes = getAuthRoutes;\n\nvar _express = _interopRequireWildcard(require(\"express\"));\n\nvar _client = require(\"@prisma/client\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _authorization = require(\"../middleware/authorization\");\n\nvar _googleAuthLibrary = require(\"google-auth-library\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst client = new _googleAuthLibrary.OAuth2Client(process.env.GOOGLE_CLIENT_ID); // A function to get the routes.\n// All route definitions are in one place and we only need to export one thing\n\nconst prisma = new _client.PrismaClient();\n\nfunction getAuthRoutes() {\n  const router = _express.default.Router();\n\n  router.post('/google-login', googleLogin);\n  router.get('/me', _authorization.protect, me);\n  router.get('/signout', signout);\n  return router;\n} // All controllers/utility functions here\n\n\nasync function googleLogin(req, res) {\n  const {\n    idToken\n  } = req.body;\n  console.log(\"Google login requested\");\n  console.log(client, client.verifyIdToken);\n  console.log(\"req.body: \" + req.body);\n  console.log(process.env.GOOGLE_CLIENT_ID);\n\n  try {\n    console.log(\"Trying\");\n    const ticket = await client.verifyIdToken({\n      idToken,\n      audience: process.env.GOOGLE_CLIENT_ID\n    });\n    console.log(\"Ticket: inside\" + ticket);\n    console.log(\"Ticket inside after \");\n  } catch (error) {\n    console.log(error);\n  }\n\n  console.log(\"Ticket: Outside\" + ticket);\n  console.log(\"Ticket after Outside\");\n  const {\n    name,\n    picture,\n    email\n  } = ticket.getPayload();\n  let user = await prisma.user.findUnique({\n    where: {\n      email\n    }\n  });\n\n  if (!user) {\n    console.log(\"New user created\");\n    user = await prisma.user.create({\n      data: {\n        email,\n        username: name,\n        avatar: picture\n      }\n    });\n  }\n\n  const tokenPlayload = {\n    id: user.id\n  };\n\n  const token = _jsonwebtoken.default.sign(tokenPlayload, process.env.JWT_SECRET, {\n    expiresIn: process.env.JWT_EXPIRE\n  });\n\n  console.log(token);\n  res.cookie(\"token\", token, {\n    httpOnly: true\n  });\n  res.status(200).send(token);\n}\n\nasync function me(req, res) {\n  const subscribtions = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      }\n    }\n  });\n  const channelIds = subscribtions.map(sub => sub.subscribedToId);\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        in: channelIds\n      }\n    }\n  });\n  const user = req.user;\n  user.channels = channels;\n  res.status(200).json({\n    user\n  });\n}\n\nfunction signout(req, res) {\n  res.clearCookie('token');\n  res.status(200).json({});\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiY2xpZW50IiwiT0F1dGgyQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9DTElFTlRfSUQiLCJwcmlzbWEiLCJQcmlzbWFDbGllbnQiLCJnZXRBdXRoUm91dGVzIiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInBvc3QiLCJnb29nbGVMb2dpbiIsImdldCIsInByb3RlY3QiLCJtZSIsInNpZ25vdXQiLCJyZXEiLCJyZXMiLCJpZFRva2VuIiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJ2ZXJpZnlJZFRva2VuIiwidGlja2V0IiwiYXVkaWVuY2UiLCJlcnJvciIsIm5hbWUiLCJwaWN0dXJlIiwiZW1haWwiLCJnZXRQYXlsb2FkIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImNyZWF0ZSIsImRhdGEiLCJ1c2VybmFtZSIsImF2YXRhciIsInRva2VuUGxheWxvYWQiLCJpZCIsInRva2VuIiwiand0Iiwic2lnbiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJKV1RfRVhQSVJFIiwiY29va2llIiwiaHR0cE9ubHkiLCJzdGF0dXMiLCJzZW5kIiwic3Vic2NyaWJ0aW9ucyIsInN1YnNjcmlwdGlvbiIsImZpbmRNYW55Iiwic3Vic2NyaWJlcklkIiwiZXF1YWxzIiwiY2hhbm5lbElkcyIsIm1hcCIsInN1YiIsInN1YnNjcmliZWRUb0lkIiwiY2hhbm5lbHMiLCJpbiIsImpzb24iLCJjbGVhckNvb2tpZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFJQywrQkFBSixDQUFpQkMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGdCQUE3QixDQUFmLEMsQ0FFQTtBQUNBOztBQUVBLE1BQU1DLE1BQU0sR0FBRyxJQUFJQyxvQkFBSixFQUFmOztBQUNBLFNBQVNDLGFBQVQsR0FBeUI7QUFDdkIsUUFBTUMsTUFBTSxHQUFH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dG9wL0phdmFTY3JpcHQveW91VHViZS9zZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcywgeyByZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuaW1wb3J0IHsgcHJvdGVjdCB9IGZyb20gXCIuLi9taWRkbGV3YXJlL2F1dGhvcml6YXRpb25cIjtcbmltcG9ydCB7IE9BdXRoMkNsaWVudCB9IGZyb20gXCJnb29nbGUtYXV0aC1saWJyYXJ5XCI7XG5cbmNvbnN0IGNsaWVudCA9IG5ldyBPQXV0aDJDbGllbnQocHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRClcblxuLy8gQSBmdW5jdGlvbiB0byBnZXQgdGhlIHJvdXRlcy5cbi8vIEFsbCByb3V0ZSBkZWZpbml0aW9ucyBhcmUgaW4gb25lIHBsYWNlIGFuZCB3ZSBvbmx5IG5lZWQgdG8gZXhwb3J0IG9uZSB0aGluZ1xuXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KClcbmZ1bmN0aW9uIGdldEF1dGhSb3V0ZXMoKSB7XG4gIGNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbiAgcm91dGVyLnBvc3QoJy9nb29nbGUtbG9naW4nLCBnb29nbGVMb2dpbilcbiAgcm91dGVyLmdldCgnL21lJywgcHJvdGVjdCwgbWUpXG4gIHJvdXRlci5nZXQoJy9zaWdub3V0Jywgc2lnbm91dClcblxuXG4gIHJldHVybiByb3V0ZXI7XG59XG5cbi8vIEFsbCBjb250cm9sbGVycy91dGlsaXR5IGZ1bmN0aW9ucyBoZXJlXG5hc3luYyBmdW5jdGlvbiBnb29nbGVMb2dpbihyZXEsIHJlcykge1xuICBjb25zdCB7IGlkVG9rZW4gfSA9IHJlcS5ib2R5XG4gIGNvbnNvbGUubG9nKFwiR29vZ2xlIGxvZ2luIHJlcXVlc3RlZFwiKVxuICBjb25zb2xlLmxvZyhjbGllbnQsIGNsaWVudC52ZXJpZnlJZFRva2VuKTtcbiAgY29uc29sZS5sb2coXCJyZXEuYm9keTogXCIgKyByZXEuYm9keSlcbiAgY29uc29sZS5sb2cocHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCk7XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIlRyeWluZ1wiKVxuICAgIGNvbnN0IHRpY2tldCA9IGF3YWl0IGNsaWVudC52ZXJpZnlJZFRva2VuKHtcbiAgICAgIGlkVG9rZW4sXG4gICAgICBhdWRpZW5jZTogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRFxuICAgIH0pXG4gICAgY29uc29sZS5sb2coXCJUaWNrZXQ6IGluc2lkZVwiICsgdGlja2V0KVxuICAgIGNvbnNvbGUubG9nKFwiVGlja2V0IGluc2lkZSBhZnRlciBcIilcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgfVxuXG4gIGNvbnNvbGUubG9nKFwiVGlja2V0OiBPdXRzaWRlXCIgKyB0aWNrZXQpXG4gIGNvbnNvbGUubG9nKFwiVGlja2V0IGFmdGVyIE91dHNpZGVcIilcblxuXG5cblxuICBjb25zdCB7IG5hbWUsIHBpY3R1cmUsIGVtYWlsIH0gPSB0aWNrZXQuZ2V0UGF5bG9hZCgpO1xuXG4gIGxldCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGVtYWlsXG4gICAgfVxuICB9KVxuXG4gIGlmICghdXNlcikge1xuICAgIGNvbnNvbGUubG9nKFwiTmV3IHVzZXIgY3JlYXRlZFwiKVxuICAgIHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBlbWFpbCxcbiAgICAgICAgdXNlcm5hbWU6IG5hbWUsXG4gICAgICAgIGF2YXRhcjogcGljdHVyZVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBjb25zdCB0b2tlblBsYXlsb2FkID0geyBpZDogdXNlci5pZCB9XG4gIGNvbnN0IHRva2VuID0gand0LnNpZ24odG9rZW5QbGF5bG9hZCwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwge1xuICAgIGV4cGlyZXNJbjogcHJvY2Vzcy5lbnYuSldUX0VYUElSRVxuICB9KVxuICBjb25zb2xlLmxvZyh0b2tlbilcbiAgcmVzLmNvb2tpZShcInRva2VuXCIsIHRva2VuLCB7IGh0dHBPbmx5OiB0cnVlIH0pXG4gIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHRva2VuKVxufVxuXG5hc3luYyBmdW5jdGlvbiBtZShyZXEsIHJlcykge1xuICBjb25zdCBzdWJzY3JpYnRpb25zID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHN1YnNjcmliZXJJZDoge1xuICAgICAgICBlcXVhbHM6IHJlcS51c2VyLmlkXG4gICAgICB9XG4gICAgfVxuICB9KVxuICBjb25zdCBjaGFubmVsSWRzID0gc3Vic2NyaWJ0aW9ucy5tYXAoc3ViID0+IHN1Yi5zdWJzY3JpYmVkVG9JZClcbiAgY29uc3QgY2hhbm5lbHMgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiB7XG4gICAgICAgIGluOiBjaGFubmVsSWRzLFxuICAgICAgfSxcblxuICAgIH1cbiAgfSlcblxuICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gIHVzZXIuY2hhbm5lbHMgPSBjaGFubmVsc1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlciB9KTtcbn1cblxuZnVuY3Rpb24gc2lnbm91dChyZXEsIHJlcykge1xuICByZXMuY2xlYXJDb29raWUoJ3Rva2VuJylcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe30pXG59XG5cbmV4cG9ydCB7IGdldEF1dGhSb3V0ZXMgfTsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "client",
        "OAuth2Client",
        "process",
        "env",
        "GOOGLE_CLIENT_ID",
        "prisma",
        "PrismaClient",
        "getAuthRoutes",
        "router",
        "express",
        "Router",
        "post",
        "googleLogin",
        "get",
        "protect",
        "me",
        "signout",
        "req",
        "res",
        "idToken",
        "body",
        "console",
        "log",
        "verifyIdToken",
        "ticket",
        "audience",
        "error",
        "name",
        "picture",
        "email",
        "getPayload",
        "user",
        "findUnique",
        "where",
        "create",
        "data",
        "username",
        "avatar",
        "tokenPlayload",
        "id",
        "token",
        "jwt",
        "sign",
        "JWT_SECRET",
        "expiresIn",
        "JWT_EXPIRE",
        "cookie",
        "httpOnly",
        "status",
        "send",
        "subscribtions",
        "subscription",
        "findMany",
        "subscriberId",
        "equals",
        "channelIds",
        "map",
        "sub",
        "subscribedToId",
        "channels",
        "in",
        "json",
        "clearCookie"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express, { response } from \"express\";\nimport { PrismaClient } from '@prisma/client'\nimport jwt from \"jsonwebtoken\";\nimport { protect } from \"../middleware/authorization\";\nimport { OAuth2Client } from \"google-auth-library\";\n\nconst client = new OAuth2Client(process.env.GOOGLE_CLIENT_ID)\n\n// A function to get the routes.\n// All route definitions are in one place and we only need to export one thing\n\nconst prisma = new PrismaClient()\nfunction getAuthRoutes() {\n  const router = express.Router();\n\n  router.post('/google-login', googleLogin)\n  router.get('/me', protect, me)\n  router.get('/signout', signout)\n\n\n  return router;\n}\n\n// All controllers/utility functions here\nasync function googleLogin(req, res) {\n  const { idToken } = req.body\n  console.log(\"Google login requested\")\n  console.log(client, client.verifyIdToken);\n  console.log(\"req.body: \" + req.body)\n  console.log(process.env.GOOGLE_CLIENT_ID);\n\n  try {\n    console.log(\"Trying\")\n    const ticket = await client.verifyIdToken({\n      idToken,\n      audience: process.env.GOOGLE_CLIENT_ID\n    })\n    console.log(\"Ticket: inside\" + ticket)\n    console.log(\"Ticket inside after \")\n  } catch (error) {\n    console.log(error)\n  }\n\n  console.log(\"Ticket: Outside\" + ticket)\n  console.log(\"Ticket after Outside\")\n\n\n\n\n  const { name, picture, email } = ticket.getPayload();\n\n  let user = await prisma.user.findUnique({\n    where: {\n      email\n    }\n  })\n\n  if (!user) {\n    console.log(\"New user created\")\n    user = await prisma.user.create({\n      data: {\n        email,\n        username: name,\n        avatar: picture\n      }\n    })\n  }\n\n  const tokenPlayload = { id: user.id }\n  const token = jwt.sign(tokenPlayload, process.env.JWT_SECRET, {\n    expiresIn: process.env.JWT_EXPIRE\n  })\n  console.log(token)\n  res.cookie(\"token\", token, { httpOnly: true })\n  res.status(200).send(token)\n}\n\nasync function me(req, res) {\n  const subscribtions = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      }\n    }\n  })\n  const channelIds = subscribtions.map(sub => sub.subscribedToId)\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        in: channelIds,\n      },\n\n    }\n  })\n\n  const user = req.user;\n  user.channels = channels\n\n  res.status(200).json({ user });\n}\n\nfunction signout(req, res) {\n  res.clearCookie('token')\n  res.status(200).json({})\n}\n\nexport { getAuthRoutes };"
      ]
    },
    "sourceType": "script",
    "mtime": 1637577754296
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUserRoutes = getUserRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _client = require(\"@prisma/client\");\n\nvar _authorization = require(\"../middleware/authorization\");\n\nvar _video = require(\"./video\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst prisma = new _client.PrismaClient();\n\nfunction getUserRoutes() {\n  const router = _express.default.Router();\n\n  router.get('/', _authorization.protect, getRecommendedChannels);\n  router.put('/', _authorization.protect, editUser);\n  router.get('/liked-videos', _authorization.protect, getLikedVideos);\n  router.get('/history', _authorization.protect, getHistory);\n  router.get('/subscriptions', _authorization.protect, getFeed);\n  router.get('/search', _authorization.getAuthUser, searchUser);\n  router.get('/:userId', _authorization.getAuthUser, getProfile);\n  router.get('/:userId/toggle-subscribe', _authorization.protect, toggleSubscribe);\n  return router;\n}\n\nasync function getLikedVideos(req, res) {\n  await getVideos(prisma.videoLike, req, res);\n}\n\nasync function getHistory(req, res, next) {\n  await getVideos(prisma.view, req, res);\n}\n\nasync function getVideos(model, req, res) {\n  const videoRelations = await model.findMany({\n    where: {\n      userId: req.user.id\n    },\n    orderBy: {\n      createdAt: 'desc'\n    }\n  });\n  const VideoIds = videoRelations.map(videoLike => videoLike.videoId);\n  let videos = await prisma.video.findMany({\n    where: {\n      id: {\n        in: VideoIds\n      }\n    },\n    include: {\n      user: true\n    }\n  });\n  console.log(\"Befor if check\", videos);\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await (0, _video.getVideoViews)(videos);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function toggleSubscribe(req, res, next) {\n  if (req.user.id === req.params.userId) {\n    return next({\n      message: \"You can`t subscribe to your own channel\",\n      statusCode: 400\n    });\n  }\n\n  const user = await prisma.user.findUnique({\n    where: {\n      id: req.params.userId\n    }\n  });\n\n  if (!user) {\n    return next({\n      message: \"User with this Id doesn`t excist\",\n      statusCode: 404\n    });\n  }\n\n  const isSubscribed = await prisma.subscription.findFirst({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      },\n      subscribedToId: {\n        equals: req.params.userId\n      }\n    }\n  });\n\n  if (isSubscribed) {\n    await prisma.subscription.delete({\n      where: {\n        id: isSubscribed.id\n      }\n    });\n  } else {\n    await prisma.subscription.create({\n      data: {\n        subscriber: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        subscribedTo: {\n          connect: {\n            id: req.params.userId\n          }\n        }\n      }\n    });\n  }\n\n  res.status(200).json({});\n}\n\nasync function getFeed(req, res) {\n  const subscribedTo = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      }\n    }\n  });\n  const subscribtions = subscribedTo.map(sub => sub.subscribedToId);\n  const feed = await prisma.video.findMany({\n    where: {\n      userId: {\n        in: subscribtions\n      }\n    },\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n\n  if (!feed.length) {\n    console.log(\"inside\");\n    return res.status(200).json({\n      feed\n    });\n  }\n\n  const feedVideos = await (0, _video.getVideoViews)(feed);\n  console.log(\"outside\");\n  res.status(200).json({\n    feed: feedVideos\n  });\n}\n\nasync function searchUser(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      message: \"Please enter search query\",\n      statusCode: 400\n    });\n  }\n\n  const users = await prisma.user.findMany({\n    where: {\n      username: {\n        contains: req.query.query,\n        mode: \"insensitive\"\n      }\n    }\n  });\n\n  if (!users.length) {\n    return res.status(200).json({\n      users\n    });\n  }\n\n  for (const user of users) {\n    const subscribersCount = await prisma.subscription.count({\n      where: {\n        subscribedToId: {\n          equals: user.id\n        }\n      }\n    });\n    const videoCount = await prisma.video.count({\n      where: {\n        userId: user.id\n      }\n    });\n    let isMe = false;\n    let isSubscribed = false;\n\n    if (req.user) {\n      isMe = req.user.id === user.id;\n      isSubscribed = await prisma.subscription.findFirst({\n        where: {\n          AND: {\n            subscriberId: {\n              equals: req.user.id\n            },\n            subscribedToId: {\n              equals: user.id\n            }\n          }\n        }\n      });\n    }\n\n    user.subscribersCount = subscribersCount;\n    user.videoCount = videoCount;\n    user.isSubscribed = Boolean(isSubscribed);\n    user.isMe = isMe;\n  }\n\n  res.status(200).json({\n    users\n  });\n}\n\nasync function getRecommendedChannels(req, res) {\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        not: req.user.id\n      }\n    },\n    take: 10\n  });\n\n  if (!channels.length) {\n    return res.status(200).json({\n      channels\n    });\n  }\n\n  for (const channel of channels) {\n    const subscribersCount = await prisma.subscription.count({\n      where: {\n        subscribedToId: {\n          equals: channel.id\n        }\n      }\n    });\n    const videoCount = await prisma.video.count({\n      where: {\n        userId: channel.id\n      }\n    });\n    const isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        AND: {\n          subscriberId: {\n            equals: req.user.id\n          },\n          subscribedToId: {\n            equals: channel.id\n          }\n        }\n      }\n    });\n    channel.subscribersCount = subscribersCount;\n    channel.videoCount = videoCount;\n    channel.isSubscribed = Boolean(isSubscribed);\n  }\n\n  return res.status(200).json({\n    channels\n  });\n}\n\nasync function getProfile(req, res, next) {\n  const user = await prisma.user.findUnique({\n    where: {\n      id: req.params.userId\n    }\n  });\n\n  if (!user) {\n    return next({\n      message: `No user found with id: ${req.params.userId}`,\n      statusCode: 404\n    });\n  }\n\n  const subscribersCount = await prisma.subscription.count({\n    where: {\n      subscribedToId: {\n        equals: user.id\n      }\n    }\n  });\n  let isMe = false;\n  let isSubscribed = false;\n\n  if (req.user) {\n    isMe = req.user.id === user.id;\n    isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        AND: {\n          subscriberId: {\n            equals: req.user.id\n          },\n          subscribedToId: {\n            equals: user.id\n          }\n        }\n      }\n    });\n  }\n\n  const subscribedTo = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: user.id\n      }\n    }\n  });\n  const subscribtions = subscribedTo.map(sub => sub.subscribedToId);\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        in: subscribtions\n      }\n    }\n  });\n\n  for (const channel of channels) {\n    const subscribersCount = await prisma.subscribtion.count({\n      where: {\n        subscribedToId: {\n          equals: channel.id\n        }\n      }\n    });\n    channel.subscribersCount = subscribersCount;\n  }\n\n  const videos = await prisma.video.findMany({\n    where: {\n      userId: {\n        equals: user.id\n      }\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n  user.subscribtionCount = subscribersCount;\n  user.isSubscribed = Boolean(isSubscribed);\n  user.isMe = isMe;\n  user.channels = channels;\n  user.videos = videos;\n\n  if (!videos.length) {\n    return res.status(200).json({\n      user\n    });\n  }\n\n  user.videos = await (0, _video.getVideoViews)(videos);\n  res.status(200).json({\n    user\n  });\n}\n\nasync function editUser(req, res) {\n  const {\n    username,\n    cover,\n    avatar,\n    about\n  } = req.body;\n  const user = await prisma.user.update({\n    where: {\n      id: req.user.id\n    },\n    data: {\n      username,\n      cover,\n      avatar,\n      about\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsicHJpc21hIiwiUHJpc21hQ2xpZW50IiwiZ2V0VXNlclJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJwcm90ZWN0IiwiZ2V0UmVjb21tZW5kZWRDaGFubmVscyIsInB1dCIsImVkaXRVc2VyIiwiZ2V0TGlrZWRWaWRlb3MiLCJnZXRIaXN0b3J5IiwiZ2V0RmVlZCIsImdldEF1dGhVc2VyIiwic2VhcmNoVXNlciIsImdldFByb2ZpbGUiLCJ0b2dnbGVTdWJzY3JpYmUiLCJyZXEiLCJyZXMiLCJnZXRWaWRlb3MiLCJ2aWRlb0xpa2UiLCJuZXh0IiwidmlldyIsIm1vZGVsIiwidmlkZW9SZWxhdGlvbnMiLCJmaW5kTWFueSIsIndoZXJlIiwidXNlcklkIiwidXNlciIsImlkIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsIlZpZGVvSWRzIiwibWFwIiwidmlkZW9JZCIsInZpZGVvcyIsInZpZGVvIiwiaW4iLCJpbmNsdWRlIiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsInN0YXR1cyIsImpzb24iLCJwYXJhbXMiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSIsImZpbmRVbmlxdWUiLCJpc1N1YnNjcmliZWQiLCJzdWJzY3JpcHRpb24iLCJmaW5kRmlyc3QiLCJzdWJzY3JpYmVySWQiLCJlcXVhbHMiLCJzdWJzY3JpYmVkVG9JZCIsImRlbGV0ZSIsImNyZWF0ZSIsImRhdGEiLCJzdWJzY3JpYmVyIiwiY29ubmVjdCIsInN1YnNjcmliZWRUbyIsInN1YnNjcmlidGlvbnMiLCJzdWIiLCJmZWVkIiwiZmVlZFZpZGVvcyIsInF1ZXJ5IiwidXNlcnMiLCJ1c2VybmFtZSIsImNvbnRhaW5zIiwibW9kZSIsInN1YnNjcmliZXJzQ291bnQiLCJjb3VudCIsInZpZGVvQ291bnQiLCJpc01lIiwiQU5EIiwiQm9vbGVhbiIsImNoYW5uZWxzIiwibm90IiwidGFrZSIsImNoYW5uZWwiLCJzdWJzY3JpYnRpb24iLCJzdWJz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QUEsTUFISTtBQUlKQyxNQUFBQTtBQUpJO0FBSjhCLEdBQW5CLENBQW5CO0FBYUQiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuaW1wb3J0IHsgZ2V0QXV0aFVzZXIsIHByb3RlY3QgfSBmcm9tIFwiLi4vbWlkZGxld2FyZS9hdXRob3JpemF0aW9uXCI7XG5pbXBvcnQgeyBnZXRWaWRlb1ZpZXdzIH0gZnJvbSBcIi4vdmlkZW9cIlxuXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XG5cbmZ1bmN0aW9uIGdldFVzZXJSb3V0ZXMoKSB7XG4gIGNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbiAgcm91dGVyLmdldCgnLycsIHByb3RlY3QsIGdldFJlY29tbWVuZGVkQ2hhbm5lbHMpXG4gIHJvdXRlci5wdXQoJy8nLCBwcm90ZWN0LCBlZGl0VXNlcilcblxuICByb3V0ZXIuZ2V0KCcvbGlrZWQtdmlkZW9zJywgcHJvdGVjdCwgZ2V0TGlrZWRWaWRlb3MpXG4gIHJvdXRlci5nZXQoJy9oaXN0b3J5JywgcHJvdGVjdCwgZ2V0SGlzdG9yeSlcbiAgcm91dGVyLmdldCgnL3N1YnNjcmlwdGlvbnMnLCBwcm90ZWN0LCBnZXRGZWVkKVxuICByb3V0ZXIuZ2V0KCcvc2VhcmNoJywgZ2V0QXV0aFVzZXIsIHNlYXJjaFVzZXIpXG5cbiAgcm91dGVyLmdldCgnLzp1c2VySWQnLCBnZXRBdXRoVXNlciwgZ2V0UHJvZmlsZSlcbiAgcm91dGVyLmdldCgnLzp1c2VySWQvdG9nZ2xlLXN1YnNjcmliZScsIHByb3RlY3QsIHRvZ2dsZVN1YnNjcmliZSlcblxuICByZXR1cm4gcm91dGVyO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRMaWtlZFZpZGVvcyhyZXEsIHJlcykge1xuICBhd2FpdCBnZXRWaWRlb3MocHJpc21hLnZpZGVvTGlrZSwgcmVxLCByZXMpXG59XG5hc3luYyBmdW5jdGlvbiBnZXRIaXN0b3J5KHJlcSwgcmVzLCBuZXh0KSB7XG4gIGF3YWl0IGdldFZpZGVvcyhwcmlzbWEudmlldywgcmVxLCByZXMpXG5cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0VmlkZW9zKG1vZGVsLCByZXEsIHJlcykge1xuICBjb25zdCB2aWRlb1JlbGF0aW9ucyA9IGF3YWl0IG1vZGVsLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiByZXEudXNlci5pZFxuICAgIH0sXG4gICAgb3JkZXJCeToge1xuICAgICAgY3JlYXRlZEF0OiAnZGVzYydcbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgVmlkZW9JZHMgPSB2aWRlb1JlbGF0aW9ucy5tYXAoKHZpZGVvTGlrZSkgPT4gdmlkZW9MaWtlLnZpZGVvSWQpXG5cbiAgbGV0IHZpZGVvcyA9IGF3YWl0IHByaXNtYS52aWRlby5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiB7XG4gICAgICAgIGluOiBWaWRlb0lkc1xuICAgICAgfVxuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgdXNlcjogdHJ1ZVxuICAgIH1cbiAgfSlcbiAgY29uc29sZS5sb2coXCJCZWZvciBpZiBjaGVja1wiLCB2aWRlb3MpXG4gIGlmICghdmlkZW9zLmxlbmd0aCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvcyB9KVxuICB9XG5cbiAgdmlkZW9zID0gYXdhaXQgZ2V0VmlkZW9WaWV3cyh2aWRlb3MpO1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdmlkZW9zIH0pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHRvZ2dsZVN1YnNjcmliZShyZXEsIHJlcywgbmV4dCkge1xuICBpZiAocmVxLnVzZXIuaWQgPT09IHJlcS5wYXJhbXMudXNlcklkKSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogXCJZb3UgY2FuYHQgc3Vic2NyaWJlIHRvIHlvdXIgb3duIGNoYW5uZWxcIixcbiAgICAgIHN0YXR1c0NvZGU6IDQwMFxuICAgIH0pXG4gIH1cblxuICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLnVzZXJJZFxuICAgIH1cbiAgfSlcblxuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIlVzZXIgd2l0aCB0aGlzIElkIGRvZXNuYHQgZXhjaXN0XCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDRcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgaXNTdWJzY3JpYmVkID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7XG4gICAgICBzdWJzY3JpYmVySWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgfSxcbiAgICAgIHN1YnNjcmliZWRUb0lkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy51c2VySWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgaWYgKGlzU3Vic2NyaWJlZCkge1xuICAgIGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uZGVsZXRlKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkOiBpc1N1YnNjcmliZWQuaWRcbiAgICAgIH1cbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgc3Vic2NyaWJlcjoge1xuICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgIGlkOiByZXEudXNlci5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3Vic2NyaWJlZFRvOiB7XG4gICAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgICAgaWQ6IHJlcS5wYXJhbXMudXNlcklkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHt9KVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEZlZWQocmVxLCByZXMpIHtcbiAgY29uc3Qgc3Vic2NyaWJlZFRvID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHN1YnNjcmliZXJJZDoge1xuICAgICAgICBlcXVhbHM6IHJlcS51c2VyLmlkXG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBjb25zdCBzdWJzY3JpYnRpb25zID0gc3Vic2NyaWJlZFRvLm1hcChzdWIgPT4gc3ViLnN1YnNjcmliZWRUb0lkKVxuXG4gIGNvbnN0IGZlZWQgPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICB1c2VySWQ6IHtcbiAgICAgICAgaW46IHN1YnNjcmlidGlvbnNcbiAgICAgIH1cbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXI6IHRydWVcbiAgICB9LFxuICAgIG9yZGVyQnk6IHtcbiAgICAgIGNyZWF0ZWRBdDogXCJkZXNjXCJcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCFmZWVkLmxlbmd0aCkge1xuICAgIGNvbnNvbGUubG9nKFwiaW5zaWRlXCIpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZmVlZCB9KVxuICB9XG5cbiAgY29uc3QgZmVlZFZpZGVvcyA9IGF3YWl0IGdldFZpZGVvVmlld3MoZmVlZClcbiAgY29uc29sZS5sb2coXCJvdXRzaWRlXCIpXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZmVlZDogZmVlZFZpZGVvcyB9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBzZWFyY2hVc2VyKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGlmICghcmVxLnF1ZXJ5LnF1ZXJ5KSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogXCJQbGVhc2UgZW50ZXIgc2VhcmNoIHF1ZXJ5XCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDAsXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IHVzZXJzID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICB1c2VybmFtZToge1xuICAgICAgICBjb250YWluczogcmVxLnF1ZXJ5LnF1ZXJ5LFxuICAgICAgICBtb2RlOiBcImluc2Vuc2l0aXZlXCJcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF1c2Vycy5sZW5ndGgpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VycyB9KVxuICB9XG5cbiAgZm9yIChjb25zdCB1c2VyIG9mIHVzZXJzKSB7XG4gICAgY29uc3Qgc3Vic2NyaWJlcnNDb3VudCA9IGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgc3Vic2NyaWJlZFRvSWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHVzZXIuaWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCB2aWRlb0NvdW50ID0gYXdhaXQgcHJpc21hLnZpZGVvLmNvdW50KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHVzZXJJZDogdXNlci5pZFxuICAgICAgfVxuICAgIH0pXG5cbiAgICBsZXQgaXNNZSA9IGZhbHNlO1xuICAgIGxldCBpc1N1YnNjcmliZWQgPSBmYWxzZTtcblxuICAgIGlmIChyZXEudXNlcikge1xuICAgICAgaXNNZSA9IHJlcS51c2VyLmlkID09PSB1c2VyLmlkO1xuXG4gICAgICBpc1N1YnNjcmliZWQgPSBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgQU5EOiB7XG4gICAgICAgICAgICBzdWJzY3JpYmVySWQ6IHtcbiAgICAgICAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1YnNjcmliZWRUb0lkOiB7XG4gICAgICAgICAgICAgIGVxdWFsczogdXNlci5pZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gICAgdXNlci5zdWJzY3JpYmVyc0NvdW50ID0gc3Vic2NyaWJlcnNDb3VudDtcbiAgICB1c2VyLnZpZGVvQ291bnQgPSB2aWRlb0NvdW50O1xuICAgIHVzZXIuaXNTdWJzY3JpYmVkID0gQm9vbGVhbihpc1N1YnNjcmliZWQpO1xuICAgIHVzZXIuaXNNZSA9IGlzTWU7XG4gIH1cblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVzZXJzIH0pXG5cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVjb21tZW5kZWRDaGFubmVscyhyZXEsIHJlcykge1xuICBjb25zdCBjaGFubmVscyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHtcbiAgICAgICAgbm90OiByZXEudXNlci5pZFxuICAgICAgfVxuICAgIH0sXG4gICAgdGFrZTogMTBcbiAgfSlcblxuICBpZiAoIWNoYW5uZWxzLmxlbmd0aCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGNoYW5uZWxzIH0pXG4gIH1cblxuICBmb3IgKGNvbnN0IGNoYW5uZWwgb2YgY2hhbm5lbHMpIHtcbiAgICBjb25zdCBzdWJzY3JpYmVyc0NvdW50ID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5jb3VudCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBzdWJzY3JpYmVkVG9JZDoge1xuICAgICAgICAgIGVxdWFsczogY2hhbm5lbC5pZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IHZpZGVvQ291bnQgPSBhd2FpdCBwcmlzbWEudmlkZW8uY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdXNlcklkOiBjaGFubmVsLmlkXG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IGlzU3Vic2NyaWJlZCA9IGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIEFORDoge1xuICAgICAgICAgIHN1YnNjcmliZXJJZDoge1xuICAgICAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3Vic2NyaWJlZFRvSWQ6IHtcbiAgICAgICAgICAgIGVxdWFsczogY2hhbm5lbC5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjaGFubmVsLnN1YnNjcmliZXJzQ291bnQgPSBzdWJzY3JpYmVyc0NvdW50O1xuICAgIGNoYW5uZWwudmlkZW9Db3VudCA9IHZpZGVvQ291bnQ7XG4gICAgY2hhbm5lbC5pc1N1YnNjcmliZWQgPSBCb29sZWFuKGlzU3Vic2NyaWJlZCk7XG4gIH1cblxuICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBjaGFubmVscyB9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRQcm9maWxlKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS5wYXJhbXMudXNlcklkXG4gICAgfVxuICB9KVxuXG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiBuZXh0KHtcbiAgICAgIG1lc3NhZ2U6IGBObyB1c2VyIGZvdW5kIHdpdGggaWQ6ICR7cmVxLnBhcmFtcy51c2VySWR9YCxcbiAgICAgIHN0YXR1c0NvZGU6IDQwNCxcbiAgICB9KVxuICB9XG5cbiAgY29uc3Qgc3Vic2NyaWJlcnNDb3VudCA9IGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uY291bnQoe1xuICAgIHdoZXJlOiB7XG4gICAgICBzdWJzY3JpYmVkVG9JZDoge1xuICAgICAgICBlcXVhbHM6IHVzZXIuaWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgbGV0IGlzTWUgPSBmYWxzZVxuICBsZXQgaXNTdWJzY3JpYmVkID0gZmFsc2VcblxuICBpZiAocmVxLnVzZXIpIHtcbiAgICBpc01lID0gcmVxLnVzZXIuaWQgPT09IHVzZXIuaWQ7XG5cbiAgICBpc1N1YnNjcmliZWQgPSBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBBTkQ6IHtcbiAgICAgICAgICBzdWJzY3JpYmVySWQ6IHtcbiAgICAgICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdWJzY3JpYmVkVG9JZDoge1xuICAgICAgICAgICAgZXF1YWxzOiB1c2VyLmlkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IHN1YnNjcmliZWRUbyA9IGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBzdWJzY3JpYmVySWQ6IHtcbiAgICAgICAgZXF1YWxzOiB1c2VyLmlkLFxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCBzdWJzY3JpYnRpb25zID0gc3Vic2NyaWJlZFRvLm1hcCgoc3ViKSA9PiBzdWIuc3Vic2NyaWJlZFRvSWQpO1xuXG4gIGNvbnN0IGNoYW5uZWxzID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDoge1xuICAgICAgICBpbjogc3Vic2NyaWJ0aW9uc1xuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBmb3IgKGNvbnN0IGNoYW5uZWwgb2YgY2hhbm5lbHMpIHtcbiAgICBjb25zdCBzdWJzY3JpYmVyc0NvdW50ID0gYXdhaXQgcHJpc21hLnN1YnNjcmlidGlvbi5jb3VudCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBzdWJzY3JpYmVkVG9JZDoge1xuICAgICAgICAgIGVxdWFsczogY2hhbm5lbC5pZCxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgY2hhbm5lbC5zdWJzY3JpYmVyc0NvdW50ID0gc3Vic2NyaWJlcnNDb3VudFxuICB9XG5cbiAgY29uc3QgdmlkZW9zID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiB7XG4gICAgICAgIGVxdWFsczogdXNlci5pZFxuICAgICAgfVxuICAgIH0sXG4gICAgb3JkZXJCeToge1xuICAgICAgY3JlYXRlZEF0OiBcImRlc2NcIlxuICAgIH1cbiAgfSlcblxuICB1c2VyLnN1YnNjcmlidGlvbkNvdW50ID0gc3Vic2NyaWJlcnNDb3VudDtcbiAgdXNlci5pc1N1YnNjcmliZWQgPSBCb29sZWFuKGlzU3Vic2NyaWJlZCk7XG4gIHVzZXIuaXNNZSA9IGlzTWU7XG4gIHVzZXIuY2hhbm5lbHMgPSBjaGFubmVscztcbiAgdXNlci52aWRlb3MgPSB2aWRlb3M7XG5cbiAgaWYgKCF2aWRlb3MubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlciB9KVxuICB9XG5cbiAgdXNlci52aWRlb3MgPSBhd2FpdCBnZXRWaWRlb1ZpZXdzKHZpZGVvcylcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVzZXIgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gZWRpdFVzZXIocmVxLCByZXMpIHtcbiAgY29uc3QgeyB1c2VybmFtZSwgY292ZXIsIGF2YXRhciwgYWJvdXQgfSA9IHJlcS5ib2R5O1xuXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogcmVxLnVzZXIuaWQsXG4gICAgfSxcbiAgICBkYXRhOiB7XG4gICAgICB1c2VybmFtZSxcbiAgICAgIGNvdmVyLFxuICAgICAgYXZhdGFyLFxuICAgICAgYWJvdXQsXG4gICAgfSxcblxuICB9KVxuXG59XG5cbmV4cG9ydCB7IGdldFVzZXJSb3V0ZXMgfTsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getUserRoutes",
        "router",
        "express",
        "Router",
        "get",
        "protect",
        "getRecommendedChannels",
        "put",
        "editUser",
        "getLikedVideos",
        "getHistory",
        "getFeed",
        "getAuthUser",
        "searchUser",
        "getProfile",
        "toggleSubscribe",
        "req",
        "res",
        "getVideos",
        "videoLike",
        "next",
        "view",
        "model",
        "videoRelations",
        "findMany",
        "where",
        "userId",
        "user",
        "id",
        "orderBy",
        "createdAt",
        "VideoIds",
        "map",
        "videoId",
        "videos",
        "video",
        "in",
        "include",
        "console",
        "log",
        "length",
        "status",
        "json",
        "params",
        "message",
        "statusCode",
        "findUnique",
        "isSubscribed",
        "subscription",
        "findFirst",
        "subscriberId",
        "equals",
        "subscribedToId",
        "delete",
        "create",
        "data",
        "subscriber",
        "connect",
        "subscribedTo",
        "subscribtions",
        "sub",
        "feed",
        "feedVideos",
        "query",
        "users",
        "username",
        "contains",
        "mode",
        "subscribersCount",
        "count",
        "videoCount",
        "isMe",
        "AND",
        "Boolean",
        "channels",
        "not",
        "take",
        "channel",
        "subscribtion",
        "subscribtionCount",
        "cover",
        "avatar",
        "about",
        "body",
        "update"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\nimport { PrismaClient } from \"@prisma/client\";\n\nimport { getAuthUser, protect } from \"../middleware/authorization\";\nimport { getVideoViews } from \"./video\"\n\nconst prisma = new PrismaClient();\n\nfunction getUserRoutes() {\n  const router = express.Router();\n\n  router.get('/', protect, getRecommendedChannels)\n  router.put('/', protect, editUser)\n\n  router.get('/liked-videos', protect, getLikedVideos)\n  router.get('/history', protect, getHistory)\n  router.get('/subscriptions', protect, getFeed)\n  router.get('/search', getAuthUser, searchUser)\n\n  router.get('/:userId', getAuthUser, getProfile)\n  router.get('/:userId/toggle-subscribe', protect, toggleSubscribe)\n\n  return router;\n}\n\nasync function getLikedVideos(req, res) {\n  await getVideos(prisma.videoLike, req, res)\n}\nasync function getHistory(req, res, next) {\n  await getVideos(prisma.view, req, res)\n\n}\n\nasync function getVideos(model, req, res) {\n  const videoRelations = await model.findMany({\n    where: {\n      userId: req.user.id\n    },\n    orderBy: {\n      createdAt: 'desc'\n    }\n  })\n\n  const VideoIds = videoRelations.map((videoLike) => videoLike.videoId)\n\n  let videos = await prisma.video.findMany({\n    where: {\n      id: {\n        in: VideoIds\n      }\n    },\n    include: {\n      user: true\n    }\n  })\n  console.log(\"Befor if check\", videos)\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n  }\n\n  videos = await getVideoViews(videos);\n\n  res.status(200).json({ videos })\n}\n\nasync function toggleSubscribe(req, res, next) {\n  if (req.user.id === req.params.userId) {\n    return next({\n      message: \"You can`t subscribe to your own channel\",\n      statusCode: 400\n    })\n  }\n\n  const user = await prisma.user.findUnique({\n    where: {\n      id: req.params.userId\n    }\n  })\n\n  if (!user) {\n    return next({\n      message: \"User with this Id doesn`t excist\",\n      statusCode: 404\n    })\n  }\n\n  const isSubscribed = await prisma.subscription.findFirst({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      },\n      subscribedToId: {\n        equals: req.params.userId\n      }\n    }\n  })\n\n  if (isSubscribed) {\n    await prisma.subscription.delete({\n      where: {\n        id: isSubscribed.id\n      }\n    })\n  } else {\n    await prisma.subscription.create({\n      data: {\n        subscriber: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        subscribedTo: {\n          connect: {\n            id: req.params.userId\n          }\n        }\n      }\n    })\n  }\n\n  res.status(200).json({})\n\n}\n\nasync function getFeed(req, res) {\n  const subscribedTo = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      }\n    }\n  });\n\n  const subscribtions = subscribedTo.map(sub => sub.subscribedToId)\n\n  const feed = await prisma.video.findMany({\n    where: {\n      userId: {\n        in: subscribtions\n      }\n    },\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  if (!feed.length) {\n    console.log(\"inside\")\n    return res.status(200).json({ feed })\n  }\n\n  const feedVideos = await getVideoViews(feed)\n  console.log(\"outside\")\n  res.status(200).json({ feed: feedVideos })\n}\n\nasync function searchUser(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      message: \"Please enter search query\",\n      statusCode: 400,\n    })\n  }\n\n  const users = await prisma.user.findMany({\n    where: {\n      username: {\n        contains: req.query.query,\n        mode: \"insensitive\"\n      }\n    }\n  })\n\n  if (!users.length) {\n    return res.status(200).json({ users })\n  }\n\n  for (const user of users) {\n    const subscribersCount = await prisma.subscription.count({\n      where: {\n        subscribedToId: {\n          equals: user.id\n        }\n      }\n    })\n\n    const videoCount = await prisma.video.count({\n      where: {\n        userId: user.id\n      }\n    })\n\n    let isMe = false;\n    let isSubscribed = false;\n\n    if (req.user) {\n      isMe = req.user.id === user.id;\n\n      isSubscribed = await prisma.subscription.findFirst({\n        where: {\n          AND: {\n            subscriberId: {\n              equals: req.user.id\n            },\n            subscribedToId: {\n              equals: user.id\n            }\n          }\n        }\n      })\n    }\n    user.subscribersCount = subscribersCount;\n    user.videoCount = videoCount;\n    user.isSubscribed = Boolean(isSubscribed);\n    user.isMe = isMe;\n  }\n\n  res.status(200).json({ users })\n\n}\n\nasync function getRecommendedChannels(req, res) {\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        not: req.user.id\n      }\n    },\n    take: 10\n  })\n\n  if (!channels.length) {\n    return res.status(200).json({ channels })\n  }\n\n  for (const channel of channels) {\n    const subscribersCount = await prisma.subscription.count({\n      where: {\n        subscribedToId: {\n          equals: channel.id\n        }\n      }\n    })\n\n    const videoCount = await prisma.video.count({\n      where: {\n        userId: channel.id\n      }\n    })\n\n    const isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        AND: {\n          subscriberId: {\n            equals: req.user.id\n          },\n          subscribedToId: {\n            equals: channel.id\n          }\n        }\n      }\n    })\n\n    channel.subscribersCount = subscribersCount;\n    channel.videoCount = videoCount;\n    channel.isSubscribed = Boolean(isSubscribed);\n  }\n\n  return res.status(200).json({ channels })\n}\n\nasync function getProfile(req, res, next) {\n  const user = await prisma.user.findUnique({\n    where: {\n      id: req.params.userId\n    }\n  })\n\n  if (!user) {\n    return next({\n      message: `No user found with id: ${req.params.userId}`,\n      statusCode: 404,\n    })\n  }\n\n  const subscribersCount = await prisma.subscription.count({\n    where: {\n      subscribedToId: {\n        equals: user.id\n      }\n    }\n  })\n\n  let isMe = false\n  let isSubscribed = false\n\n  if (req.user) {\n    isMe = req.user.id === user.id;\n\n    isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        AND: {\n          subscriberId: {\n            equals: req.user.id,\n          },\n          subscribedToId: {\n            equals: user.id\n          }\n        }\n      }\n    })\n  }\n\n  const subscribedTo = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: user.id,\n      }\n    }\n  })\n\n  const subscribtions = subscribedTo.map((sub) => sub.subscribedToId);\n\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        in: subscribtions\n      }\n    }\n  })\n\n  for (const channel of channels) {\n    const subscribersCount = await prisma.subscribtion.count({\n      where: {\n        subscribedToId: {\n          equals: channel.id,\n        }\n      }\n    })\n    channel.subscribersCount = subscribersCount\n  }\n\n  const videos = await prisma.video.findMany({\n    where: {\n      userId: {\n        equals: user.id\n      }\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  user.subscribtionCount = subscribersCount;\n  user.isSubscribed = Boolean(isSubscribed);\n  user.isMe = isMe;\n  user.channels = channels;\n  user.videos = videos;\n\n  if (!videos.length) {\n    return res.status(200).json({ user })\n  }\n\n  user.videos = await getVideoViews(videos)\n\n  res.status(200).json({ user })\n}\n\nasync function editUser(req, res) {\n  const { username, cover, avatar, about } = req.body;\n\n  const user = await prisma.user.update({\n    where: {\n      id: req.user.id,\n    },\n    data: {\n      username,\n      cover,\n      avatar,\n      about,\n    },\n\n  })\n\n}\n\nexport { getUserRoutes };"
      ]
    },
    "sourceType": "script",
    "mtime": 1635171317798
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "video.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getVideoRoutes = getVideoRoutes;\nexports.getVideoViews = getVideoViews;\n\nvar _express = _interopRequireWildcard(require(\"express\"));\n\nvar _client = require(\"@prisma/client\");\n\nvar _authorization = require(\"../middleware/authorization\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst prisma = new _client.PrismaClient();\n\nfunction getVideoRoutes() {\n  const router = _express.default.Router();\n\n  router.get('/', getRecommendedVideos);\n  router.post('/', _authorization.protect, addVideo);\n  router.get('/trending', getTrendingVideos);\n  router.get('/search', searchVideos);\n  router.get('/:videoId', _authorization.getAuthUser, getVideo);\n  router.get('/:videoId', _authorization.getAuthUser, addVideoView);\n  router.get('/:videoId/like', _authorization.protect, likeVideo);\n  router.get('/:videoId/dislike', _authorization.protect, dislikeVideo);\n  router.post('/:videoId/comment', _authorization.protect, addComment);\n  router.delete('/:videoId/delete', _authorization.protect, deleteVideo);\n  router.delete('/:videoId/comment/:commentId', _authorization.protect, deleteComment);\n  return router;\n}\n\nasync function getVideoViews(videos) {\n  for (const video of videos) {\n    const views = await prisma.view.count({\n      where: {\n        videoId: {\n          equals: video.id\n        }\n      }\n    });\n    video.views = views;\n  }\n\n  return videos;\n}\n\nasync function getRecommendedVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await getVideoViews(videos);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function getTrendingVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await getVideoViews(videos);\n  videos.sort((a, b) => b.views - a.views);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function searchVideos(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      statusCode: 400,\n      message: \"You haven`t entered the serachasd fasdf afgnkdcvbrjnbfjtbg\"\n    });\n  }\n\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    where: {\n      OR: [{\n        title: {\n          contains: req.query.query,\n          mode: \"insensitive\"\n        }\n      }, {\n        description: {\n          contains: req.query.query,\n          mode: \"insensitive\"\n        }\n      }]\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await getVideoViews(videos);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function addVideo(req, res) {\n  const {\n    title,\n    description,\n    url,\n    thumbnail\n  } = req.body;\n  const video = await prisma.video.create({\n    data: {\n      title,\n      description,\n      url,\n      thumbnail,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      }\n    }\n  });\n  res.status(200).json({\n    video\n  });\n}\n\nasync function addComment(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} doesn't exist`,\n      statusCode: 404\n    });\n  }\n\n  const comment = await prisma.comment.create({\n    data: {\n      text: req.body.text,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      },\n      video: {\n        connect: {\n          id: req.params.videoId\n        }\n      }\n    }\n  });\n  res.status(200).json({\n    comment\n  });\n}\n\nasync function deleteComment(req, res) {\n  const comment = await prisma.comment.findUnique({\n    where: {\n      id: req.params.commentId\n    },\n    select: {\n      userId: true\n    }\n  });\n\n  if (comment.userId !== req.user.id) {\n    return res.status(401).send(\"You are not authorised to delete this comment\");\n  }\n\n  await prisma.comment.delete({\n    where: {\n      id: req.params.commentId\n    }\n  });\n  res.status(200).json({}).send();\n}\n\nasync function addVideoView(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} id doesn't exist`,\n      statusCode: 404\n    });\n  }\n\n  if (req.user) {\n    await prisma.view.create({\n      data: {\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        }\n      }\n    });\n  } else {\n    await prisma.view.create({\n      data: {\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        }\n      }\n    });\n  }\n\n  res.status(200).json({});\n}\n\nasync function likeVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    });\n  }\n\n  const isLiked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: 1\n      }\n    }\n  });\n  const isDisliked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: -1\n      }\n    }\n  });\n\n  if (isLiked) {\n    await prisma.videoLike.delete({\n      where: {\n        id: isLiked.id\n      }\n    });\n  } else if (isDisliked) {\n    await prisma.videoLike.update({\n      where: {\n        id: isDisliked.id\n      },\n      data: {\n        like: 1\n      }\n    });\n  } else {\n    await prisma.videoLike.create({\n      data: {\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        like: 1\n      }\n    });\n  }\n\n  res.status(200).json({});\n}\n\nasync function dislikeVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    });\n  }\n\n  const isLiked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: 1\n      }\n    }\n  });\n  const isDisliked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: -1\n      }\n    }\n  });\n\n  if (isDisliked) {\n    await prisma.videoLike.delete({\n      where: {\n        id: isDisliked.id\n      }\n    });\n  } else if (isLiked) {\n    await prisma.videoLike.update({\n      where: {\n        id: isLiked.id\n      },\n      data: {\n        like: -1\n      }\n    });\n  } else {\n    await prisma.videoLike.create({\n      data: {\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        like: -1\n      }\n    });\n  }\n\n  res.status(200).json({});\n}\n\nasync function getVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    },\n    include: {\n      user: true,\n      comments: {\n        include: {\n          user: true\n        },\n        orderBy: {\n          createdAt: \"desc\"\n        }\n      }\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: `Video with Id: \"${req.params.videoId}\" not found`,\n      statusCode: 404\n    });\n  }\n\n  let isVideoMine = false;\n  let isLiked = false;\n  let isDisliked = false;\n  let isSubscribed = false;\n  let isViewed = false;\n\n  if (req.user) {\n    isVideoMine = req.user.id === video.userId;\n    isLiked = await prisma.videoLike.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: 1\n        }\n      }\n    });\n    isDisliked = await prisma.videoLike.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: -1\n        }\n      }\n    });\n    isViewed = prisma.view.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        }\n      }\n    });\n    isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        subscriberId: {\n          equals: req.user.id\n        },\n        subscribedToId: {\n          equals: video.userId\n        }\n      }\n    });\n  }\n\n  const likesCount = await prisma.videoLike.count({\n    where: {\n      AND: {\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: 1\n        }\n      }\n    }\n  });\n  const dislikesCount = await prisma.videoLike.count({\n    where: {\n      AND: {\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: -1\n        }\n      }\n    }\n  });\n  const views = await prisma.view.count({\n    where: {\n      videoId: {\n        equals: video.id\n      }\n    }\n  });\n  const subscribersCount = await prisma.subscription.count({\n    where: {\n      subscribedToId: {\n        equals: video.userId\n      }\n    }\n  });\n  video.commentsCount = video.comments.length;\n  video.isLiked = Boolean(isLiked);\n  video.isDisliked = Boolean(isDisliked);\n  video.likesCount = likesCount;\n  video.views = views;\n  video.dislikesCount = dislikesCount;\n  video.isVideoMine = isVideoMine;\n  video.isSubscribed = Boolean(isSubscribed);\n  video.isViewed = Boolean(isViewed);\n  video.subscribersCount = subscribersCount;\n  res.status(200).json({\n    video\n  });\n}\n\nasync function deleteVideo(req, res) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    },\n    select: {\n      userId: true\n    }\n  });\n\n  if (req.user.id !== video.userId) {\n    return res.status(401).send('You are not authorizd to delete this video');\n  }\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    });\n  }\n\n  await prisma.view.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  });\n  await prisma.comment.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  });\n  await prisma.videoLike.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  });\n  await prisma.video.delete({\n    where: {\n      id: req.params.videoId\n    }\n  });\n  res.status(200).json({});\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvLmpzIl0sIm5hbWVzIjpbInByaXNtYSIsIlByaXNtYUNsaWVudCIsImdldFZpZGVvUm91dGVzIiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImdldFJlY29tbWVuZGVkVmlkZW9zIiwicG9zdCIsInByb3RlY3QiLCJhZGRWaWRlbyIsImdldFRyZW5kaW5nVmlkZW9zIiwic2VhcmNoVmlkZW9zIiwiZ2V0QXV0aFVzZXIiLCJnZXRWaWRlbyIsImFkZFZpZGVvVmlldyIsImxpa2VWaWRlbyIsImRpc2xpa2VWaWRlbyIsImFkZENvbW1lbnQiLCJkZWxldGUiLCJkZWxldGVWaWRlbyIsImRlbGV0ZUNvbW1lbnQiLCJnZXRWaWRlb1ZpZXdzIiwidmlkZW9zIiwidmlkZW8iLCJ2aWV3cyIsInZpZXciLCJjb3VudCIsIndoZXJlIiwidmlkZW9JZCIsImVxdWFscyIsImlkIiwicmVxIiwicmVzIiwiZmluZE1hbnkiLCJpbmNsdWRlIiwidXNlciIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJsZW5ndGgiLCJzdGF0dXMiLCJqc29uIiwic29ydCIsImEiLCJiIiwibmV4dCIsInF1ZXJ5Iiwic3RhdHVzQ29kZSIsIm1lc3NhZ2UiLCJPUiIsInRpdGxlIiwiY29udGFpbnMiLCJtb2RlIiwiZGVzY3JpcHRpb24iLCJ1cmwiLCJ0aHVtYm5haWwiLCJib2R5IiwiY3JlYXRlIiwiZGF0YSIsImNvbm5lY3QiLCJmaW5kVW5pcXVlIiwicGFyYW1zIiwiY29tbWVudCIsInRleHQiLCJjb21tZW50SWQiLCJzZWxlY3QiLCJ1c2VySWQiLCJzZW5kIiwiaXNMaWtlZCIsInZpZGVvTGlrZSIsImZpbmRGaXJzdCIsImxpa2UiLCJpc0Rpc2xpa2VkIiwidXBkYXRlIiwiY29tbWVudHMiLCJpc1ZpZGVvTWluZSIsImlzU3Vic2NyaWJlZCIsImlzVmlld2VkIiwic3Vic2NyaXB0aW9uIiwic3Vic2NyaWJlcklkIiwic3Vic2NyaWJlZFRvSWQiLCJsaWtlc0NvdW50IiwiQU5EIiwiZGlzbGlrZXNDb3VudCIsInN1YnNjcmliZXJzQ291bnQiLCJjb21tZW50c0NvdW50IiwiQm9vbGVhbiIsImRlbGV0ZU1hbnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFJQyxvQkFBSixFQUFmOztBQUVBLFNBQVNDLGNBQVQsR0FBMEI7QUFDeEIsUUFBTUMsTUFBTSxHQUFHQyxpQkFBUUMsTUFBUixFQUFmOztBQUVBRixFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxHQUFYLEVBQWdCQyxvQkFBaEI7QUFDQUosRUFBQUEsTUFBTSxDQUFDSyxJQUFQLENBQVksR0FBWixFQUFpQkMsc0JBQWpCLEVBQTBCQyxRQUExQjtBQUVBUCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxXQUFYLEVBQXdCSyxpQkFBeEI7QUFDQVIsRUFBQUEsTUFBTSxDQUFDRyxHQUFQLENBQVcsU0FBWCxFQUFzQk0sWUFBdEI7QUFFQVQsRUFBQUEsTUFBTSxDQUFDRyxHQUFQLENBQVcsV0FBWCxFQUF3Qk8sMEJBQXhCLEVBQXFDQyxRQUFyQztBQUNBWCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxXQUFYLEVBQXdCTywwQkFBeEIsRUFBcUNFLFlBQXJDO0FBQ0FaLEVBQUFBLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLGdCQUFYLEVBQTZCRyxzQkFBN0IsRUFBc0NPLFNBQXRDO0FBQ0FiLEVBQUFBLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLG1CQUFYLEVBQWdDRyxzQkFBaEMsRUFBeUNRLFlBQXpDO0FBQ0FkLEVBQUFBLE1BQU0sQ0FBQ0ssSUFBUCxDQUFZLG1CQUFaLEVBQWlDQyxzQkFBakMsRUFBMENTLFVBQTFDO0FBQ0FmLEVBQUFBLE1BQU0sQ0FBQ2dCLE1BQVAsQ0FBYyxrQkFBZCxFQUFrQ1Ysc0JBQWxDLEVBQTJDVyxXQUEzQztBQUVBakIsRUFBQUEsTUFBTSxDQUFDZ0IsTUFBUCxDQUFjLDhCQUFkLEVBQThDVixzQkFBOUMsRUFBdURZ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O0FBQ3hCUyxJQUFBQSxLQUFLLEVBQUU7QUFDTEcsTUFBQUEsRUFBRSxFQUFFQyxHQUFHLENBQUM2QixNQUFKLENBQVdoQztBQURWO0FBRGlCLEdBQXBCLENBQU47QUFNQUksRUFBQUEsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsRUFBckI7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9KYXZhU2NyaXB0L3lvdVR1YmUvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MsIHsgcmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCJcbmltcG9ydCB7IGdldEF1dGhVc2VyLCBwcm90ZWN0IH0gZnJvbSBcIi4uL21pZGRsZXdhcmUvYXV0aG9yaXphdGlvblwiO1xuXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KClcblxuZnVuY3Rpb24gZ2V0VmlkZW9Sb3V0ZXMoKSB7XG4gIGNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbiAgcm91dGVyLmdldCgnLycsIGdldFJlY29tbWVuZGVkVmlkZW9zKVxuICByb3V0ZXIucG9zdCgnLycsIHByb3RlY3QsIGFkZFZpZGVvKVxuXG4gIHJvdXRlci5nZXQoJy90cmVuZGluZycsIGdldFRyZW5kaW5nVmlkZW9zKVxuICByb3V0ZXIuZ2V0KCcvc2VhcmNoJywgc2VhcmNoVmlkZW9zKVxuXG4gIHJvdXRlci5nZXQoJy86dmlkZW9JZCcsIGdldEF1dGhVc2VyLCBnZXRWaWRlbylcbiAgcm91dGVyLmdldCgnLzp2aWRlb0lkJywgZ2V0QXV0aFVzZXIsIGFkZFZpZGVvVmlldylcbiAgcm91dGVyLmdldCgnLzp2aWRlb0lkL2xpa2UnLCBwcm90ZWN0LCBsaWtlVmlkZW8pXG4gIHJvdXRlci5nZXQoJy86dmlkZW9JZC9kaXNsaWtlJywgcHJvdGVjdCwgZGlzbGlrZVZpZGVvKVxuICByb3V0ZXIucG9zdCgnLzp2aWRlb0lkL2NvbW1lbnQnLCBwcm90ZWN0LCBhZGRDb21tZW50KVxuICByb3V0ZXIuZGVsZXRlKCcvOnZpZGVvSWQvZGVsZXRlJywgcHJvdGVjdCwgZGVsZXRlVmlkZW8pXG5cbiAgcm91dGVyLmRlbGV0ZSgnLzp2aWRlb0lkL2NvbW1lbnQvOmNvbW1lbnRJZCcsIHByb3RlY3QsIGRlbGV0ZUNvbW1lbnQpXG5cbiAgcmV0dXJuIHJvdXRlcjtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0VmlkZW9WaWV3cyh2aWRlb3MpIHtcbiAgZm9yIChjb25zdCB2aWRlbyBvZiB2aWRlb3MpIHtcbiAgICBjb25zdCB2aWV3cyA9IGF3YWl0IHByaXNtYS52aWV3LmNvdW50KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHZpZGVvLmlkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIHZpZGVvLnZpZXdzID0gdmlld3NcbiAgfVxuICByZXR1cm4gdmlkZW9zXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFJlY29tbWVuZGVkVmlkZW9zKHJlcSwgcmVzKSB7XG4gIGxldCB2aWRlb3MgPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZE1hbnkoe1xuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXI6IHRydWVcbiAgICB9LFxuICAgIG9yZGVyQnk6IHtcbiAgICAgIGNyZWF0ZWRBdDogXCJkZXNjXCJcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF2aWRlb3MubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdmlkZW9zIH0pXG5cbiAgfVxuICB2aWRlb3MgPSBhd2FpdCBnZXRWaWRlb1ZpZXdzKHZpZGVvcylcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB2aWRlb3MgfSlcblxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRUcmVuZGluZ1ZpZGVvcyhyZXEsIHJlcykge1xuICBsZXQgdmlkZW9zID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRNYW55KHtcbiAgICBpbmNsdWRlOiB7XG4gICAgICB1c2VyOiB0cnVlXG4gICAgfSxcbiAgICBvcmRlckJ5OiB7XG4gICAgICBjcmVhdGVkQXQ6IFwiZGVzY1wiXG4gICAgfVxuICB9KVxuXG4gIGlmICghdmlkZW9zLmxlbmd0aCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvcyB9KVxuXG4gIH1cbiAgdmlkZW9zID0gYXdhaXQgZ2V0VmlkZW9WaWV3cyh2aWRlb3MpXG4gIHZpZGVvcy5zb3J0KChhLCBiKSA9PiBiLnZpZXdzIC0gYS52aWV3cylcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB2aWRlb3MgfSlcblxufVxuXG5hc3luYyBmdW5jdGlvbiBzZWFyY2hWaWRlb3MocmVxLCByZXMsIG5leHQpIHtcbiAgaWYgKCFyZXEucXVlcnkucXVlcnkpIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBzdGF0dXNDb2RlOiA0MDAsXG4gICAgICBtZXNzYWdlOiBcIllvdSBoYXZlbmB0IGVudGVyZWQgdGhlIHNlcmFjaGFzZCBmYXNkZiBhZmdua2RjdmJyam5iZmp0YmdcIlxuICAgIH0pXG4gIH1cblxuICBsZXQgdmlkZW9zID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRNYW55KHtcbiAgICBpbmNsdWRlOiB7XG4gICAgICB1c2VyOiB0cnVlXG4gICAgfSxcbiAgICB3aGVyZToge1xuICAgICAgT1I6IFtcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICBjb250YWluczogcmVxLnF1ZXJ5LnF1ZXJ5LFxuICAgICAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgIGNvbnRhaW5zOiByZXEucXVlcnkucXVlcnksXG4gICAgICAgICAgICBtb2RlOiBcImluc2Vuc2l0aXZlXCJcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICBdXG4gICAgfVxuICB9KVxuXG4gIGlmICghdmlkZW9zLmxlbmd0aCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvcyB9KVxuXG4gIH1cbiAgdmlkZW9zID0gYXdhaXQgZ2V0VmlkZW9WaWV3cyh2aWRlb3MpXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdmlkZW9zIH0pXG5cbn1cblxuYXN5bmMgZnVuY3Rpb24gYWRkVmlkZW8ocmVxLCByZXMpIHtcbiAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHVybCwgdGh1bWJuYWlsIH0gPSByZXEuYm9keTtcblxuICBjb25zdCB2aWRlbyA9IGF3YWl0IHByaXNtYS52aWRlby5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIHRpdGxlLCBkZXNjcmlwdGlvbiwgdXJsLCB0aHVtYm5haWwsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICBpZDogcmVxLnVzZXIuaWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvIH0pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkZENvbW1lbnQocmVxLCByZXMsIG5leHQpIHtcbiAgY29uc3QgdmlkZW8gPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF2aWRlbykge1xuICAgIHJldHVybiBuZXh0KHtcbiAgICAgIG1lc3NhZ2U6IGBUaGUgdmlkZW8gd2l0aCAke3JlcS5wYXJhbXMudmlkZW9JZH0gZG9lc24ndCBleGlzdGAsXG4gICAgICBzdGF0dXNDb2RlOiA0MDRcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgY29tbWVudCA9IGF3YWl0IHByaXNtYS5jb21tZW50LmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgdGV4dDogcmVxLmJvZHkudGV4dCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgIGlkOiByZXEudXNlci5pZFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdmlkZW86IHtcbiAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGNvbW1lbnQgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ29tbWVudChyZXEsIHJlcykge1xuICBjb25zdCBjb21tZW50ID0gYXdhaXQgcHJpc21hLmNvbW1lbnQuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLmNvbW1lbnRJZFxuICAgIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICB1c2VySWQ6IHRydWVcbiAgICB9XG4gIH0pXG5cbiAgaWYgKGNvbW1lbnQudXNlcklkICE9PSByZXEudXNlci5pZCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZChcIllvdSBhcmUgbm90IGF1dGhvcmlzZWQgdG8gZGVsZXRlIHRoaXMgY29tbWVudFwiKVxuICB9XG5cbiAgYXdhaXQgcHJpc21hLmNvbW1lbnQuZGVsZXRlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS5wYXJhbXMuY29tbWVudElkXG4gICAgfVxuICB9KTtcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7fSkuc2VuZCgpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkZFZpZGVvVmlldyhyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB2aWRlbyA9IGF3YWl0IHByaXNtYS52aWRlby5maW5kVW5pcXVlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgIH1cbiAgfSlcblxuICBpZiAoIXZpZGVvKSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogYFRoZSB2aWRlbyB3aXRoICR7cmVxLnBhcmFtcy52aWRlb0lkfSBpZCBkb2Vzbid0IGV4aXN0YCxcbiAgICAgIHN0YXR1c0NvZGU6IDQwNFxuICAgIH0pXG4gIH1cblxuICBpZiAocmVxLnVzZXIpIHtcbiAgICBhd2FpdCBwcmlzbWEudmlldy5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB2aWRlbzoge1xuICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBjb25uZWN0OiB7XG4gICAgICAgICAgICBpZDogcmVxLnVzZXIuaWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGF3YWl0IHByaXNtYS52aWV3LmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHZpZGVvOiB7XG4gICAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgICAgaWQ6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7fSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlrZVZpZGVvKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHZpZGVvID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgfVxuICB9KVxuXG4gIGlmICghdmlkZW8pIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIlRoZSB2aWRlbyBkb2VzbmB0IGV4aXN0XCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDRcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgaXNMaWtlZCA9IGF3YWl0IHByaXNtYS52aWRlb0xpa2UuZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgIH0sXG4gICAgICB2aWRlb0lkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICB9LFxuICAgICAgbGlrZToge1xuICAgICAgICBlcXVhbHM6IDFcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgaXNEaXNsaWtlZCA9IGF3YWl0IHByaXNtYS52aWRlb0xpa2UuZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgIH0sXG4gICAgICB2aWRlb0lkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICB9LFxuICAgICAgbGlrZToge1xuICAgICAgICBlcXVhbHM6IC0xXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGlmIChpc0xpa2VkKSB7XG4gICAgYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5kZWxldGUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQ6IGlzTGlrZWQuaWRcbiAgICAgIH1cbiAgICB9KVxuICB9IGVsc2UgaWYgKGlzRGlzbGlrZWQpIHtcbiAgICBhd2FpdCBwcmlzbWEudmlkZW9MaWtlLnVwZGF0ZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZDogaXNEaXNsaWtlZC5pZFxuICAgICAgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbGlrZTogMVxuICAgICAgfVxuICAgIH0pXG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgICAgaWQ6IHJlcS51c2VyLmlkXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB2aWRlbzoge1xuICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGxpa2U6IDFcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe30pXG5cbn1cblxuYXN5bmMgZnVuY3Rpb24gZGlzbGlrZVZpZGVvKHJlcSwgcmVzLCBuZXh0KSB7XG5cbiAgY29uc3QgdmlkZW8gPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF2aWRlbykge1xuICAgIHJldHVybiBuZXh0KHtcbiAgICAgIG1lc3NhZ2U6IFwiVGhlIHZpZGVvIGRvZXNuYHQgZXhpc3RcIixcbiAgICAgIHN0YXR1c0NvZGU6IDQwNFxuICAgIH0pXG4gIH1cblxuICBjb25zdCBpc0xpa2VkID0gYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7XG4gICAgICB1c2VySWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgfSxcbiAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgIH0sXG4gICAgICBsaWtlOiB7XG4gICAgICAgIGVxdWFsczogMVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCBpc0Rpc2xpa2VkID0gYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7XG4gICAgICB1c2VySWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgfSxcbiAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgIH0sXG4gICAgICBsaWtlOiB7XG4gICAgICAgIGVxdWFsczogLTFcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgaWYgKGlzRGlzbGlrZWQpIHtcbiAgICBhd2FpdCBwcmlzbWEudmlkZW9MaWtlLmRlbGV0ZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZDogaXNEaXNsaWtlZC5pZFxuICAgICAgfVxuICAgIH0pXG4gIH0gZWxzZSBpZiAoaXNMaWtlZCkge1xuICAgIGF3YWl0IHByaXNtYS52aWRlb0xpa2UudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkOiBpc0xpa2VkLmlkXG4gICAgICB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBsaWtlOiAtMVxuICAgICAgfVxuICAgIH0pXG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgICAgaWQ6IHJlcS51c2VyLmlkXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB2aWRlbzoge1xuICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGxpa2U6IC0xXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHt9KVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFZpZGVvKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHZpZGVvID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICB1c2VyOiB0cnVlLFxuICAgICAgY29tbWVudHM6IHtcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHVzZXI6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgIGNyZWF0ZWRBdDogXCJkZXNjXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBpZiAoIXZpZGVvKSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogYFZpZGVvIHdpdGggSWQ6IFwiJHtyZXEucGFyYW1zLnZpZGVvSWR9XCIgbm90IGZvdW5kYCxcbiAgICAgIHN0YXR1c0NvZGU6IDQwNFxuICAgIH0pXG4gIH1cblxuICBsZXQgaXNWaWRlb01pbmUgPSBmYWxzZTtcbiAgbGV0IGlzTGlrZWQgPSBmYWxzZTtcbiAgbGV0IGlzRGlzbGlrZWQgPSBmYWxzZTtcbiAgbGV0IGlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICBsZXQgaXNWaWV3ZWQgPSBmYWxzZTtcblxuICBpZiAocmVxLnVzZXIpIHtcbiAgICBpc1ZpZGVvTWluZSA9IHJlcS51c2VyLmlkID09PSB2aWRlby51c2VySWQ7XG5cbiAgICBpc0xpa2VkID0gYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdXNlcklkOiB7XG4gICAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgICB9LFxuICAgICAgICB2aWRlb0lkOiB7XG4gICAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgfSxcbiAgICAgICAgbGlrZToge1xuICAgICAgICAgIGVxdWFsczogMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIGlzRGlzbGlrZWQgPSBhd2FpdCBwcmlzbWEudmlkZW9MaWtlLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICB1c2VySWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHJlcS51c2VyLmlkXG4gICAgICAgIH0sXG4gICAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgICAgICB9LFxuICAgICAgICBsaWtlOiB7XG4gICAgICAgICAgZXF1YWxzOiAtMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIGlzVmlld2VkID0gcHJpc21hLnZpZXcuZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHVzZXJJZDoge1xuICAgICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgICAgfSxcbiAgICAgICAgdmlkZW9JZDoge1xuICAgICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaXNTdWJzY3JpYmVkID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgc3Vic2NyaWJlcklkOiB7XG4gICAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgICB9LFxuICAgICAgICBzdWJzY3JpYmVkVG9JZDoge1xuICAgICAgICAgIGVxdWFsczogdmlkZW8udXNlcklkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgY29uc3QgbGlrZXNDb3VudCA9IGF3YWl0IHByaXNtYS52aWRlb0xpa2UuY291bnQoe1xuICAgIHdoZXJlOiB7XG4gICAgICBBTkQ6IHtcbiAgICAgICAgdmlkZW9JZDoge1xuICAgICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICAgIH0sXG4gICAgICAgIGxpa2U6IHtcbiAgICAgICAgICBlcXVhbHM6IDFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCBkaXNsaWtlc0NvdW50ID0gYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5jb3VudCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIEFORDoge1xuICAgICAgICB2aWRlb0lkOiB7XG4gICAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgfSxcbiAgICAgICAgbGlrZToge1xuICAgICAgICAgIGVxdWFsczogLTFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCB2aWV3cyA9IGF3YWl0IHByaXNtYS52aWV3LmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgdmlkZW9JZDoge1xuICAgICAgICBlcXVhbHM6IHZpZGVvLmlkXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IHN1YnNjcmliZXJzQ291bnQgPSBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgc3Vic2NyaWJlZFRvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiB2aWRlby51c2VySWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgdmlkZW8uY29tbWVudHNDb3VudCA9IHZpZGVvLmNvbW1lbnRzLmxlbmd0aDtcbiAgdmlkZW8uaXNMaWtlZCA9IEJvb2xlYW4oaXNMaWtlZCk7XG4gIHZpZGVvLmlzRGlzbGlrZWQgPSBCb29sZWFuKGlzRGlzbGlrZWQpO1xuICB2aWRlby5saWtlc0NvdW50ID0gbGlrZXNDb3VudDtcbiAgdmlkZW8udmlld3MgPSB2aWV3cztcbiAgdmlkZW8uZGlzbGlrZXNDb3VudCA9IGRpc2xpa2VzQ291bnQ7XG4gIHZpZGVvLmlzVmlkZW9NaW5lID0gaXNWaWRlb01pbmU7XG4gIHZpZGVvLmlzU3Vic2NyaWJlZCA9IEJvb2xlYW4oaXNTdWJzY3JpYmVkKTtcbiAgdmlkZW8uaXNWaWV3ZWQgPSBCb29sZWFuKGlzVmlld2VkKTtcbiAgdmlkZW8uc3Vic2NyaWJlcnNDb3VudCA9IHN1YnNjcmliZXJzQ291bnQ7XG5cblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvIH0pXG59XG5cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlVmlkZW8ocmVxLCByZXMpIHtcbiAgY29uc3QgdmlkZW8gPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICB9LFxuICAgIHNlbGVjdDoge1xuICAgICAgdXNlcklkOiB0cnVlXG4gICAgfVxuICB9KVxuXG4gIGlmIChyZXEudXNlci5pZCAhPT0gdmlkZW8udXNlcklkKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5zZW5kKCdZb3UgYXJlIG5vdCBhdXRob3JpemQgdG8gZGVsZXRlIHRoaXMgdmlkZW8nKTtcbiAgfVxuXG4gIGlmICghdmlkZW8pIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIlRoZSB2aWRlbyBkb2VzbmB0IGV4aXN0XCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDRcbiAgICB9KVxuICB9XG5cbiAgYXdhaXQgcHJpc21hLnZpZXcuZGVsZXRlTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgYXdhaXQgcHJpc21hLmNvbW1lbnQuZGVsZXRlTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5kZWxldGVNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgdmlkZW9JZDoge1xuICAgICAgICBlcXVhbHM6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBhd2FpdCBwcmlzbWEudmlkZW8uZGVsZXRlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgIH1cbiAgfSlcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7fSlcbn1cblxuZXhwb3J0IHsgZ2V0VmlkZW9Sb3V0ZXMsIGdldFZpZGVvVmlld3MgfTsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "video.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getVideoRoutes",
        "router",
        "express",
        "Router",
        "get",
        "getRecommendedVideos",
        "post",
        "protect",
        "addVideo",
        "getTrendingVideos",
        "searchVideos",
        "getAuthUser",
        "getVideo",
        "addVideoView",
        "likeVideo",
        "dislikeVideo",
        "addComment",
        "delete",
        "deleteVideo",
        "deleteComment",
        "getVideoViews",
        "videos",
        "video",
        "views",
        "view",
        "count",
        "where",
        "videoId",
        "equals",
        "id",
        "req",
        "res",
        "findMany",
        "include",
        "user",
        "orderBy",
        "createdAt",
        "length",
        "status",
        "json",
        "sort",
        "a",
        "b",
        "next",
        "query",
        "statusCode",
        "message",
        "OR",
        "title",
        "contains",
        "mode",
        "description",
        "url",
        "thumbnail",
        "body",
        "create",
        "data",
        "connect",
        "findUnique",
        "params",
        "comment",
        "text",
        "commentId",
        "select",
        "userId",
        "send",
        "isLiked",
        "videoLike",
        "findFirst",
        "like",
        "isDisliked",
        "update",
        "comments",
        "isVideoMine",
        "isSubscribed",
        "isViewed",
        "subscription",
        "subscriberId",
        "subscribedToId",
        "likesCount",
        "AND",
        "dislikesCount",
        "subscribersCount",
        "commentsCount",
        "Boolean",
        "deleteMany"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express, { response } from \"express\";\nimport { PrismaClient } from \"@prisma/client\"\nimport { getAuthUser, protect } from \"../middleware/authorization\";\n\nconst prisma = new PrismaClient()\n\nfunction getVideoRoutes() {\n  const router = express.Router();\n\n  router.get('/', getRecommendedVideos)\n  router.post('/', protect, addVideo)\n\n  router.get('/trending', getTrendingVideos)\n  router.get('/search', searchVideos)\n\n  router.get('/:videoId', getAuthUser, getVideo)\n  router.get('/:videoId', getAuthUser, addVideoView)\n  router.get('/:videoId/like', protect, likeVideo)\n  router.get('/:videoId/dislike', protect, dislikeVideo)\n  router.post('/:videoId/comment', protect, addComment)\n  router.delete('/:videoId/delete', protect, deleteVideo)\n\n  router.delete('/:videoId/comment/:commentId', protect, deleteComment)\n\n  return router;\n}\n\nasync function getVideoViews(videos) {\n  for (const video of videos) {\n    const views = await prisma.view.count({\n      where: {\n        videoId: {\n          equals: video.id\n        }\n      }\n    })\n    video.views = views\n  }\n  return videos\n}\n\nasync function getRecommendedVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n  videos = await getVideoViews(videos)\n  res.status(200).json({ videos })\n\n}\n\nasync function getTrendingVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n  videos = await getVideoViews(videos)\n  videos.sort((a, b) => b.views - a.views)\n  res.status(200).json({ videos })\n\n}\n\nasync function searchVideos(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      statusCode: 400,\n      message: \"You haven`t entered the serachasd fasdf afgnkdcvbrjnbfjtbg\"\n    })\n  }\n\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    where: {\n      OR: [\n        {\n          title: {\n            contains: req.query.query,\n            mode: \"insensitive\"\n          }\n        },\n        {\n          description: {\n            contains: req.query.query,\n            mode: \"insensitive\"\n          },\n        }\n      ]\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n  videos = await getVideoViews(videos)\n  res.status(200).json({ videos })\n\n}\n\nasync function addVideo(req, res) {\n  const { title, description, url, thumbnail } = req.body;\n\n  const video = await prisma.video.create({\n    data: {\n      title, description, url, thumbnail,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      }\n    }\n  })\n\n  res.status(200).json({ video })\n}\n\nasync function addComment(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} doesn't exist`,\n      statusCode: 404\n    })\n  }\n\n  const comment = await prisma.comment.create({\n    data: {\n      text: req.body.text,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      },\n      video: {\n        connect: {\n          id: req.params.videoId\n        }\n      }\n    }\n  })\n\n  res.status(200).json({ comment })\n}\n\nasync function deleteComment(req, res) {\n  const comment = await prisma.comment.findUnique({\n    where: {\n      id: req.params.commentId\n    },\n    select: {\n      userId: true\n    }\n  })\n\n  if (comment.userId !== req.user.id) {\n    return res.status(401).send(\"You are not authorised to delete this comment\")\n  }\n\n  await prisma.comment.delete({\n    where: {\n      id: req.params.commentId\n    }\n  });\n\n  res.status(200).json({}).send()\n}\n\nasync function addVideoView(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} id doesn't exist`,\n      statusCode: 404\n    })\n  }\n\n  if (req.user) {\n    await prisma.view.create({\n      data: {\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        }\n      }\n    })\n  } else {\n    await prisma.view.create({\n      data: {\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        }\n      }\n    })\n  }\n\n  res.status(200).json({})\n}\n\nasync function likeVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    })\n  }\n\n  const isLiked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: 1\n      }\n    }\n  })\n\n  const isDisliked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: -1\n      }\n    }\n  })\n\n  if (isLiked) {\n    await prisma.videoLike.delete({\n      where: {\n        id: isLiked.id\n      }\n    })\n  } else if (isDisliked) {\n    await prisma.videoLike.update({\n      where: {\n        id: isDisliked.id\n      },\n      data: {\n        like: 1\n      }\n    })\n  } else {\n    await prisma.videoLike.create({\n      data: {\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        like: 1\n      }\n    })\n  }\n\n  res.status(200).json({})\n\n}\n\nasync function dislikeVideo(req, res, next) {\n\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    })\n  }\n\n  const isLiked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: 1\n      }\n    }\n  })\n\n  const isDisliked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: -1\n      }\n    }\n  })\n\n  if (isDisliked) {\n    await prisma.videoLike.delete({\n      where: {\n        id: isDisliked.id\n      }\n    })\n  } else if (isLiked) {\n    await prisma.videoLike.update({\n      where: {\n        id: isLiked.id\n      },\n      data: {\n        like: -1\n      }\n    })\n  } else {\n    await prisma.videoLike.create({\n      data: {\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        like: -1\n      }\n    })\n  }\n\n  res.status(200).json({})\n\n}\n\nasync function getVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    },\n    include: {\n      user: true,\n      comments: {\n        include: {\n          user: true\n        },\n        orderBy: {\n          createdAt: \"desc\"\n        }\n      }\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: `Video with Id: \"${req.params.videoId}\" not found`,\n      statusCode: 404\n    })\n  }\n\n  let isVideoMine = false;\n  let isLiked = false;\n  let isDisliked = false;\n  let isSubscribed = false;\n  let isViewed = false;\n\n  if (req.user) {\n    isVideoMine = req.user.id === video.userId;\n\n    isLiked = await prisma.videoLike.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: 1\n        }\n      }\n    })\n\n    isDisliked = await prisma.videoLike.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: -1\n        }\n      }\n    })\n\n    isViewed = prisma.view.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        }\n      }\n    })\n\n    isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        subscriberId: {\n          equals: req.user.id\n        },\n        subscribedToId: {\n          equals: video.userId\n        }\n      }\n    })\n  }\n\n  const likesCount = await prisma.videoLike.count({\n    where: {\n      AND: {\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: 1\n        }\n      }\n    }\n  })\n\n  const dislikesCount = await prisma.videoLike.count({\n    where: {\n      AND: {\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: -1\n        }\n      }\n    }\n  })\n\n  const views = await prisma.view.count({\n    where: {\n      videoId: {\n        equals: video.id\n      }\n    }\n  })\n\n  const subscribersCount = await prisma.subscription.count({\n    where: {\n      subscribedToId: {\n        equals: video.userId\n      }\n    }\n  })\n\n  video.commentsCount = video.comments.length;\n  video.isLiked = Boolean(isLiked);\n  video.isDisliked = Boolean(isDisliked);\n  video.likesCount = likesCount;\n  video.views = views;\n  video.dislikesCount = dislikesCount;\n  video.isVideoMine = isVideoMine;\n  video.isSubscribed = Boolean(isSubscribed);\n  video.isViewed = Boolean(isViewed);\n  video.subscribersCount = subscribersCount;\n\n\n  res.status(200).json({ video })\n}\n\n\nasync function deleteVideo(req, res) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    },\n    select: {\n      userId: true\n    }\n  })\n\n  if (req.user.id !== video.userId) {\n    return res.status(401).send('You are not authorizd to delete this video');\n  }\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    })\n  }\n\n  await prisma.view.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  })\n\n  await prisma.comment.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  })\n\n  await prisma.videoLike.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  })\n\n  await prisma.video.delete({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  res.status(200).json({})\n}\n\nexport { getVideoRoutes, getVideoViews };"
      ]
    },
    "sourceType": "script",
    "mtime": 1633853746050
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
        "sourceFileName": "error.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.errorMiddleware = errorMiddleware;\nexports.setupCloseOnExit = setupCloseOnExit;\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Middleware that will help us catch generic express-related errors\nfunction errorMiddleware(error, req, res, next) {\n  if (res.headersSent) {\n    next(error);\n  } else {\n    _loglevel.default.error(error);\n\n    res.status(error.statusCode || 500);\n    res.json({\n      message: error.message,\n      ...(process.env.NODE_ENV === \"production\" ? null : {\n        stack: error.stack\n      })\n    });\n  }\n} // This closes the server in the event of an error so\n// that our requests do not hang\n\n\nfunction setupCloseOnExit(server) {\n  async function exitHandler(options = {}) {\n    await server.close().then(() => {\n      _loglevel.default.info(\"Server successfully closed\");\n    }).catch(error => {\n      _loglevel.default.warn(\"Something went wrong closing the server\", error.stack);\n    });\n    if (options.exit) process.exit();\n  } // Do something when app is closing\n\n\n  process.on(\"exit\", exitHandler); // Catches ctrl+c event\n\n  process.on(\"SIGINT\", exitHandler.bind(null, {\n    exit: true\n  })); // Catches \"kill pid\" (for example: nodemon restart)\n\n  process.on(\"SIGUSR1\", exitHandler.bind(null, {\n    exit: true\n  }));\n  process.on(\"SIGUSR2\", exitHandler.bind(null, {\n    exit: true\n  })); // Catches uncaught exceptions\n\n  process.on(\"uncaughtException\", exitHandler.bind(null, {\n    exit: true\n  }));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVycm9yLmpzIl0sIm5hbWVzIjpbImVycm9yTWlkZGxld2FyZSIsImVycm9yIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlcnNTZW50IiwibG9nZ2VyIiwic3RhdHVzIiwic3RhdHVzQ29kZSIsImpzb24iLCJtZXNzYWdlIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic3RhY2siLCJzZXR1cENsb3NlT25FeGl0Iiwic2VydmVyIiwiZXhpdEhhbmRsZXIiLCJvcHRpb25zIiwiY2xvc2UiLCJ0aGVuIiwiaW5mbyIsImNhdGNoIiwid2FybiIsImV4aXQiLCJvbiIsImJpbmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7Ozs7QUFFQTtBQUNBLFNBQVNBLGVBQVQsQ0FBeUJDLEtBQXpCLEVBQWdDQyxHQUFoQyxFQUFxQ0MsR0FBckMsRUFBMENDLElBQTFDLEVBQWdEO0FBQzlDLE1BQUlELEdBQUcsQ0FBQ0UsV0FBUixFQUFxQjtBQUNuQkQsSUFBQUEsSUFBSSxDQUFDSCxLQUFELENBQUo7QUFDRCxHQUZELE1BRU87QUFDTEssc0JBQU9MLEtBQVAsQ0FBYUEsS0FBYjs7QUFDQUUsSUFBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVdOLEtBQUssQ0FBQ08sVUFBTixJQUFvQixHQUEvQjtBQUNBTCxJQUFBQSxHQUFHLENBQUNNLElBQUosQ0FBUztBQUNQQyxNQUFBQSxPQUFPLEVBQUVULEtBQUssQ0FBQ1MsT0FEUjtBQUVQLFVBQUlDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxRQUFaLEtBQXlCLFlBQXpCLEdBQ0EsSUFEQSxHQUVBO0FBQUVDLFFBQUFBLEtBQUssRUFBRWIsS0FBSyxDQUFDYTtBQUFmLE9BRko7QUFGTyxLQUFUO0FBTUQ7QUFDRixDLENBRUQ7QUFDQTs7O0FBQ0EsU0FBU0MsZ0JBQVQsQ0FBMEJDLE1BQTFCLEVBQWtDO0FBQ2hDLGlCQUFlQyxXQUFmLENBQTJCQyxPQUFPLEdBQUcsRUFBckMsRUFBeUM7QUFDdkMsVUFBTUYsTUFBTSxDQUNURyxLQURHLEdBRUhDLElBRkcsQ0FFRSxNQUFNO0FBQ1ZkLHdCQUFPZSxJQUFQLENBQVksNEJBQVo7QUFDRCxLQUpHLEVBS0hDLEtBTEcsQ0FLSXJCLEtBQUQsSUFBVztBQUNoQkssd0JBQU9pQixJQUFQLENBQVkseUNBQVosRUFBdUR0QixLQUFLLENBQUNhLEtBQTdEO0FBQ0QsS0FQRyxDQUFOO0FBUUEsUUFBSUksT0FBTyxDQUFDTSxJQUFaLEVBQWtCYixPQUFPLENBQUNhLElBQVI7QUFDbkIsR0FYK0IsQ0FZaEM7OztBQUNBYixFQUFBQSxPQUFPLENBQUNjLEVBQVIsQ0FBVyxNQUFYLEVBQW1CUixXQUFuQixFQWJnQyxDQWNoQzs7QUFDQU4sRUFBQUEsT0FBTyxDQUFDYyxFQUFSLENBQVcsUUFBWCxFQUFxQlIsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQXJCLEVBZmdDLENBZ0JoQzs7QUFDQWIsRUFBQUEsT0FBTyxDQUFDYyxFQUFSLENBQVcsU0FBWCxFQUFzQlIsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQXRCO0FBQ0FiLEVBQUFBLE9BQU8sQ0FBQ2MsRUFBUixDQUFXLFNBQVgsRUFBc0JSLFdBQVcsQ0FBQ1MsSUFBWixDQUFpQixJQUFqQixFQUF1QjtBQUFFRixJQUFBQSxJQUFJLEVBQUU7QUFBUixHQUF2QixDQUF0QixFQWxCZ0MsQ0FtQmhDOztBQUNBYixFQUFBQSxPQUFPLENBQUNjLEVBQVIsQ0FBVyxtQkFBWCxFQUFnQ1IsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQWhDO0FBQ0QiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvbWlkZGxld2FyZS8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nZ2VyIGZyb20gXCJsb2dsZXZlbFwiO1xuXG4vLyBNaWRkbGV3YXJlIHRoYXQgd2lsbCBoZWxwIHVzIGNhdGNoIGdlbmVyaWMgZXhwcmVzcy1yZWxhdGVkIGVycm9yc1xuZnVuY3Rpb24gZXJyb3JNaWRkbGV3YXJlKGVycm9yLCByZXEsIHJlcywgbmV4dCkge1xuICBpZiAocmVzLmhlYWRlcnNTZW50KSB7XG4gICAgbmV4dChlcnJvcik7XG4gIH0gZWxzZSB7XG4gICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICByZXMuc3RhdHVzKGVycm9yLnN0YXR1c0NvZGUgfHwgNTAwKTtcbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgLi4uKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIlxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiB7IHN0YWNrOiBlcnJvci5zdGFjayB9KSxcbiAgICB9KTtcbiAgfVxufVxuXG4vLyBUaGlzIGNsb3NlcyB0aGUgc2VydmVyIGluIHRoZSBldmVudCBvZiBhbiBlcnJvciBzb1xuLy8gdGhhdCBvdXIgcmVxdWVzdHMgZG8gbm90IGhhbmdcbmZ1bmN0aW9uIHNldHVwQ2xvc2VPbkV4aXQoc2VydmVyKSB7XG4gIGFzeW5jIGZ1bmN0aW9uIGV4aXRIYW5kbGVyKG9wdGlvbnMgPSB7fSkge1xuICAgIGF3YWl0IHNlcnZlclxuICAgICAgLmNsb3NlKClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJTZXJ2ZXIgc3VjY2Vzc2Z1bGx5IGNsb3NlZFwiKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGxvZ2dlci53YXJuKFwiU29tZXRoaW5nIHdlbnQgd3JvbmcgY2xvc2luZyB0aGUgc2VydmVyXCIsIGVycm9yLnN0YWNrKTtcbiAgICAgIH0pO1xuICAgIGlmIChvcHRpb25zLmV4aXQpIHByb2Nlc3MuZXhpdCgpO1xuICB9XG4gIC8vIERvIHNvbWV0aGluZyB3aGVuIGFwcCBpcyBjbG9zaW5nXG4gIHByb2Nlc3Mub24oXCJleGl0XCIsIGV4aXRIYW5kbGVyKTtcbiAgLy8gQ2F0Y2hlcyBjdHJsK2MgZXZlbnRcbiAgcHJvY2Vzcy5vbihcIlNJR0lOVFwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG4gIC8vIENhdGNoZXMgXCJraWxsIHBpZFwiIChmb3IgZXhhbXBsZTogbm9kZW1vbiByZXN0YXJ0KVxuICBwcm9jZXNzLm9uKFwiU0lHVVNSMVwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG4gIHByb2Nlc3Mub24oXCJTSUdVU1IyXCIsIGV4aXRIYW5kbGVyLmJpbmQobnVsbCwgeyBleGl0OiB0cnVlIH0pKTtcbiAgLy8gQ2F0Y2hlcyB1bmNhdWdodCBleGNlcHRpb25zXG4gIHByb2Nlc3Mub24oXCJ1bmNhdWdodEV4Y2VwdGlvblwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG59XG5cbmV4cG9ydCB7IGVycm9yTWlkZGxld2FyZSwgc2V0dXBDbG9zZU9uRXhpdCB9O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "error.js"
      ],
      "names": [
        "errorMiddleware",
        "error",
        "req",
        "res",
        "next",
        "headersSent",
        "logger",
        "status",
        "statusCode",
        "json",
        "message",
        "process",
        "env",
        "NODE_ENV",
        "stack",
        "setupCloseOnExit",
        "server",
        "exitHandler",
        "options",
        "close",
        "then",
        "info",
        "catch",
        "warn",
        "exit",
        "on",
        "bind"
      ],
      "mappings": ";;;;;;;;AAAA;;;;AAEA;AACA,SAASA,eAAT,CAAyBC,KAAzB,EAAgCC,GAAhC,EAAqCC,GAArC,EAA0CC,IAA1C,EAAgD;AAC9C,MAAID,GAAG,CAACE,WAAR,EAAqB;AACnBD,IAAAA,IAAI,CAACH,KAAD,CAAJ;AACD,GAFD,MAEO;AACLK,sBAAOL,KAAP,CAAaA,KAAb;;AACAE,IAAAA,GAAG,CAACI,MAAJ,CAAWN,KAAK,CAACO,UAAN,IAAoB,GAA/B;AACAL,IAAAA,GAAG,CAACM,IAAJ,CAAS;AACPC,MAAAA,OAAO,EAAET,KAAK,CAACS,OADR;AAEP,UAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACA,IADA,GAEA;AAAEC,QAAAA,KAAK,EAAEb,KAAK,CAACa;AAAf,OAFJ;AAFO,KAAT;AAMD;AACF,C,CAED;AACA;;;AACA,SAASC,gBAAT,CAA0BC,MAA1B,EAAkC;AAChC,iBAAeC,WAAf,CAA2BC,OAAO,GAAG,EAArC,EAAyC;AACvC,UAAMF,MAAM,CACTG,KADG,GAEHC,IAFG,CAEE,MAAM;AACVd,wBAAOe,IAAP,CAAY,4BAAZ;AACD,KAJG,EAKHC,KALG,CAKIrB,KAAD,IAAW;AAChBK,wBAAOiB,IAAP,CAAY,yCAAZ,EAAuDtB,KAAK,CAACa,KAA7D;AACD,KAPG,CAAN;AAQA,QAAII,OAAO,CAACM,IAAZ,EAAkBb,OAAO,CAACa,IAAR;AACnB,GAX+B,CAYhC;;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,MAAX,EAAmBR,WAAnB,EAbgC,CAchC;;AACAN,EAAAA,OAAO,CAACc,EAAR,CAAW,QAAX,EAAqBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAArB,EAfgC,CAgBhC;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,SAAX,EAAsBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAtB;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,SAAX,EAAsBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAtB,EAlBgC,CAmBhC;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,mBAAX,EAAgCR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAhC;AACD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "sourcesContent": [
        "import logger from \"loglevel\";\n\n// Middleware that will help us catch generic express-related errors\nfunction errorMiddleware(error, req, res, next) {\n  if (res.headersSent) {\n    next(error);\n  } else {\n    logger.error(error);\n    res.status(error.statusCode || 500);\n    res.json({\n      message: error.message,\n      ...(process.env.NODE_ENV === \"production\"\n        ? null\n        : { stack: error.stack }),\n    });\n  }\n}\n\n// This closes the server in the event of an error so\n// that our requests do not hang\nfunction setupCloseOnExit(server) {\n  async function exitHandler(options = {}) {\n    await server\n      .close()\n      .then(() => {\n        logger.info(\"Server successfully closed\");\n      })\n      .catch((error) => {\n        logger.warn(\"Something went wrong closing the server\", error.stack);\n      });\n    if (options.exit) process.exit();\n  }\n  // Do something when app is closing\n  process.on(\"exit\", exitHandler);\n  // Catches ctrl+c event\n  process.on(\"SIGINT\", exitHandler.bind(null, { exit: true }));\n  // Catches \"kill pid\" (for example: nodemon restart)\n  process.on(\"SIGUSR1\", exitHandler.bind(null, { exit: true }));\n  process.on(\"SIGUSR2\", exitHandler.bind(null, { exit: true }));\n  // Catches uncaught exceptions\n  process.on(\"uncaughtException\", exitHandler.bind(null, { exit: true }));\n}\n\nexport { errorMiddleware, setupCloseOnExit };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
        "sourceFileName": "authorization.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAuthUser = getAuthUser;\nexports.protect = protect;\n\nvar _client = require(\"@prisma/client\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst prisma = new _client.PrismaClient();\n\nasync function getAuthUser(req, res, next) {\n  if (!req.cookies.token) {\n    console.log(\"NullllllllllllLLŁ\");\n    req.user = null;\n    return next();\n  }\n\n  try {\n    const token = req.cookies.token;\n\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n      include: {\n        videos: true\n      }\n    });\n    req.user = user;\n    next();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function protect(req, res, next) {\n  console.log(req.cookies.token);\n\n  if (!req.cookies.token) {\n    return next({\n      message: \"You need to be logled in berfore you can visit! in protect\",\n      statusCode: 401\n    });\n  }\n\n  try {\n    const token = req.cookies.token;\n\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n\n    console.log(decoded);\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      }\n    });\n    req.user = user;\n    next();\n  } catch (error) {\n    next({\n      message: \"You have to be logged in ::: \" + req.cookies.token + error,\n      statusCode: 401\n    });\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcml6YXRpb24uanMiXSwibmFtZXMiOlsicHJpc21hIiwiUHJpc21hQ2xpZW50IiwiZ2V0QXV0aFVzZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiY29va2llcyIsInRva2VuIiwiY29uc29sZSIsImxvZyIsInVzZXIiLCJkZWNvZGVkIiwiand0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsImluY2x1ZGUiLCJ2aWRlb3MiLCJlcnJvciIsInByb3RlY3QiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFJQyxvQkFBSixFQUFmOztBQUVPLGVBQWVDLFdBQWYsQ0FBMkJDLEdBQTNCLEVBQWdDQyxHQUFoQyxFQUFxQ0MsSUFBckMsRUFBMkM7QUFDaEQsTUFBSSxDQUFDRixHQUFHLENBQUNHLE9BQUosQ0FBWUMsS0FBakIsRUFBd0I7QUFDdEJDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLG1CQUFaO0FBQ0FOLElBQUFBLEdBQUcsQ0FBQ08sSUFBSixHQUFXLElBQVg7QUFDQSxXQUFPTCxJQUFJLEVBQVg7QUFDRDs7QUFFRCxNQUFJO0FBQ0YsVUFBTUUsS0FBSyxHQUFHSixHQUFHLENBQUNHLE9BQUosQ0FBWUMsS0FBMUI7O0FBQ0EsVUFBTUksT0FBTyxHQUFHQyxzQkFBSUMsTUFBSixDQUFXTixLQUFYLEVBQWtCTyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUIsQ0FBaEI7O0FBRUEsVUFBTU4sSUFBSSxHQUFHLE1BQU1WLE1BQU0sQ0FBQ1UsSUFBUCxDQUFZTyxVQUFaLENBQXVCO0FBQ3hDQyxNQUFBQSxLQUFLLEVBQUU7QUFDTEMsUUFBQUEsRUFBRSxFQUFFUixPQUFPLENBQUNRO0FBRFAsT0FEaUM7QUFJeENDLE1BQUFBLE9BQU8sRUFBRTtBQUNQQyxRQUFBQSxNQUFNLEVBQUU7QUFERDtBQUorQixLQUF2QixDQUFuQjtBQVNBbEIsSUFBQUEsR0FBRyxDQUFDTyxJQUFKLEdBQVdBLElBQVg7QUFDQUwsSUFBQUEsSUFBSTtBQUNMLEdBZkQsQ0FlRSxPQUFPaUIsS0FBUCxFQUFjO0FBQ2RkLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZYSxLQUFaO0FBQ0Q7QUFDRjs7QUFFTSxlQUFlQyxPQUFmLENBQXVCcEIsR0FBdkIsRUFBNEJDLEdBQTVCLEVBQWlDQyxJQUFqQyxFQUF1QztBQUM1Q0csRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlOLEdBQUcsQ0FBQ0csT0FBSixDQUFZQyxLQUF4Qjs7QUFDQSxNQUFJLENBQUNKLEdBQUcsQ0FBQ0csT0FBSixDQUFZQyxLQUFqQixFQUF3QjtBQUN0QixXQUFPRixJQUFJLENBQUM7QUFDVm1CLE1BQUFBLE9BQU8sRUFBRSw0REFEQztBQUVWQyxNQUFBQSxVQUFVLEVBQUU7QUFGRixLQUFELENBQVg7QUFLRDs7QUFFRCxNQUFJO0FBQ0YsVUFBTWxCLEtBQUssR0FBR0osR0FBRyxDQUFDRyxPQUFKLENBQVlDLEtBQTFCOztBQUNBLFVBQU1JLE9BQU8sR0FBR0Msc0JBQUlDLE1BQUosQ0FBV04sS0FBWCxFQUFrQk8sT0FBTyxDQUFDQyxHQUFSLENBQVlDLFVBQTlCLENBQWhCOztBQUVBUixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUUsT0FBWjtBQUNBLFVBQU1ELElBQUksR0FBRyxNQUFNVixNQUFNLENBQUNVLElBQVAsQ0FBWU8sVUFBWixDQUF1QjtBQUN4Q0MsTUFBQUEsS0FBSyxFQUFFO0FBQ0xDLFFBQUFBLEVBQUUsRUFBRVIsT0FBTyxDQUFDUTtBQURQO0FBRGlDLEtBQXZCLENBQW5CO0FBTUFoQixJQUFBQSxHQUFHLENBQUNPLElBQUosR0FBV0EsSUFBWDtBQUNBTCxJQUFBQSxJQUFJO0FBQ0wsR0FiRCxDQWFFLE9BQU9pQixLQUFQLEVBQWM7QUFDZGpCLElBQUFBLElBQUksQ0FBQztBQUNIbUIsTUFBQUEsT0FBTyxFQUFFLGtDQUFrQ3JCLEdBQUcsQ0FBQ0csT0FBSixDQUFZQyxLQUE5QyxHQUFzRGUsS0FENUQ7QUFFSEcsTUFBQUEsVUFBVSxFQUFFO0FBRlQsS0FBRCxDQUFKO0FBS0Q7QUFDRiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9KYXZhU2NyaXB0L3lvdVR1YmUvc2VydmVyL3NyYy9taWRkbGV3YXJlLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXG5cbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF1dGhVc2VyKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGlmICghcmVxLmNvb2tpZXMudG9rZW4pIHtcbiAgICBjb25zb2xlLmxvZyhcIk51bGxsbGxsbGxsbGxsTEzFgVwiKVxuICAgIHJlcS51c2VyID0gbnVsbFxuICAgIHJldHVybiBuZXh0KClcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy50b2tlblxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKVxuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQ6IGRlY29kZWQuaWRcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHZpZGVvczogdHJ1ZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXEudXNlciA9IHVzZXI7XG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm90ZWN0KHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnNvbGUubG9nKHJlcS5jb29raWVzLnRva2VuKVxuICBpZiAoIXJlcS5jb29raWVzLnRva2VuKSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogXCJZb3UgbmVlZCB0byBiZSBsb2dsZWQgaW4gYmVyZm9yZSB5b3UgY2FuIHZpc2l0ISBpbiBwcm90ZWN0XCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDFcblxuICAgIH0pXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMudG9rZW47XG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpXG5cbiAgICBjb25zb2xlLmxvZyhkZWNvZGVkKVxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkOiBkZWNvZGVkLmlkXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICByZXEudXNlciA9IHVzZXJcbiAgICBuZXh0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIllvdSBoYXZlIHRvIGJlIGxvZ2dlZCBpbiA6OjogXCIgKyByZXEuY29va2llcy50b2tlbiArIGVycm9yLFxuICAgICAgc3RhdHVzQ29kZTogNDAxLFxuXG4gICAgfSlcbiAgfVxufSJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "authorization.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getAuthUser",
        "req",
        "res",
        "next",
        "cookies",
        "token",
        "console",
        "log",
        "user",
        "decoded",
        "jwt",
        "verify",
        "process",
        "env",
        "JWT_SECRET",
        "findUnique",
        "where",
        "id",
        "include",
        "videos",
        "error",
        "protect",
        "message",
        "statusCode"
      ],
      "mappings": ";;;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,oBAAJ,EAAf;;AAEO,eAAeC,WAAf,CAA2BC,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C;AAChD,MAAI,CAACF,GAAG,CAACG,OAAJ,CAAYC,KAAjB,EAAwB;AACtBC,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAN,IAAAA,GAAG,CAACO,IAAJ,GAAW,IAAX;AACA,WAAOL,IAAI,EAAX;AACD;;AAED,MAAI;AACF,UAAME,KAAK,GAAGJ,GAAG,CAACG,OAAJ,CAAYC,KAA1B;;AACA,UAAMI,OAAO,GAAGC,sBAAIC,MAAJ,CAAWN,KAAX,EAAkBO,OAAO,CAACC,GAAR,CAAYC,UAA9B,CAAhB;;AAEA,UAAMN,IAAI,GAAG,MAAMV,MAAM,CAACU,IAAP,CAAYO,UAAZ,CAAuB;AACxCC,MAAAA,KAAK,EAAE;AACLC,QAAAA,EAAE,EAAER,OAAO,CAACQ;AADP,OADiC;AAIxCC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE;AADD;AAJ+B,KAAvB,CAAnB;AASAlB,IAAAA,GAAG,CAACO,IAAJ,GAAWA,IAAX;AACAL,IAAAA,IAAI;AACL,GAfD,CAeE,OAAOiB,KAAP,EAAc;AACdd,IAAAA,OAAO,CAACC,GAAR,CAAYa,KAAZ;AACD;AACF;;AAEM,eAAeC,OAAf,CAAuBpB,GAAvB,EAA4BC,GAA5B,EAAiCC,IAAjC,EAAuC;AAC5CG,EAAAA,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACG,OAAJ,CAAYC,KAAxB;;AACA,MAAI,CAACJ,GAAG,CAACG,OAAJ,CAAYC,KAAjB,EAAwB;AACtB,WAAOF,IAAI,CAAC;AACVmB,MAAAA,OAAO,EAAE,4DADC;AAEVC,MAAAA,UAAU,EAAE;AAFF,KAAD,CAAX;AAKD;;AAED,MAAI;AACF,UAAMlB,KAAK,GAAGJ,GAAG,CAACG,OAAJ,CAAYC,KAA1B;;AACA,UAAMI,OAAO,GAAGC,sBAAIC,MAAJ,CAAWN,KAAX,EAAkBO,OAAO,CAACC,GAAR,CAAYC,UAA9B,CAAhB;;AAEAR,IAAAA,OAAO,CAACC,GAAR,CAAYE,OAAZ;AACA,UAAMD,IAAI,GAAG,MAAMV,MAAM,CAACU,IAAP,CAAYO,UAAZ,CAAuB;AACxCC,MAAAA,KAAK,EAAE;AACLC,QAAAA,EAAE,EAAER,OAAO,CAACQ;AADP;AADiC,KAAvB,CAAnB;AAMAhB,IAAAA,GAAG,CAACO,IAAJ,GAAWA,IAAX;AACAL,IAAAA,IAAI;AACL,GAbD,CAaE,OAAOiB,KAAP,EAAc;AACdjB,IAAAA,IAAI,CAAC;AACHmB,MAAAA,OAAO,EAAE,kCAAkCrB,GAAG,CAACG,OAAJ,CAAYC,KAA9C,GAAsDe,KAD5D;AAEHG,MAAAA,UAAU,EAAE;AAFT,KAAD,CAAJ;AAKD;AACF",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "sourcesContent": [
        "import { PrismaClient } from \"@prisma/client\";\nimport jwt from 'jsonwebtoken'\n\nconst prisma = new PrismaClient();\n\nexport async function getAuthUser(req, res, next) {\n  if (!req.cookies.token) {\n    console.log(\"NullllllllllllLLŁ\")\n    req.user = null\n    return next()\n  }\n\n  try {\n    const token = req.cookies.token\n    const decoded = jwt.verify(token, process.env.JWT_SECRET)\n\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n      include: {\n        videos: true\n      }\n    })\n\n    req.user = user;\n    next();\n  } catch (error) {\n    console.log(error)\n  }\n}\n\nexport async function protect(req, res, next) {\n  console.log(req.cookies.token)\n  if (!req.cookies.token) {\n    return next({\n      message: \"You need to be logled in berfore you can visit! in protect\",\n      statusCode: 401\n\n    })\n  }\n\n  try {\n    const token = req.cookies.token;\n    const decoded = jwt.verify(token, process.env.JWT_SECRET)\n\n    console.log(decoded)\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n    })\n\n    req.user = user\n    next();\n  } catch (error) {\n    next({\n      message: \"You have to be logged in ::: \" + req.cookies.token + error,\n      statusCode: 401,\n\n    })\n  }\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1637565890492
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
        "sourceFileName": "authorization.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAuthUser = getAuthUser;\nexports.protect = protect;\n\nvar _client = require(\"@prisma/client\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst prisma = new _client.PrismaClient();\n\nasync function getAuthUser(req, res, next) {\n  if (!req.cookies.token) {\n    console.log(\"NullllllllllllLLŁ\");\n    req.user = null;\n    return next();\n  }\n\n  try {\n    const token = req.cookies.token;\n\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n      include: {\n        videos: true\n      }\n    });\n    req.user = user;\n    next();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function protect(req, res, next) {\n  console.log(req.cookies.token);\n\n  if (!req.cookies.token) {\n    return next({\n      message: \"You need to be logled in berfore you can visit! in protect\",\n      statusCode: 401\n    });\n  }\n\n  try {\n    const token = req.cookies.token;\n\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n\n    console.log(decoded);\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      }\n    });\n    req.user = user;\n    next();\n  } catch (error) {\n    next({\n      message: \"You have to be logged in ::: \" + req.cookies.token + error,\n      statusCode: 401\n    });\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcml6YXRpb24uanMiXSwibmFtZXMiOlsicHJpc21hIiwiUHJpc21hQ2xpZW50IiwiZ2V0QXV0aFVzZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiY29va2llcyIsInRva2VuIiwiY29uc29sZSIsImxvZyIsInVzZXIiLCJkZWNvZGVkIiwiand0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsImluY2x1ZGUiLCJ2aWRlb3MiLCJlcnJvciIsInByb3RlY3QiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFJQyxvQkFBSixFQUFmOztBQUVPLGVBQWVDLFdBQWYsQ0FBMkJDLEdBQTNCLEVBQWdDQyxHQUFoQyxFQUFxQ0MsSUFBckMsRUFBMkM7QUFDaEQsTUFBSSxDQUFDRixHQUFHLENBQUNHLE9BQUosQ0FBWUMsS0FBakIsRUFBd0I7QUFDdEJDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLG1CQUFaO0FBQ0FOLElBQUFBLEdBQUcsQ0FBQ08sSUFBSixHQUFXLElBQVg7QUFDQSxXQUFPTCxJQUFJLEVBQVg7QUFDRDs7QUFFRCxNQUFJO0FBQ0YsVUFBTUUsS0FBSyxHQUFHSixHQUFHLENBQUNHLE9BQUosQ0FBWUMsS0FBMUI7O0FBQ0EsVUFBTUksT0FBTyxHQUFHQyxzQkFBSUMsTUFBSixDQUFXTixLQUFYLEVBQWtCTyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUIsQ0FBaEI7O0FBRUEsVUFBTU4sSUFBSSxHQUFHLE1BQU1WLE1BQU0sQ0FBQ1UsSUFBUCxDQUFZTyxVQUFaLENBQXVCO0FBQ3hDQyxNQUFBQSxLQUFLLEVBQUU7QUFDTEMsUUFBQUEsRUFBRSxFQUFFUixPQUFPLENBQUNRO0FBRFAsT0FEaUM7QUFJeENDLE1BQUFBLE9BQU8sRUFBRTtBQUNQQyxRQUFBQSxNQUFNLEVBQUU7QUFERDtBQUorQixLQUF2QixDQUFuQjtBQVNBbEIsSUFBQUEsR0FBRyxDQUFDTyxJQUFKLEdBQVdBLElBQVg7QUFDQUwsSUFBQUEsSUFBSTtBQUNMLEdBZkQsQ0FlRSxPQUFPaUIsS0FBUCxFQUFjO0FBQ2RkLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZYSxLQUFaO0FBQ0Q7QUFDRjs7QUFFTSxlQUFlQyxPQUFmLENBQXVCcEIsR0FBdkIsRUFBNEJDLEdBQTVCLEVBQWlDQyxJQUFqQyxFQUF1QztBQUM1Q0csRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlOLEdBQUcsQ0FBQ0csT0FBSixDQUFZQyxLQUF4Qjs7QUFDQSxNQUFJLENBQUNKLEdBQUcsQ0FBQ0csT0FBSixDQUFZQyxLQUFqQixFQUF3QjtBQUN0QixXQUFPRixJQUFJLENBQUM7QUFDVm1CLE1BQUFBLE9BQU8sRUFBRSw0REFEQztBQUVWQyxNQUFBQSxVQUFVLEVBQUU7QUFGRixLQUFELENBQVg7QUFLRDs7QUFFRCxNQUFJO0FBQ0YsVUFBTWxCLEtBQUssR0FBR0osR0FBRyxDQUFDRyxPQUFKLENBQVlDLEtBQTFCOztBQUNBLFVBQU1JLE9BQU8sR0FBR0Msc0JBQUlDLE1BQUosQ0FBV04sS0FBWCxFQUFrQk8sT0FBTyxDQUFDQyxHQUFSLENBQVlDLFVBQTlCLENBQWhCOztBQUVBUixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUUsT0FBWjtBQUNBLFVBQU1ELElBQUksR0FBRyxNQUFNVixNQUFNLENBQUNVLElBQVAsQ0FBWU8sVUFBWixDQUF1QjtBQUN4Q0MsTUFBQUEsS0FBSyxFQUFFO0FBQ0xDLFFBQUFBLEVBQUUsRUFBRVIsT0FBTyxDQUFDUTtBQURQO0FBRGlDLEtBQXZCLENBQW5CO0FBTUFoQixJQUFBQSxHQUFHLENBQUNPLElBQUosR0FBV0EsSUFBWDtBQUNBTCxJQUFBQSxJQUFJO0FBQ0wsR0FiRCxDQWFFLE9BQU9pQixLQUFQLEVBQWM7QUFDZGpCLElBQUFBLElBQUksQ0FBQztBQUNIbUIsTUFBQUEsT0FBTyxFQUFFLGtDQUFrQ3JCLEdBQUcsQ0FBQ0csT0FBSixDQUFZQyxLQUE5QyxHQUFzRGUsS0FENUQ7QUFFSEcsTUFBQUEsVUFBVSxFQUFFO0FBRlQsS0FBRCxDQUFKO0FBS0Q7QUFDRiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9KYXZhU2NyaXB0L3lvdVR1YmUvc2VydmVyL3NyYy9taWRkbGV3YXJlLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXG5cbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF1dGhVc2VyKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGlmICghcmVxLmNvb2tpZXMudG9rZW4pIHtcbiAgICBjb25zb2xlLmxvZyhcIk51bGxsbGxsbGxsbGxsTEzFgVwiKVxuICAgIHJlcS51c2VyID0gbnVsbFxuICAgIHJldHVybiBuZXh0KClcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy50b2tlblxuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKVxuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQ6IGRlY29kZWQuaWRcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHZpZGVvczogdHJ1ZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXEudXNlciA9IHVzZXI7XG4gICAgbmV4dCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm90ZWN0KHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnNvbGUubG9nKHJlcS5jb29raWVzLnRva2VuKVxuICBpZiAoIXJlcS5jb29raWVzLnRva2VuKSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogXCJZb3UgbmVlZCB0byBiZSBsb2dsZWQgaW4gYmVyZm9yZSB5b3UgY2FuIHZpc2l0ISBpbiBwcm90ZWN0XCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDFcblxuICAgIH0pXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMudG9rZW47XG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpXG5cbiAgICBjb25zb2xlLmxvZyhkZWNvZGVkKVxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkOiBkZWNvZGVkLmlkXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICByZXEudXNlciA9IHVzZXJcbiAgICBuZXh0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIllvdSBoYXZlIHRvIGJlIGxvZ2dlZCBpbiA6OjogXCIgKyByZXEuY29va2llcy50b2tlbiArIGVycm9yLFxuICAgICAgc3RhdHVzQ29kZTogNDAxLFxuXG4gICAgfSlcbiAgfVxufSJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "authorization.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getAuthUser",
        "req",
        "res",
        "next",
        "cookies",
        "token",
        "console",
        "log",
        "user",
        "decoded",
        "jwt",
        "verify",
        "process",
        "env",
        "JWT_SECRET",
        "findUnique",
        "where",
        "id",
        "include",
        "videos",
        "error",
        "protect",
        "message",
        "statusCode"
      ],
      "mappings": ";;;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,oBAAJ,EAAf;;AAEO,eAAeC,WAAf,CAA2BC,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C;AAChD,MAAI,CAACF,GAAG,CAACG,OAAJ,CAAYC,KAAjB,EAAwB;AACtBC,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAN,IAAAA,GAAG,CAACO,IAAJ,GAAW,IAAX;AACA,WAAOL,IAAI,EAAX;AACD;;AAED,MAAI;AACF,UAAME,KAAK,GAAGJ,GAAG,CAACG,OAAJ,CAAYC,KAA1B;;AACA,UAAMI,OAAO,GAAGC,sBAAIC,MAAJ,CAAWN,KAAX,EAAkBO,OAAO,CAACC,GAAR,CAAYC,UAA9B,CAAhB;;AAEA,UAAMN,IAAI,GAAG,MAAMV,MAAM,CAACU,IAAP,CAAYO,UAAZ,CAAuB;AACxCC,MAAAA,KAAK,EAAE;AACLC,QAAAA,EAAE,EAAER,OAAO,CAACQ;AADP,OADiC;AAIxCC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE;AADD;AAJ+B,KAAvB,CAAnB;AASAlB,IAAAA,GAAG,CAACO,IAAJ,GAAWA,IAAX;AACAL,IAAAA,IAAI;AACL,GAfD,CAeE,OAAOiB,KAAP,EAAc;AACdd,IAAAA,OAAO,CAACC,GAAR,CAAYa,KAAZ;AACD;AACF;;AAEM,eAAeC,OAAf,CAAuBpB,GAAvB,EAA4BC,GAA5B,EAAiCC,IAAjC,EAAuC;AAC5CG,EAAAA,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACG,OAAJ,CAAYC,KAAxB;;AACA,MAAI,CAACJ,GAAG,CAACG,OAAJ,CAAYC,KAAjB,EAAwB;AACtB,WAAOF,IAAI,CAAC;AACVmB,MAAAA,OAAO,EAAE,4DADC;AAEVC,MAAAA,UAAU,EAAE;AAFF,KAAD,CAAX;AAKD;;AAED,MAAI;AACF,UAAMlB,KAAK,GAAGJ,GAAG,CAACG,OAAJ,CAAYC,KAA1B;;AACA,UAAMI,OAAO,GAAGC,sBAAIC,MAAJ,CAAWN,KAAX,EAAkBO,OAAO,CAACC,GAAR,CAAYC,UAA9B,CAAhB;;AAEAR,IAAAA,OAAO,CAACC,GAAR,CAAYE,OAAZ;AACA,UAAMD,IAAI,GAAG,MAAMV,MAAM,CAACU,IAAP,CAAYO,UAAZ,CAAuB;AACxCC,MAAAA,KAAK,EAAE;AACLC,QAAAA,EAAE,EAAER,OAAO,CAACQ;AADP;AADiC,KAAvB,CAAnB;AAMAhB,IAAAA,GAAG,CAACO,IAAJ,GAAWA,IAAX;AACAL,IAAAA,IAAI;AACL,GAbD,CAaE,OAAOiB,KAAP,EAAc;AACdjB,IAAAA,IAAI,CAAC;AACHmB,MAAAA,OAAO,EAAE,kCAAkCrB,GAAG,CAACG,OAAJ,CAAYC,KAA9C,GAAsDe,KAD5D;AAEHG,MAAAA,UAAU,EAAE;AAFT,KAAD,CAAJ;AAKD;AACF",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "sourcesContent": [
        "import { PrismaClient } from \"@prisma/client\";\nimport jwt from 'jsonwebtoken'\n\nconst prisma = new PrismaClient();\n\nexport async function getAuthUser(req, res, next) {\n  if (!req.cookies.token) {\n    console.log(\"NullllllllllllLLŁ\")\n    req.user = null\n    return next()\n  }\n\n  try {\n    const token = req.cookies.token\n    const decoded = jwt.verify(token, process.env.JWT_SECRET)\n\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n      include: {\n        videos: true\n      }\n    })\n\n    req.user = user;\n    next();\n  } catch (error) {\n    console.log(error)\n  }\n}\n\nexport async function protect(req, res, next) {\n  console.log(req.cookies.token)\n  if (!req.cookies.token) {\n    return next({\n      message: \"You need to be logled in berfore you can visit! in protect\",\n      statusCode: 401\n\n    })\n  }\n\n  try {\n    const token = req.cookies.token;\n    const decoded = jwt.verify(token, process.env.JWT_SECRET)\n\n    console.log(decoded)\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n    })\n\n    req.user = user\n    next();\n  } catch (error) {\n    next({\n      message: \"You have to be logged in ::: \" + req.cookies.token + error,\n      statusCode: 401,\n\n    })\n  }\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1637565890492
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/index.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nvar _start = require(\"./start\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_loglevel.default.setLevel(\"info\");\n\n(0, _start.startServer)();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImxvZ2dlciIsInNldExldmVsIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOzs7O0FBQ0FBLGtCQUFPQyxRQUFQLENBQWdCLE1BQWhCOztBQUNBIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tZXJvai9EZXNrdG9wL3JlZWRiYXJnZXIteW91dHViZS1yZWFjdC9KYXZhU2NyaXB0L3lvdVR1YmUvc2VydmVyL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nZ2VyIGZyb20gXCJsb2dsZXZlbFwiO1xuaW1wb3J0IHsgc3RhcnRTZXJ2ZXIgfSBmcm9tIFwiLi9zdGFydFwiO1xubG9nZ2VyLnNldExldmVsKFwiaW5mb1wiKTtcbnN0YXJ0U2VydmVyKCk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "logger",
        "setLevel"
      ],
      "mappings": ";;AAAA;;AACA;;;;AACAA,kBAAOC,QAAP,CAAgB,MAAhB;;AACA",
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/",
      "sourcesContent": [
        "import logger from \"loglevel\";\nimport { startServer } from \"./start\";\nlogger.setLevel(\"info\");\nstartServer();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/start.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/start.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/start.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/start.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/",
        "sourceFileName": "start.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.startServer = startServer;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nrequire(\"express-async-errors\");\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\n\nvar _routes = require(\"./routes\");\n\nvar _error = require(\"./middleware/error\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Import this module to handle errors when using async functions for our route handlers\n_dotenv.default.config();\n\nfunction startServer({\n  port = process.env.PORT\n} = {}) {\n  const app = (0, _express.default)();\n  app.use((0, _morgan.default)(\"dev\"));\n  app.use((0, _cors.default)());\n  app.use((0, _cookieParser.default)());\n  app.use(_express.default.json()); // all API routes are prefixed with /api/v1\n\n  app.use(\"/api/v1\", (0, _routes.getRoutes)()); // Generic error handler if errors are missed by 'express-async-errors' middleware\n\n  app.use(_error.errorMiddleware); // When our project is pushed to production, we will serve // the react app using express.static() middleware\n\n  if (process.env.NODE_ENV === \"production\") {\n    app.use(_express.default.static(_path.default.resolve(__dirname, \"../client/build\"))); // Any request not caught by our API will be routed\n    // to our built react app\n\n    app.get(\"*\", function (req, res) {\n      res.sendFile(_path.default.resolve(__dirname, \"../client/build\", \"index.html\"));\n    });\n  } // This block of code is made to reliably start and close our express app\n  // It is written as a promise, which can be more easily tested\n\n\n  return new Promise(resolve => {\n    const server = app.listen(port, () => {\n      _loglevel.default.info(`Listening on port ${server.address().port}`);\n\n      const originalClose = server.close.bind(server);\n\n      server.close = () => {\n        return new Promise(resolveClose => {\n          originalClose(resolveClose);\n        });\n      }; // This function properly closes the server when the program exits\n\n\n      (0, _error.setupCloseOnExit)(server);\n      resolve(server);\n    });\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXJ0LmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsInN0YXJ0U2VydmVyIiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwiYXBwIiwidXNlIiwiZXhwcmVzcyIsImpzb24iLCJlcnJvck1pZGRsZXdhcmUiLCJOT0RFX0VOViIsInN0YXRpYyIsInBhdGgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiZ2V0IiwicmVxIiwicmVzIiwic2VuZEZpbGUiLCJQcm9taXNlIiwic2VydmVyIiwibGlzdGVuIiwibG9nZ2VyIiwiaW5mbyIsImFkZHJlc3MiLCJvcmlnaW5hbENsb3NlIiwiY2xvc2UiLCJiaW5kIiwicmVzb2x2ZUNsb3NlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFWQTtBQVlBQSxnQkFBT0MsTUFBUDs7QUFFQSxTQUFTQyxXQUFULENBQXFCO0FBQUVDLEVBQUFBLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDO0FBQXJCLElBQThCLEVBQW5ELEVBQXVEO0FBQ3JELFFBQU1DLEdBQUcsR0FBRyx1QkFBWjtBQUNBQSxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxxQkFBTyxLQUFQLENBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsb0JBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsNEJBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVFDLGlCQUFRQyxJQUFSLEVBQVIsRUFMcUQsQ0FNckQ7O0FBQ0FILEVBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLFNBQVIsRUFBbUIsd0JBQW5CLEVBUHFELENBU3JEOztBQUNBRCxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUUcsc0JBQVIsRUFWcUQsQ0FZckQ7O0FBQ0EsTUFBSVAsT0FBTyxDQUFDQyxHQUFSLENBQVlPLFFBQVosS0FBeUIsWUFBN0IsRUFBMkM7QUFDekNMLElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxpQkFBUUksTUFBUixDQUFlQyxjQUFLQyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsaUJBQXhCLENBQWYsQ0FBUixFQUR5QyxDQUd6QztBQUNBOztBQUNBVCxJQUFBQSxHQUFHLENBQUNVLEdBQUosQ0FBUSxHQUFSLEVBQWEsVUFBVUMsR0FBVixFQUFlQyxHQUFmLEVBQW9CO0FBQy9CQSxNQUFBQSxHQUFHLENBQUNDLFFBQUosQ0FBYU4sY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLGlCQUF4QixFQUEyQyxZQUEzQyxDQUFiO0FBQ0QsS0FGRDtBQUdELEdBckJvRCxDQXVCckQ7QUFDQTs7O0FBQ0EsU0FBTyxJQUFJSyxPQUFKLENBQWFOLE9BQUQsSUFBYTtBQUM5QixVQUFNTyxNQUFNLEdBQUdmLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBV3BCLElBQVgsRUFBaUIsTUFBTTtBQUNwQ3FCLHdCQUFPQyxJQUFQLENBQWEscUJBQW9CSCxNQUFNLENBQUNJLE9BQVAsR0FBaUJ2QixJQUFLLEVBQXZEOztBQUVBLFlBQU13QixhQUFhLEdBQUdMLE1BQU0sQ0FBQ00sS0FBUCxDQUFhQyxJQUFiLENBQWtCUCxNQUFsQixDQUF0Qjs7QUFDQUEsTUFBQUEsTUFBTSxDQUFDTSxLQUFQLEdBQWUsTUFBTTtBQUNuQixlQUFPLElBQUlQLE9BQUosQ0FBYVMsWUFBRCxJQUFrQjtBQUNuQ0gsVUFBQUEsYUFBYSxDQUFDRyxZQUFELENBQWI7QUFDRCxTQUZNLENBQVA7QUFHRCxPQUpELENBSm9DLENBU3BDOzs7QUFDQSxtQ0FBaUJSLE1BQWpCO0FBQ0FQLE1BQUFBLE9BQU8sQ0FBQ08sTUFBRCxDQUFQO0FBQ0QsS0FaYyxDQUFmO0FBYUQsR0FkTSxDQUFQO0FBZUQiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvcmVlZGJhcmdlci15b3V0dWJlLXJlYWN0L0phdmFTY3JpcHQveW91VHViZS9zZXJ2ZXIvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG4vLyBJbXBvcnQgdGhpcyBtb2R1bGUgdG8gaGFuZGxlIGVycm9ycyB3aGVuIHVzaW5nIGFzeW5jIGZ1bmN0aW9ucyBmb3Igb3VyIHJvdXRlIGhhbmRsZXJzXG5pbXBvcnQgXCJleHByZXNzLWFzeW5jLWVycm9yc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCJsb2dsZXZlbFwiO1xuaW1wb3J0IG1vcmdhbiBmcm9tIFwibW9yZ2FuXCI7XG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSBcImNvb2tpZS1wYXJzZXJcIjtcblxuaW1wb3J0IHsgZ2V0Um91dGVzIH0gZnJvbSBcIi4vcm91dGVzXCI7XG5pbXBvcnQgeyBlcnJvck1pZGRsZXdhcmUsIHNldHVwQ2xvc2VPbkV4aXQgfSBmcm9tIFwiLi9taWRkbGV3YXJlL2Vycm9yXCI7XG5cbmRvdGVudi5jb25maWcoKTtcblxuZnVuY3Rpb24gc3RhcnRTZXJ2ZXIoeyBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB9ID0ge30pIHtcbiAgY29uc3QgYXBwID0gZXhwcmVzcygpO1xuICBhcHAudXNlKG1vcmdhbihcImRldlwiKSk7XG4gIGFwcC51c2UoY29ycygpKTtcbiAgYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG4gIGFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuICAvLyBhbGwgQVBJIHJvdXRlcyBhcmUgcHJlZml4ZWQgd2l0aCAvYXBpL3YxXG4gIGFwcC51c2UoXCIvYXBpL3YxXCIsIGdldFJvdXRlcygpKTtcblxuICAvLyBHZW5lcmljIGVycm9yIGhhbmRsZXIgaWYgZXJyb3JzIGFyZSBtaXNzZWQgYnkgJ2V4cHJlc3MtYXN5bmMtZXJyb3JzJyBtaWRkbGV3YXJlXG4gIGFwcC51c2UoZXJyb3JNaWRkbGV3YXJlKTtcblxuICAvLyBXaGVuIG91ciBwcm9qZWN0IGlzIHB1c2hlZCB0byBwcm9kdWN0aW9uLCB3ZSB3aWxsIHNlcnZlIC8vIHRoZSByZWFjdCBhcHAgdXNpbmcgZXhwcmVzcy5zdGF0aWMoKSBtaWRkbGV3YXJlXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBhcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiLi4vY2xpZW50L2J1aWxkXCIpKSk7XG5cbiAgICAvLyBBbnkgcmVxdWVzdCBub3QgY2F1Z2h0IGJ5IG91ciBBUEkgd2lsbCBiZSByb3V0ZWRcbiAgICAvLyB0byBvdXIgYnVpbHQgcmVhY3QgYXBwXG4gICAgYXBwLmdldChcIipcIiwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gICAgICByZXMuc2VuZEZpbGUocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuLi9jbGllbnQvYnVpbGRcIiwgXCJpbmRleC5odG1sXCIpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFRoaXMgYmxvY2sgb2YgY29kZSBpcyBtYWRlIHRvIHJlbGlhYmx5IHN0YXJ0IGFuZCBjbG9zZSBvdXIgZXhwcmVzcyBhcHBcbiAgLy8gSXQgaXMgd3JpdHRlbiBhcyBhIHByb21pc2UsIHdoaWNoIGNhbiBiZSBtb3JlIGVhc2lseSB0ZXN0ZWRcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgY29uc3Qgc2VydmVyID0gYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbyhgTGlzdGVuaW5nIG9uIHBvcnQgJHtzZXJ2ZXIuYWRkcmVzcygpLnBvcnR9YCk7XG5cbiAgICAgIGNvbnN0IG9yaWdpbmFsQ2xvc2UgPSBzZXJ2ZXIuY2xvc2UuYmluZChzZXJ2ZXIpO1xuICAgICAgc2VydmVyLmNsb3NlID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmVDbG9zZSkgPT4ge1xuICAgICAgICAgIG9yaWdpbmFsQ2xvc2UocmVzb2x2ZUNsb3NlKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgLy8gVGhpcyBmdW5jdGlvbiBwcm9wZXJseSBjbG9zZXMgdGhlIHNlcnZlciB3aGVuIHRoZSBwcm9ncmFtIGV4aXRzXG4gICAgICBzZXR1cENsb3NlT25FeGl0KHNlcnZlcik7XG4gICAgICByZXNvbHZlKHNlcnZlcik7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgeyBzdGFydFNlcnZlciB9O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "start.js"
      ],
      "names": [
        "dotenv",
        "config",
        "startServer",
        "port",
        "process",
        "env",
        "PORT",
        "app",
        "use",
        "express",
        "json",
        "errorMiddleware",
        "NODE_ENV",
        "static",
        "path",
        "resolve",
        "__dirname",
        "get",
        "req",
        "res",
        "sendFile",
        "Promise",
        "server",
        "listen",
        "logger",
        "info",
        "address",
        "originalClose",
        "close",
        "bind",
        "resolveClose"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAVA;AAYAA,gBAAOC,MAAP;;AAEA,SAASC,WAAT,CAAqB;AAAEC,EAAAA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC;AAArB,IAA8B,EAAnD,EAAuD;AACrD,QAAMC,GAAG,GAAG,uBAAZ;AACAA,EAAAA,GAAG,CAACC,GAAJ,CAAQ,qBAAO,KAAP,CAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQ,4BAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQC,IAAR,EAAR,EALqD,CAMrD;;AACAH,EAAAA,GAAG,CAACC,GAAJ,CAAQ,SAAR,EAAmB,wBAAnB,EAPqD,CASrD;;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQG,sBAAR,EAVqD,CAYrD;;AACA,MAAIP,OAAO,CAACC,GAAR,CAAYO,QAAZ,KAAyB,YAA7B,EAA2C;AACzCL,IAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQI,MAAR,CAAeC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,CAAf,CAAR,EADyC,CAGzC;AACA;;AACAT,IAAAA,GAAG,CAACU,GAAJ,CAAQ,GAAR,EAAa,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC/BA,MAAAA,GAAG,CAACC,QAAJ,CAAaN,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,EAA2C,YAA3C,CAAb;AACD,KAFD;AAGD,GArBoD,CAuBrD;AACA;;;AACA,SAAO,IAAIK,OAAJ,CAAaN,OAAD,IAAa;AAC9B,UAAMO,MAAM,GAAGf,GAAG,CAACgB,MAAJ,CAAWpB,IAAX,EAAiB,MAAM;AACpCqB,wBAAOC,IAAP,CAAa,qBAAoBH,MAAM,CAACI,OAAP,GAAiBvB,IAAK,EAAvD;;AAEA,YAAMwB,aAAa,GAAGL,MAAM,CAACM,KAAP,CAAaC,IAAb,CAAkBP,MAAlB,CAAtB;;AACAA,MAAAA,MAAM,CAACM,KAAP,GAAe,MAAM;AACnB,eAAO,IAAIP,OAAJ,CAAaS,YAAD,IAAkB;AACnCH,UAAAA,aAAa,CAACG,YAAD,CAAb;AACD,SAFM,CAAP;AAGD,OAJD,CAJoC,CASpC;;;AACA,mCAAiBR,MAAjB;AACAP,MAAAA,OAAO,CAACO,MAAD,CAAP;AACD,KAZc,CAAf;AAaD,GAdM,CAAP;AAeD",
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/",
      "sourcesContent": [
        "import express from \"express\";\n// Import this module to handle errors when using async functions for our route handlers\nimport \"express-async-errors\";\nimport path from \"path\";\nimport cors from \"cors\";\nimport logger from \"loglevel\";\nimport morgan from \"morgan\";\nimport dotenv from \"dotenv\";\nimport cookieParser from \"cookie-parser\";\n\nimport { getRoutes } from \"./routes\";\nimport { errorMiddleware, setupCloseOnExit } from \"./middleware/error\";\n\ndotenv.config();\n\nfunction startServer({ port = process.env.PORT } = {}) {\n  const app = express();\n  app.use(morgan(\"dev\"));\n  app.use(cors());\n  app.use(cookieParser());\n  app.use(express.json());\n  // all API routes are prefixed with /api/v1\n  app.use(\"/api/v1\", getRoutes());\n\n  // Generic error handler if errors are missed by 'express-async-errors' middleware\n  app.use(errorMiddleware);\n\n  // When our project is pushed to production, we will serve // the react app using express.static() middleware\n  if (process.env.NODE_ENV === \"production\") {\n    app.use(express.static(path.resolve(__dirname, \"../client/build\")));\n\n    // Any request not caught by our API will be routed\n    // to our built react app\n    app.get(\"*\", function (req, res) {\n      res.sendFile(path.resolve(__dirname, \"../client/build\", \"index.html\"));\n    });\n  }\n\n  // This block of code is made to reliably start and close our express app\n  // It is written as a promise, which can be more easily tested\n  return new Promise((resolve) => {\n    const server = app.listen(port, () => {\n      logger.info(`Listening on port ${server.address().port}`);\n\n      const originalClose = server.close.bind(server);\n      server.close = () => {\n        return new Promise((resolveClose) => {\n          originalClose(resolveClose);\n        });\n      };\n      // This function properly closes the server when the program exits\n      setupCloseOnExit(server);\n      resolve(server);\n    });\n  });\n}\n\nexport { startServer };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/index.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRoutes = getRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _auth = require(\"./auth\");\n\nvar _user = require(\"./user\");\n\nvar _video = require(\"./video\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getRoutes() {\n  // All routes in our Node API are placed on this router\n  const router = _express.default.Router(); // router.use() prefixes our route (i.e. /api/v1/auth)\n\n\n  router.use(\"/auth\", (0, _auth.getAuthRoutes)());\n  router.use(\"/users\", (0, _user.getUserRoutes)());\n  router.use(\"/videos\", (0, _video.getVideoRoutes)());\n  return router;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImdldFJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJ1c2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUVBLFNBQVNBLFNBQVQsR0FBcUI7QUFDbkI7QUFDQSxRQUFNQyxNQUFNLEdBQUdDLGlCQUFRQyxNQUFSLEVBQWYsQ0FGbUIsQ0FJbkI7OztBQUNBRixFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxPQUFYLEVBQW9CLDBCQUFwQjtBQUNBSCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxRQUFYLEVBQXFCLDBCQUFyQjtBQUNBSCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxTQUFYLEVBQXNCLDRCQUF0QjtBQUVBLFNBQU9ILE1BQVA7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9yZWVkYmFyZ2VyLXlvdXR1YmUtcmVhY3QvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5cbmltcG9ydCB7IGdldEF1dGhSb3V0ZXMgfSBmcm9tIFwiLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRVc2VyUm91dGVzIH0gZnJvbSBcIi4vdXNlclwiO1xuaW1wb3J0IHsgZ2V0VmlkZW9Sb3V0ZXMgfSBmcm9tIFwiLi92aWRlb1wiO1xuXG5mdW5jdGlvbiBnZXRSb3V0ZXMoKSB7XG4gIC8vIEFsbCByb3V0ZXMgaW4gb3VyIE5vZGUgQVBJIGFyZSBwbGFjZWQgb24gdGhpcyByb3V0ZXJcbiAgY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuICAvLyByb3V0ZXIudXNlKCkgcHJlZml4ZXMgb3VyIHJvdXRlIChpLmUuIC9hcGkvdjEvYXV0aClcbiAgcm91dGVyLnVzZShcIi9hdXRoXCIsIGdldEF1dGhSb3V0ZXMoKSk7XG4gIHJvdXRlci51c2UoXCIvdXNlcnNcIiwgZ2V0VXNlclJvdXRlcygpKTtcbiAgcm91dGVyLnVzZShcIi92aWRlb3NcIiwgZ2V0VmlkZW9Sb3V0ZXMoKSk7XG5cbiAgcmV0dXJuIHJvdXRlcjtcbn1cblxuZXhwb3J0IHsgZ2V0Um91dGVzIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "getRoutes",
        "router",
        "express",
        "Router",
        "use"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;;;AAEA,SAASA,SAAT,GAAqB;AACnB;AACA,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf,CAFmB,CAInB;;;AACAF,EAAAA,MAAM,CAACG,GAAP,CAAW,OAAX,EAAoB,0BAApB;AACAH,EAAAA,MAAM,CAACG,GAAP,CAAW,QAAX,EAAqB,0BAArB;AACAH,EAAAA,MAAM,CAACG,GAAP,CAAW,SAAX,EAAsB,4BAAtB;AAEA,SAAOH,MAAP;AACD",
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\n\nimport { getAuthRoutes } from \"./auth\";\nimport { getUserRoutes } from \"./user\";\nimport { getVideoRoutes } from \"./video\";\n\nfunction getRoutes() {\n  // All routes in our Node API are placed on this router\n  const router = express.Router();\n\n  // router.use() prefixes our route (i.e. /api/v1/auth)\n  router.use(\"/auth\", getAuthRoutes());\n  router.use(\"/users\", getUserRoutes());\n  router.use(\"/videos\", getVideoRoutes());\n\n  return router;\n}\n\nexport { getRoutes };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/auth.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/auth.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAuthRoutes = getAuthRoutes;\n\nvar _express = _interopRequireWildcard(require(\"express\"));\n\nvar _client = require(\"@prisma/client\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _authorization = require(\"../middleware/authorization\");\n\nvar _googleAuthLibrary = require(\"google-auth-library\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst client = new _googleAuthLibrary.OAuth2Client(process.env.GOOGLE_CLIENT_ID); // A function to get the routes.\n// All route definitions are in one place and we only need to export one thing\n\nconst prisma = new _client.PrismaClient();\n\nfunction getAuthRoutes() {\n  const router = _express.default.Router();\n\n  router.post('/google-login', googleLogin);\n  router.get('/me', _authorization.protect, me);\n  router.get('/signout', signout);\n  return router;\n} // All controllers/utility functions here\n\n\nasync function googleLogin(req, res) {\n  const {\n    idToken\n  } = req.body;\n  const ticket = await client.verifyIdToken({\n    idToken,\n    audience: process.env.GOOGLE_CLIENT_ID\n  });\n  const {\n    name,\n    picture,\n    email\n  } = ticket.getPayload();\n  let user = await prisma.user.findUnique({\n    where: {\n      email\n    }\n  });\n\n  if (!user) {\n    user = await prisma.user.create({\n      data: {\n        email,\n        username: name,\n        avatar: picture\n      }\n    });\n  }\n\n  const tokenPlayload = {\n    id: user.id\n  };\n\n  const token = _jsonwebtoken.default.sign(tokenPlayload, process.env.JWT_SECRET, {\n    expiresIn: process.env.JWT_EXPIRE\n  });\n\n  res.cookie(\"token\", token, {\n    httpOnly: true\n  });\n  res.status(200).send(token);\n}\n\nasync function me(req, res) {\n  const subscribtions = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      }\n    }\n  });\n  const channelIds = subscribtions.map(sub => sub.subscribedToId);\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        in: channelIds\n      }\n    }\n  });\n  const user = req.user;\n  user.channels = channels;\n  res.status(200).json({\n    user\n  });\n}\n\nfunction signout(req, res) {\n  res.clearCookie('token');\n  res.status(200).json({});\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiY2xpZW50IiwiT0F1dGgyQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9DTElFTlRfSUQiLCJwcmlzbWEiLCJQcmlzbWFDbGllbnQiLCJnZXRBdXRoUm91dGVzIiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInBvc3QiLCJnb29nbGVMb2dpbiIsImdldCIsInByb3RlY3QiLCJtZSIsInNpZ25vdXQiLCJyZXEiLCJyZXMiLCJpZFRva2VuIiwiYm9keSIsInRpY2tldCIsInZlcmlmeUlkVG9rZW4iLCJhdWRpZW5jZSIsIm5hbWUiLCJwaWN0dXJlIiwiZW1haWwiLCJnZXRQYXlsb2FkIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImNyZWF0ZSIsImRhdGEiLCJ1c2VybmFtZSIsImF2YXRhciIsInRva2VuUGxheWxvYWQiLCJpZCIsInRva2VuIiwiand0Iiwic2lnbiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJKV1RfRVhQSVJFIiwiY29va2llIiwiaHR0cE9ubHkiLCJzdGF0dXMiLCJzZW5kIiwic3Vic2NyaWJ0aW9ucyIsInN1YnNjcmlwdGlvbiIsImZpbmRNYW55Iiwic3Vic2NyaWJlcklkIiwiZXF1YWxzIiwiY2hhbm5lbElkcyIsIm1hcCIsInN1YiIsInN1YnNjcmliZWRUb0lkIiwiY2hhbm5lbHMiLCJpbiIsImpzb24iLCJjbGVhckNvb2tpZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFJQywrQkFBSixDQUFpQkMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGdCQUE3QixDQUFmLEMsQ0FFQTtBQUNBOztBQUVBLE1BQU1DLE1BQU0sR0FBRyxJQUFJQyxvQkFBSixFQUFmOztBQUNBLFNBQVNDLGFBQVQsR0FBeUI7QUFDdkIsUUFBTUMsTUFBTSxHQUFHQyxpQkFBUUMsTUFBUixFQUFmOztBQUVB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RUFBQUEsR0FBRyxDQUFDMkIsTUFBSixDQUFXLEdBQVgsRUFBZ0JhLElBQWhCLENBQXFCO0FBQUU5QixJQUFBQTtBQUFGLEdBQXJCO0FBQ0Q7O0FBRUQsU0FBU1osT0FBVCxDQUFpQkMsR0FBakIsRUFBc0JDLEdBQXRCLEVBQTJCO0FBQ3pCQSxFQUFBQSxHQUFHLENBQUN5QyxXQUFKLENBQWdCLE9BQWhCO0FBQ0F6QyxFQUFBQSxHQUFHLENBQUMyQixNQUFKLENBQVcsR0FBWCxFQUFnQmEsSUFBaEIsQ0FBcUIsRUFBckI7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9yZWVkYmFyZ2VyLXlvdXR1YmUtcmVhY3QvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzLCB7IHJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgeyBwcm90ZWN0IH0gZnJvbSBcIi4uL21pZGRsZXdhcmUvYXV0aG9yaXphdGlvblwiO1xuaW1wb3J0IHsgT0F1dGgyQ2xpZW50IH0gZnJvbSBcImdvb2dsZS1hdXRoLWxpYnJhcnlcIjtcblxuY29uc3QgY2xpZW50ID0gbmV3IE9BdXRoMkNsaWVudChwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lEKVxuXG4vLyBBIGZ1bmN0aW9uIHRvIGdldCB0aGUgcm91dGVzLlxuLy8gQWxsIHJvdXRlIGRlZmluaXRpb25zIGFyZSBpbiBvbmUgcGxhY2UgYW5kIHdlIG9ubHkgbmVlZCB0byBleHBvcnQgb25lIHRoaW5nXG5cbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKVxuZnVuY3Rpb24gZ2V0QXV0aFJvdXRlcygpIHtcbiAgY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuICByb3V0ZXIucG9zdCgnL2dvb2dsZS1sb2dpbicsIGdvb2dsZUxvZ2luKVxuICByb3V0ZXIuZ2V0KCcvbWUnLCBwcm90ZWN0LCBtZSlcbiAgcm91dGVyLmdldCgnL3NpZ25vdXQnLCBzaWdub3V0KVxuXG5cbiAgcmV0dXJuIHJvdXRlcjtcbn1cblxuLy8gQWxsIGNvbnRyb2xsZXJzL3V0aWxpdHkgZnVuY3Rpb25zIGhlcmVcbmFzeW5jIGZ1bmN0aW9uIGdvb2dsZUxvZ2luKHJlcSwgcmVzKSB7XG5cbiAgY29uc3QgeyBpZFRva2VuIH0gPSByZXEuYm9keVxuICBjb25zdCB0aWNrZXQgPSBhd2FpdCBjbGllbnQudmVyaWZ5SWRUb2tlbih7XG4gICAgaWRUb2tlbixcbiAgICBhdWRpZW5jZTogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRFxuICB9KVxuXG4gIGNvbnN0IHsgbmFtZSwgcGljdHVyZSwgZW1haWwgfSA9IHRpY2tldC5nZXRQYXlsb2FkKCk7XG5cbiAgbGV0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICB3aGVyZToge1xuICAgICAgZW1haWxcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF1c2VyKSB7XG4gICAgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICB1c2VybmFtZTogbmFtZSxcbiAgICAgICAgYXZhdGFyOiBwaWN0dXJlXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IHRva2VuUGxheWxvYWQgPSB7IGlkOiB1c2VyLmlkIH1cbiAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih0b2tlblBsYXlsb2FkLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCB7XG4gICAgZXhwaXJlc0luOiBwcm9jZXNzLmVudi5KV1RfRVhQSVJFXG4gIH0pXG5cbiAgcmVzLmNvb2tpZShcInRva2VuXCIsIHRva2VuLCB7IGh0dHBPbmx5OiB0cnVlIH0pXG4gIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHRva2VuKVxufVxuXG5hc3luYyBmdW5jdGlvbiBtZShyZXEsIHJlcykge1xuICBjb25zdCBzdWJzY3JpYnRpb25zID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHN1YnNjcmliZXJJZDoge1xuICAgICAgICBlcXVhbHM6IHJlcS51c2VyLmlkXG4gICAgICB9XG4gICAgfVxuICB9KVxuICBjb25zdCBjaGFubmVsSWRzID0gc3Vic2NyaWJ0aW9ucy5tYXAoc3ViID0+IHN1Yi5zdWJzY3JpYmVkVG9JZClcbiAgY29uc3QgY2hhbm5lbHMgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiB7XG4gICAgICAgIGluOiBjaGFubmVsSWRzLFxuICAgICAgfSxcblxuICAgIH1cbiAgfSlcblxuICBjb25zdCB1c2VyID0gcmVxLnVzZXI7XG4gIHVzZXIuY2hhbm5lbHMgPSBjaGFubmVsc1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlciB9KTtcbn1cblxuZnVuY3Rpb24gc2lnbm91dChyZXEsIHJlcykge1xuICByZXMuY2xlYXJDb29raWUoJ3Rva2VuJylcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe30pXG59XG5cbmV4cG9ydCB7IGdldEF1dGhSb3V0ZXMgfTsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "client",
        "OAuth2Client",
        "process",
        "env",
        "GOOGLE_CLIENT_ID",
        "prisma",
        "PrismaClient",
        "getAuthRoutes",
        "router",
        "express",
        "Router",
        "post",
        "googleLogin",
        "get",
        "protect",
        "me",
        "signout",
        "req",
        "res",
        "idToken",
        "body",
        "ticket",
        "verifyIdToken",
        "audience",
        "name",
        "picture",
        "email",
        "getPayload",
        "user",
        "findUnique",
        "where",
        "create",
        "data",
        "username",
        "avatar",
        "tokenPlayload",
        "id",
        "token",
        "jwt",
        "sign",
        "JWT_SECRET",
        "expiresIn",
        "JWT_EXPIRE",
        "cookie",
        "httpOnly",
        "status",
        "send",
        "subscribtions",
        "subscription",
        "findMany",
        "subscriberId",
        "equals",
        "channelIds",
        "map",
        "sub",
        "subscribedToId",
        "channels",
        "in",
        "json",
        "clearCookie"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express, { response } from \"express\";\nimport { PrismaClient } from '@prisma/client'\nimport jwt from \"jsonwebtoken\";\nimport { protect } from \"../middleware/authorization\";\nimport { OAuth2Client } from \"google-auth-library\";\n\nconst client = new OAuth2Client(process.env.GOOGLE_CLIENT_ID)\n\n// A function to get the routes.\n// All route definitions are in one place and we only need to export one thing\n\nconst prisma = new PrismaClient()\nfunction getAuthRoutes() {\n  const router = express.Router();\n\n  router.post('/google-login', googleLogin)\n  router.get('/me', protect, me)\n  router.get('/signout', signout)\n\n\n  return router;\n}\n\n// All controllers/utility functions here\nasync function googleLogin(req, res) {\n\n  const { idToken } = req.body\n  const ticket = await client.verifyIdToken({\n    idToken,\n    audience: process.env.GOOGLE_CLIENT_ID\n  })\n\n  const { name, picture, email } = ticket.getPayload();\n\n  let user = await prisma.user.findUnique({\n    where: {\n      email\n    }\n  })\n\n  if (!user) {\n    user = await prisma.user.create({\n      data: {\n        email,\n        username: name,\n        avatar: picture\n      }\n    })\n  }\n\n  const tokenPlayload = { id: user.id }\n  const token = jwt.sign(tokenPlayload, process.env.JWT_SECRET, {\n    expiresIn: process.env.JWT_EXPIRE\n  })\n\n  res.cookie(\"token\", token, { httpOnly: true })\n  res.status(200).send(token)\n}\n\nasync function me(req, res) {\n  const subscribtions = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      }\n    }\n  })\n  const channelIds = subscribtions.map(sub => sub.subscribedToId)\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        in: channelIds,\n      },\n\n    }\n  })\n\n  const user = req.user;\n  user.channels = channels\n\n  res.status(200).json({ user });\n}\n\nfunction signout(req, res) {\n  res.clearCookie('token')\n  res.status(200).json({})\n}\n\nexport { getAuthRoutes };"
      ]
    },
    "sourceType": "script",
    "mtime": 1635577147390
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/authorization.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/authorization.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/authorization.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/authorization.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/",
        "sourceFileName": "authorization.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAuthUser = getAuthUser;\nexports.protect = protect;\n\nvar _client = require(\"@prisma/client\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst prisma = new _client.PrismaClient();\n\nasync function getAuthUser(req, res, next) {\n  if (!req.cookies.token) {\n    console.log(\"NullllllllllllLLŁ\");\n    req.user = null;\n    return next();\n  }\n\n  try {\n    const token = req.cookies.token;\n\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n      include: {\n        videos: true\n      }\n    });\n    req.user = user;\n    next();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function protect(req, res, next) {\n  if (!req.cookies.token) {\n    return next({\n      message: \"You need to be logled in berfore you can visit! in protect\",\n      statusCode: 401\n    });\n  }\n\n  try {\n    const token = req.cookies.token;\n\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n\n    console.log(decoded);\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      }\n    });\n    req.user = user;\n    next();\n  } catch (error) {\n    next({\n      message: \"You have to be logged in ::: \" + req.cookies.token + error,\n      statusCode: 401\n    });\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcml6YXRpb24uanMiXSwibmFtZXMiOlsicHJpc21hIiwiUHJpc21hQ2xpZW50IiwiZ2V0QXV0aFVzZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiY29va2llcyIsInRva2VuIiwiY29uc29sZSIsImxvZyIsInVzZXIiLCJkZWNvZGVkIiwiand0IiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpZCIsImluY2x1ZGUiLCJ2aWRlb3MiLCJlcnJvciIsInByb3RlY3QiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFJQyxvQkFBSixFQUFmOztBQUVPLGVBQWVDLFdBQWYsQ0FBMkJDLEdBQTNCLEVBQWdDQyxHQUFoQyxFQUFxQ0MsSUFBckMsRUFBMkM7QUFDaEQsTUFBSSxDQUFDRixHQUFHLENBQUNHLE9BQUosQ0FBWUMsS0FBakIsRUFBd0I7QUFDdEJDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLG1CQUFaO0FBQ0FOLElBQUFBLEdBQUcsQ0FBQ08sSUFBSixHQUFXLElBQVg7QUFDQSxXQUFPTCxJQUFJLEVBQVg7QUFDRDs7QUFFRCxNQUFJO0FBQ0YsVUFBTUUsS0FBSyxHQUFHSixHQUFHLENBQUNHLE9BQUosQ0FBWUMsS0FBMUI7O0FBQ0EsVUFBTUksT0FBTyxHQUFHQyxzQkFBSUMsTUFBSixDQUFXTixLQUFYLEVBQWtCTyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUIsQ0FBaEI7O0FBRUEsVUFBTU4sSUFBSSxHQUFHLE1BQU1WLE1BQU0sQ0FBQ1UsSUFBUCxDQUFZTyxVQUFaLENBQXVCO0FBQ3hDQyxNQUFBQSxLQUFLLEVBQUU7QUFDTEMsUUFBQUEsRUFBRSxFQUFFUixPQUFPLENBQUNRO0FBRFAsT0FEaUM7QUFJeENDLE1BQUFBLE9BQU8sRUFBRTtBQUNQQyxRQUFBQSxNQUFNLEVBQUU7QUFERDtBQUorQixLQUF2QixDQUFuQjtBQVNBbEIsSUFBQUEsR0FBRyxDQUFDTyxJQUFKLEdBQVdBLElBQVg7QUFDQUwsSUFBQUEsSUFBSTtBQUNMLEdBZkQsQ0FlRSxPQUFPaUIsS0FBUCxFQUFjO0FBQ2RkLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZYSxLQUFaO0FBQ0Q7QUFDRjs7QUFFTSxlQUFlQyxPQUFmLENBQXVCcEIsR0FBdkIsRUFBNEJDLEdBQTVCLEVBQWlDQyxJQUFqQyxFQUF1QztBQUU1QyxNQUFJLENBQUNGLEdBQUcsQ0FBQ0csT0FBSixDQUFZQyxLQUFqQixFQUF3QjtBQUN0QixXQUFPRixJQUFJLENBQUM7QUFDVm1CLE1BQUFBLE9BQU8sRUFBRSw0REFEQztBQUVWQyxNQUFBQSxVQUFVLEVBQUU7QUFGRixLQUFELENBQVg7QUFLRDs7QUFFRCxNQUFJO0FBQ0YsVUFBTWxCLEtBQUssR0FBR0osR0FBRyxDQUFDRyxPQUFKLENBQVlDLEtBQTFCOztBQUNBLFVBQU1JLE9BQU8sR0FBR0Msc0JBQUlDLE1BQUosQ0FBV04sS0FBWCxFQUFrQk8sT0FBTyxDQUFDQyxHQUFSLENBQVlDLFVBQTlCLENBQWhCOztBQUVBUixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUUsT0FBWjtBQUNBLFVBQU1ELElBQUksR0FBRyxNQUFNVixNQUFNLENBQUNVLElBQVAsQ0FBWU8sVUFBWixDQUF1QjtBQUN4Q0MsTUFBQUEsS0FBSyxFQUFFO0FBQ0xDLFFBQUFBLEVBQUUsRUFBRVIsT0FBTyxDQUFDUTtBQURQO0FBRGlDLEtBQXZCLENBQW5CO0FBTUFoQixJQUFBQSxHQUFHLENBQUNPLElBQUosR0FBV0EsSUFBWDtBQUNBTCxJQUFBQSxJQUFJO0FBQ0wsR0FiRCxDQWFFLE9BQU9pQixLQUFQLEVBQWM7QUFDZGpCLElBQUFBLElBQUksQ0FBQztBQUNIbUIsTUFBQUEsT0FBTyxFQUFFLGtDQUFrQ3JCLEdBQUcsQ0FBQ0csT0FBSixDQUFZQyxLQUE5QyxHQUFzRGUsS0FENUQ7QUFFSEcsTUFBQUEsVUFBVSxFQUFFO0FBRlQsS0FBRCxDQUFKO0FBS0Q7QUFDRiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9yZWVkYmFyZ2VyLXlvdXR1YmUtcmVhY3QvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvbWlkZGxld2FyZS8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJ1xuXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdXRoVXNlcihyZXEsIHJlcywgbmV4dCkge1xuICBpZiAoIXJlcS5jb29raWVzLnRva2VuKSB7XG4gICAgY29uc29sZS5sb2coXCJOdWxsbGxsbGxsbGxsbExMxYFcIilcbiAgICByZXEudXNlciA9IG51bGxcbiAgICByZXR1cm4gbmV4dCgpXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMudG9rZW5cbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVClcblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkOiBkZWNvZGVkLmlkXG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICB2aWRlb3M6IHRydWVcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmVxLnVzZXIgPSB1c2VyO1xuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvdGVjdChyZXEsIHJlcywgbmV4dCkge1xuXG4gIGlmICghcmVxLmNvb2tpZXMudG9rZW4pIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIllvdSBuZWVkIHRvIGJlIGxvZ2xlZCBpbiBiZXJmb3JlIHlvdSBjYW4gdmlzaXQhIGluIHByb3RlY3RcIixcbiAgICAgIHN0YXR1c0NvZGU6IDQwMVxuXG4gICAgfSlcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy50b2tlbjtcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVClcblxuICAgIGNvbnNvbGUubG9nKGRlY29kZWQpXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQ6IGRlY29kZWQuaWRcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIHJlcS51c2VyID0gdXNlclxuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBuZXh0KHtcbiAgICAgIG1lc3NhZ2U6IFwiWW91IGhhdmUgdG8gYmUgbG9nZ2VkIGluIDo6OiBcIiArIHJlcS5jb29raWVzLnRva2VuICsgZXJyb3IsXG4gICAgICBzdGF0dXNDb2RlOiA0MDEsXG5cbiAgICB9KVxuICB9XG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "authorization.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getAuthUser",
        "req",
        "res",
        "next",
        "cookies",
        "token",
        "console",
        "log",
        "user",
        "decoded",
        "jwt",
        "verify",
        "process",
        "env",
        "JWT_SECRET",
        "findUnique",
        "where",
        "id",
        "include",
        "videos",
        "error",
        "protect",
        "message",
        "statusCode"
      ],
      "mappings": ";;;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,oBAAJ,EAAf;;AAEO,eAAeC,WAAf,CAA2BC,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C;AAChD,MAAI,CAACF,GAAG,CAACG,OAAJ,CAAYC,KAAjB,EAAwB;AACtBC,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAN,IAAAA,GAAG,CAACO,IAAJ,GAAW,IAAX;AACA,WAAOL,IAAI,EAAX;AACD;;AAED,MAAI;AACF,UAAME,KAAK,GAAGJ,GAAG,CAACG,OAAJ,CAAYC,KAA1B;;AACA,UAAMI,OAAO,GAAGC,sBAAIC,MAAJ,CAAWN,KAAX,EAAkBO,OAAO,CAACC,GAAR,CAAYC,UAA9B,CAAhB;;AAEA,UAAMN,IAAI,GAAG,MAAMV,MAAM,CAACU,IAAP,CAAYO,UAAZ,CAAuB;AACxCC,MAAAA,KAAK,EAAE;AACLC,QAAAA,EAAE,EAAER,OAAO,CAACQ;AADP,OADiC;AAIxCC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE;AADD;AAJ+B,KAAvB,CAAnB;AASAlB,IAAAA,GAAG,CAACO,IAAJ,GAAWA,IAAX;AACAL,IAAAA,IAAI;AACL,GAfD,CAeE,OAAOiB,KAAP,EAAc;AACdd,IAAAA,OAAO,CAACC,GAAR,CAAYa,KAAZ;AACD;AACF;;AAEM,eAAeC,OAAf,CAAuBpB,GAAvB,EAA4BC,GAA5B,EAAiCC,IAAjC,EAAuC;AAE5C,MAAI,CAACF,GAAG,CAACG,OAAJ,CAAYC,KAAjB,EAAwB;AACtB,WAAOF,IAAI,CAAC;AACVmB,MAAAA,OAAO,EAAE,4DADC;AAEVC,MAAAA,UAAU,EAAE;AAFF,KAAD,CAAX;AAKD;;AAED,MAAI;AACF,UAAMlB,KAAK,GAAGJ,GAAG,CAACG,OAAJ,CAAYC,KAA1B;;AACA,UAAMI,OAAO,GAAGC,sBAAIC,MAAJ,CAAWN,KAAX,EAAkBO,OAAO,CAACC,GAAR,CAAYC,UAA9B,CAAhB;;AAEAR,IAAAA,OAAO,CAACC,GAAR,CAAYE,OAAZ;AACA,UAAMD,IAAI,GAAG,MAAMV,MAAM,CAACU,IAAP,CAAYO,UAAZ,CAAuB;AACxCC,MAAAA,KAAK,EAAE;AACLC,QAAAA,EAAE,EAAER,OAAO,CAACQ;AADP;AADiC,KAAvB,CAAnB;AAMAhB,IAAAA,GAAG,CAACO,IAAJ,GAAWA,IAAX;AACAL,IAAAA,IAAI;AACL,GAbD,CAaE,OAAOiB,KAAP,EAAc;AACdjB,IAAAA,IAAI,CAAC;AACHmB,MAAAA,OAAO,EAAE,kCAAkCrB,GAAG,CAACG,OAAJ,CAAYC,KAA9C,GAAsDe,KAD5D;AAEHG,MAAAA,UAAU,EAAE;AAFT,KAAD,CAAJ;AAKD;AACF",
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/",
      "sourcesContent": [
        "import { PrismaClient } from \"@prisma/client\";\nimport jwt from 'jsonwebtoken'\n\nconst prisma = new PrismaClient();\n\nexport async function getAuthUser(req, res, next) {\n  if (!req.cookies.token) {\n    console.log(\"NullllllllllllLLŁ\")\n    req.user = null\n    return next()\n  }\n\n  try {\n    const token = req.cookies.token\n    const decoded = jwt.verify(token, process.env.JWT_SECRET)\n\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n      include: {\n        videos: true\n      }\n    })\n\n    req.user = user;\n    next();\n  } catch (error) {\n    console.log(error)\n  }\n}\n\nexport async function protect(req, res, next) {\n\n  if (!req.cookies.token) {\n    return next({\n      message: \"You need to be logled in berfore you can visit! in protect\",\n      statusCode: 401\n\n    })\n  }\n\n  try {\n    const token = req.cookies.token;\n    const decoded = jwt.verify(token, process.env.JWT_SECRET)\n\n    console.log(decoded)\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n    })\n\n    req.user = user\n    next();\n  } catch (error) {\n    next({\n      message: \"You have to be logged in ::: \" + req.cookies.token + error,\n      statusCode: 401,\n\n    })\n  }\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1635896188468
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/user.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/user.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUserRoutes = getUserRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _client = require(\"@prisma/client\");\n\nvar _authorization = require(\"../middleware/authorization\");\n\nvar _video = require(\"./video\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst prisma = new _client.PrismaClient();\n\nfunction getUserRoutes() {\n  const router = _express.default.Router();\n\n  router.get('/', _authorization.protect, getRecommendedChannels);\n  router.put('/', _authorization.protect, editUser);\n  router.get('/liked-videos', _authorization.protect, getLikedVideos);\n  router.get('/history', _authorization.protect, getHistory);\n  router.get('/subscriptions', _authorization.protect, getFeed);\n  router.get('/search', _authorization.getAuthUser, searchUser);\n  router.get('/:userId', _authorization.getAuthUser, getProfile);\n  router.get('/:userId/toggle-subscribe', _authorization.protect, toggleSubscribe);\n  return router;\n}\n\nasync function getLikedVideos(req, res) {\n  await getVideos(prisma.videoLike, req, res);\n}\n\nasync function getHistory(req, res, next) {\n  await getVideos(prisma.view, req, res);\n}\n\nasync function getVideos(model, req, res) {\n  const videoRelations = await model.findMany({\n    where: {\n      userId: req.user.id\n    },\n    orderBy: {\n      createdAt: 'desc'\n    }\n  });\n  const VideoIds = videoRelations.map(videoLike => videoLike.videoId);\n  let videos = await prisma.video.findMany({\n    where: {\n      id: {\n        in: VideoIds\n      }\n    },\n    include: {\n      user: true\n    }\n  });\n  console.log(\"Befor if check\", videos);\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await (0, _video.getVideoViews)(videos);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function toggleSubscribe(req, res, next) {\n  if (req.user.id === req.params.userId) {\n    return next({\n      message: \"You can`t subscribe to your own channel\",\n      statusCode: 400\n    });\n  }\n\n  const user = await prisma.user.findUnique({\n    where: {\n      id: req.params.userId\n    }\n  });\n\n  if (!user) {\n    return next({\n      message: \"User with this Id doesn`t excist\",\n      statusCode: 404\n    });\n  }\n\n  const isSubscribed = await prisma.subscription.findFirst({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      },\n      subscribedToId: {\n        equals: req.params.userId\n      }\n    }\n  });\n\n  if (isSubscribed) {\n    await prisma.subscription.delete({\n      where: {\n        id: isSubscribed.id\n      }\n    });\n  } else {\n    await prisma.subscription.create({\n      data: {\n        subscriber: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        subscribedTo: {\n          connect: {\n            id: req.params.userId\n          }\n        }\n      }\n    });\n  }\n\n  res.status(200).json({});\n}\n\nasync function getFeed(req, res) {\n  const subscribedTo = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      }\n    }\n  });\n  const subscribtions = subscribedTo.map(sub => sub.subscribedToId);\n  const feed = await prisma.video.findMany({\n    where: {\n      userId: {\n        in: subscribtions\n      }\n    },\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n\n  if (!feed.length) {\n    console.log(\"inside\");\n    return res.status(200).json({\n      feed\n    });\n  }\n\n  const feedVideos = await (0, _video.getVideoViews)(feed);\n  console.log(\"outside\");\n  res.status(200).json({\n    feed: feedVideos\n  });\n}\n\nasync function searchUser(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      message: \"Please enter search query\",\n      statusCode: 400\n    });\n  }\n\n  const users = await prisma.user.findMany({\n    where: {\n      username: {\n        contains: req.query.query,\n        mode: \"insensitive\"\n      }\n    }\n  });\n\n  if (!users.length) {\n    return res.status(200).json({\n      users\n    });\n  }\n\n  for (const user of users) {\n    const subscribersCount = await prisma.subscription.count({\n      where: {\n        subscribedToId: {\n          equals: user.id\n        }\n      }\n    });\n    const videoCount = await prisma.video.count({\n      where: {\n        userId: user.id\n      }\n    });\n    let isMe = false;\n    let isSubscribed = false;\n\n    if (req.user) {\n      isMe = req.user.id === user.id;\n      isSubscribed = await prisma.subscription.findFirst({\n        where: {\n          AND: {\n            subscriberId: {\n              equals: req.user.id\n            },\n            subscribedToId: {\n              equals: user.id\n            }\n          }\n        }\n      });\n    }\n\n    user.subscribersCount = subscribersCount;\n    user.videoCount = videoCount;\n    user.isSubscribed = Boolean(isSubscribed);\n    user.isMe = isMe;\n  }\n\n  res.status(200).json({\n    users\n  });\n}\n\nasync function getRecommendedChannels(req, res) {\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        not: req.user.id\n      }\n    },\n    take: 10\n  });\n\n  if (!channels.length) {\n    return res.status(200).json({\n      channels\n    });\n  }\n\n  for (const channel of channels) {\n    const subscribersCount = await prisma.subscription.count({\n      where: {\n        subscribedToId: {\n          equals: channel.id\n        }\n      }\n    });\n    const videoCount = await prisma.video.count({\n      where: {\n        userId: channel.id\n      }\n    });\n    const isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        AND: {\n          subscriberId: {\n            equals: req.user.id\n          },\n          subscribedToId: {\n            equals: channel.id\n          }\n        }\n      }\n    });\n    channel.subscribersCount = subscribersCount;\n    channel.videoCount = videoCount;\n    channel.isSubscribed = Boolean(isSubscribed);\n  }\n\n  return res.status(200).json({\n    channels\n  });\n}\n\nasync function getProfile(req, res, next) {\n  const user = await prisma.user.findUnique({\n    where: {\n      id: req.params.userId\n    }\n  });\n\n  if (!user) {\n    return next({\n      message: `No user found with id: ${req.params.userId}`,\n      statusCode: 404\n    });\n  }\n\n  const subscribersCount = await prisma.subscription.count({\n    where: {\n      subscribedToId: {\n        equals: user.id\n      }\n    }\n  });\n  let isMe = false;\n  let isSubscribed = false;\n\n  if (req.user) {\n    isMe = req.user.id === user.id;\n    isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        AND: {\n          subscriberId: {\n            equals: req.user.id\n          },\n          subscribedToId: {\n            equals: user.id\n          }\n        }\n      }\n    });\n  }\n\n  const subscribedTo = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: user.id\n      }\n    }\n  });\n  const subscribtions = subscribedTo.map(sub => sub.subscribedToId);\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        in: subscribtions\n      }\n    }\n  });\n\n  for (const channel of channels) {\n    const subscribersCount = await prisma.subscribtion.count({\n      where: {\n        subscribedToId: {\n          equals: channel.id\n        }\n      }\n    });\n    channel.subscribersCount = subscribersCount;\n  }\n\n  const videos = await prisma.video.findMany({\n    where: {\n      userId: {\n        equals: user.id\n      }\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n  user.subscribtionCount = subscribersCount;\n  user.isSubscribed = Boolean(isSubscribed);\n  user.isMe = isMe;\n  user.channels = channels;\n  user.videos = videos;\n\n  if (!videos.length) {\n    return res.status(200).json({\n      user\n    });\n  }\n\n  user.videos = await (0, _video.getVideoViews)(videos);\n  res.status(200).json({\n    user\n  });\n}\n\nasync function editUser(req, res) {\n  const {\n    username,\n    cover,\n    avatar,\n    about\n  } = req.body;\n  const user = await prisma.user.update({\n    where: {\n      id: req.user.id\n    },\n    data: {\n      username,\n      cover,\n      avatar,\n      about\n    }\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsicHJpc21hIiwiUHJpc21hQ2xpZW50IiwiZ2V0VXNlclJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJwcm90ZWN0IiwiZ2V0UmVjb21tZW5kZWRDaGFubmVscyIsInB1dCIsImVkaXRVc2VyIiwiZ2V0TGlrZWRWaWRlb3MiLCJnZXRIaXN0b3J5IiwiZ2V0RmVlZCIsImdldEF1dGhVc2VyIiwic2VhcmNoVXNlciIsImdldFByb2ZpbGUiLCJ0b2dnbGVTdWJzY3JpYmUiLCJyZXEiLCJyZXMiLCJnZXRWaWRlb3MiLCJ2aWRlb0xpa2UiLCJuZXh0IiwidmlldyIsIm1vZGVsIiwidmlkZW9SZWxhdGlvbnMiLCJmaW5kTWFueSIsIndoZXJlIiwidXNlcklkIiwidXNlciIsImlkIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsIlZpZGVvSWRzIiwibWFwIiwidmlkZW9JZCIsInZpZGVvcyIsInZpZGVvIiwiaW4iLCJpbmNsdWRlIiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsInN0YXR1cyIsImpzb24iLCJwYXJhbXMiLCJtZXNzYWdlIiwic3RhdHVzQ29kZSIsImZpbmRVbmlxdWUiLCJpc1N1YnNjcmliZWQiLCJzdWJzY3JpcHRpb24iLCJmaW5kRmlyc3QiLCJzdWJzY3JpYmVySWQiLCJlcXVhbHMiLCJzdWJzY3JpYmVkVG9JZCIsImRlbGV0ZSIsImNyZWF0ZSIsImRhdGEiLCJzdWJzY3JpYmVyIiwiY29ubmVjdCIsInN1YnNjcmliZWRUbyIsInN1YnNjcmlidGlvbnMiLCJzdWIiLCJmZWVkIiwiZmVlZFZpZGVvcyIsInF1ZXJ5IiwidXNlcnMiLCJ1c2VybmFtZSIsImNvbnRhaW5zIiwibW9kZSIsInN1YnNjcmliZXJzQ291bnQiLCJjb3VudCIsInZpZGVvQ291bnQiLCJpc01lIiwiQU5EIiwiQm9vbGVhbiIsImNoYW5uZWxzIiwibm90IiwidGFrZSIsImNoYW5uZWwiLCJzdWJzY3JpYnRpb24iLCJzdWJzY3JpYnRpb25Db3VudCIsImNvdmVyIiwiYXZhdGFyIiwiYWJvdXQiLCJib2R5IiwidXBkYXRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBSUMsb0JBQUosRUFBZjs7QUFFQSxTQUFTQyxhQUFULEdBQXlCO0FBQ3ZCLFFBQU1DLE1BQU0sR0FBR0MsaUJBQVFDLE1BQVIsRUFBZjs7QUFFQUYsRUFBQUEsTUFBTSxDQUFDRyxHQUFQLENBQVcsR0FBWCxFQUFnQkMsc0JBQWhCLEVBQXlCQyxzQkFBekI7QUFDQUwsRUFBQUEsTUFBTSxDQUFDTSxHQUFQLENBQVcsR0FBWCxFQUFnQkYsc0JBQWhCLEVBQXlCRyxRQUF6QjtBQUVBUCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxlQUFYLEVBQTRCQyxzQkFBNUIsRUFBcUNJLGNBQXJDO0FBQ0FSLEVBQUFBLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLFVBQVgsRUFBdUJDLHNCQUF2QixFQUFnQ0ssVUFBaEM7QUFDQVQsRUFBQUEsTUFBTSxDQUFDRyxHQUFQLENBQVcsZ0JBQVgsRUFBNkJDLHNCQUE3QixFQUFzQ00sT0FBdEM7QUFDQVYsRUFBQUEsTUFBTSxDQUFDRyxHQUFQLENBQVcsU0FBWCxFQUFzQlEsMEJBQXRCLEVBQW1DQyxVQUFuQztBQUVBWixFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxVQUFYLEVBQXVCUSwwQkFBdkIsRUFBb0NFLFVBQXBDO0FBQ0FiLEVBQUFBLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLDJCQUFYLEVBQXdDQyxzQkFBeEMsRUFBaURVLGVBQWpEO0FBRUEsU0FBT2QsTUFBUDtBQUNEOztBQUVELGVBQWVRLGNBQWYsQ0FBOEJPLEdBQTlCLEVBQW1DQyxHQUFuQyxFQUF3QztBQUN0QyxRQUFNQyxTQUFTLENBQUNwQixNQUFNLENBQUNxQixTQUFSLEVBQW1CSCxHQUFuQixFQUF3QkMsR0FBeEIsQ0FBZjtBQUNEOztBQUNELGVBQWVQLFVBQWYsQ0FBMEJNLEdBQTFCLEVBQStCQyxHQUEvQixFQUFvQ0csSUFBcEMsRUFBMEM7QUFDeEMsUUFBTUYsU0FBUyxDQUFDcEIsTUFBTSxDQUFDdUIsSUFBUixFQUFjTCxHQUFkLEVBQW1CQyxHQUFuQixDQUFmO0FBRUQ7O0FBRUQsZUFBZUMsU0FBZixDQUF5QkksS0FBekIsRUFBZ0NOLEdBQWhDLEVBQXFDQyxHQUFyQyxFQUEwQztBQUN4QyxRQUFNTSxjQUFjLEdBQUcsTUFBTUQsS0FBSyxDQUFDRSxRQUFOLENBQWU7QUFDMUNDLElBQUFBLEtBQUssRUFBRTtBQUNMQyxNQUFBQSxNQUFNLEVBQUVWLEdBQUcsQ0FBQ1csSUFBSixDQUFTQztBQURaLEtBRG1DO0FBSTFDQyxJQUFBQSxPQUFPLEVBQUU7QUFDUEMsTUFBQUEsU0FBUyxFQUFFO0FBREo7QUFKaUMsR0FBZixDQUE3QjtBQVNBLFFBQU1DLFFBQVEsR0FBR1IsY0FBYyxDQUFDUyxHQUFmLENBQW9CYixTQUFELElBQWVBLFNBQVMsQ0FBQ2MsT0FBNUMsQ0FBakI7QUFFQSxNQUFJQyxNQUFNLEdBQUcsTUFBTXBDLE1BQU0sQ0FBQ3FDLEtBQVAsQ0FBYVgsUUFBYixDQUFzQjtBQUN2Q0MsSUFBQUEsS0FBSyxFQUFFO0FBQ0xHLE1BQUFBLEVBQUUsRUFBRTtBQUNGUSxRQUFBQSxFQUFFLEVBQUVMO0FBREY7QUFEQyxLQURnQztBQU12Q00sSUFBQUEsT0FBTyxFQUFFO0FBQ1BWLE1BQUFBLElBQUksRUFBRTtBQURDO0FBTjhCLEdBQXRCLENBQW5CO0FBVUFXLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGdCQUFaLEVBQThCTCxNQUE5Qjs7QUFDQSxNQUFJLENBQUNBLE1BQU0sQ0FBQ00sTUFBWixFQUFvQjtBQUNsQixXQUFPdkIsR0FBRyxDQUFDd0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVSLE1BQUFBO0FBQUYsS0FBckIsQ0FBUDtBQUNEOztBQUVEQSxFQUFBQSxNQUFNLEdBQUcsTUFBTSwwQkFBY0EsTUFBZCxDQUFmO0FBRUFqQixFQUFBQSxHQUFHLENBQUN3QixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRVIsSUFBQUE7QUFBRixHQUFyQjtBQUNEOztBQUVELGVBQWVuQixlQUFmLENBQStCQyxHQUEvQixFQUFvQ0MsR0FBcEMsRUFBeUNHLElBQXpDLEVBQStDO0FBQzdDLE1BQUlKLEdBQUcsQ0FBQ1csSUFBSixDQUFTQyxFQUFULEtBQWdCWixHQUFHLENBQUMyQixNQUFKLENBQVdqQixNQUEvQixFQUF1QztBQUNyQyxXQUFPTixJQUFJLENBQUM7QUFDVndCLE1BQUFBLE9BQU8sRUFBRSx5Q0FEQztBQUVWQyxNQUFBQSxVQUFVLEVBQUU7QUFGRixLQUFELENBQVg7QUFJRDs7QUFFRCxRQUFNbEIsSUFBSSxHQUFHLE1BQU03QixNQUFNLENBQUM2QixJQUFQLENBQVltQixVQUFaLENBQXVCO0FBQ3hDckIsSUFBQUEsS0FBSyxFQUFFO0FBQ0xHLE1BQUFBLEVBQUUsRUFBRVosR0FBRyxDQUFDMkIsTUFBSixDQUFXakI7QUFEVjtBQURpQyxHQUF2QixDQUFuQjs7QUFNQSxNQUFJLENBQUNDLElBQUwsRUFBVztBQUNULFdBQU9QLElBQUksQ0FBQztBQUNWd0IsTUFBQUEsT0FBTyxFQUFFLGtDQURDO0FBRVZDLE1BQUFBLFVBQVUsRUFBRTtBQUZGLEtBQUQsQ0FBWDtBQUlEOztBQUVELFFBQU1FLFlBQVksR0FBRyxNQUFNakQsTUFBTSxDQUFDa0QsWUFBUCxDQUFvQkMsU0FBcEIsQ0FBOEI7QUFDdkR4QixJQUFBQSxLQUFLLEVBQUU7QUFDTHlCLE1BQUFBLFlBQVksRUFBRTtBQUNaQyxRQUFBQSxNQUFNLEVBQUVuQyxHQUFHLENBQUNXLElBQUosQ0FBU0M7QUFETCxPQURUO0FBSUx3QixNQUFBQSxjQUFjLEVBQUU7QUFDZEQsUUFBQUEsTUFBTSxFQUFFbkMsR0FBRyxDQUFDMkIsTUFBSixDQUFXakI7QUFETDtBQUpYO0FBRGdELEdBQTlCLENBQTNCOztBQVdBLE1BQUlxQixZQUFKLEVBQWtCO0FBQ2hCLFVBQU1qRCxNQUFNLENBQUNrRCxZQUFQLENBQW9CSyxNQUFwQixDQUEyQjtBQUMvQjVCLE1BQUFBLEtBQUssRUFBRTtBQUNMRyxRQUFBQSxFQUFFLEVBQUVtQixZQUFZLENBQUNuQjtBQURaO0FBRHdCLEtBQTNCLENBQU47QUFLRCxHQU5ELE1BTU87QUFDTCxVQUFNOUIsTUFBTSxDQUFDa0QsWUFBUCxDQUFvQk0sTUFBcEIsQ0FBMkI7QUFDL0JDLE1BQUFBLElBQUksRUFBRTtBQUNKQyxRQUFBQSxVQUFVLEVBQUU7QUFDVkMsVUFBQUEsT0FBTyxFQUFFO0FBQ1A3QixZQUFBQSxFQUFFLEVBQUVaLEdBQUcsQ0FBQ1csSUFBSixDQUFTQztBQUROO0FBREMsU0FEUjtBQU1KOEIsUUFBQUEsWUFBWSxFQUFFO0FBQ1pELFVBQUFBLE9BQU8sRUFBRTtBQUNQN0IsWUFBQUEsRUFBRSxFQUFFWixHQUFHLENBQUMyQixNQUFKLENBQVdqQjtBQURSO0FBREc7QUFOVjtBQUR5QixLQUEzQixDQUFOO0FBY0Q7O0FBRURULEVBQUFBLEdBQUcsQ0FBQ3dCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixFQUFyQjtBQUVEOztBQUVELGVBQWUvQixPQUFmLENBQXVCSyxHQUF2QixFQUE0QkMsR0FBNUIsRUFBaUM7QUFDL0IsUUFBTXlDLFlBQVksR0FBRyxNQUFNNUQsTUFBTSxDQUFDa0QsWUFBUCxDQUFvQnhCLFFBQXBCLENBQTZCO0FBQ3REQyxJQUFBQSxLQUFLLEVBQUU7QUFDTHlCLE1BQUFBLFlBQVksRUFBRTtBQUNaQyxRQUFBQSxNQUFNLEVBQUVuQyxHQUFHLENBQUNXLElBQUosQ0FBU0M7QUFETDtBQURUO0FBRCtDLEdBQTdCLENBQTNCO0FBUUEsUUFBTStCLGFBQWEsR0FBR0QsWUFBWSxDQUFDMUIsR0FBYixDQUFpQjRCLEdBQUcsSUFBSUEsR0FBRyxDQUFDUixjQUE1QixDQUF0QjtBQUVBLFFBQU1TLElBQUksR0FBRyxNQUFNL0QsTUFBTSxDQUFDcUMsS0FBUCxDQUFhWCxRQUFiLENBQXNCO0FBQ3ZDQyxJQUFBQSxLQUFLLEVBQUU7QUFDTEMsTUFBQUEsTUFBTSxFQUFFO0FBQ05VLFFBQUFBLEVBQUUsRUFBRXVCO0FBREU7QUFESCxLQURnQztBQU12Q3RCLElBQUFBLE9BQU8sRUFBRTtBQUNQVixNQUFBQSxJQUFJLEVBQUU7QUFEQyxLQU44QjtBQVN2Q0UsSUFBQUEsT0FBTyxFQUFFO0FBQ1BDLE1BQUFBLFNBQVMsRUFBRTtBQURKO0FBVDhCLEdBQXRCLENBQW5COztBQWNBLE1BQUksQ0FBQytCLElBQUksQ0FBQ3JCLE1BQVYsRUFBa0I7QUFDaEJGLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFFBQVo7QUFDQSxXQUFPdEIsR0FBRyxDQUFDd0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVtQixNQUFBQTtBQUFGLEtBQXJCLENBQVA7QUFDRDs7QUFFRCxRQUFNQyxVQUFVLEdBQUcsTUFBTSwwQkFBY0QsSUFBZCxDQUF6QjtBQUNBdkIsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksU0FBWjtBQUNBdEIsRUFBQUEsR0FBRyxDQUFDd0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVtQixJQUFBQSxJQUFJLEVBQUVDO0FBQVIsR0FBckI7QUFDRDs7QUFFRCxlQUFlakQsVUFBZixDQUEwQkcsR0FBMUIsRUFBK0JDLEdBQS9CLEVBQW9DRyxJQUFwQyxFQUEwQztBQUN4QyxNQUFJLENBQUNKLEdBQUcsQ0FBQytDLEtBQUosQ0FBVUEsS0FBZixFQUFzQjtBQUNwQixXQUFPM0MsSUFBSSxDQUFDO0FBQ1Z3QixNQUFBQSxPQUFPLEVBQUUsMkJBREM7QUFFVkMsTUFBQUEsVUFBVSxFQUFFO0FBRkYsS0FBRCxDQUFYO0FBSUQ7O0FBRUQsUUFBTW1CLEtBQUssR0FBRyxNQUFNbEUsTUFBTSxDQUFDNkIsSUFBUCxDQUFZSCxRQUFaLENBQXFCO0FBQ3ZDQyxJQUFBQSxLQUFLLEVBQUU7QUFDTHdDLE1BQUFBLFFBQVEsRUFBRTtBQUNSQyxRQUFBQSxRQUFRLEVBQUVsRCxHQUFHLENBQUMrQyxLQUFKLENBQVVBLEtBRFo7QUFFUkksUUFBQUEsSUFBSSxFQUFFO0FBRkU7QUFETDtBQURnQyxHQUFyQixDQUFwQjs7QUFTQSxNQUFJLENBQUNILEtBQUssQ0FBQ3hCLE1BQVgsRUFBbUI7QUFDakIsV0FBT3ZCLEdBQUcsQ0FBQ3dCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFc0IsTUFBQUE7QUFBRixLQUFyQixDQUFQO0FBQ0Q7O0FBRUQsT0FBSyxNQUFNckMsSUFBWCxJQUFtQnFDLEtBQW5CLEVBQTBCO0FBQ3hCLFVBQU1JLGdCQUFnQixHQUFHLE1BQU10RSxNQUFNLENBQUNrRCxZQUFQLENBQW9CcUIsS0FBcEIsQ0FBMEI7QUFDdkQ1QyxNQUFBQSxLQUFLLEVBQUU7QUFDTDJCLFFBQUFBLGNBQWMsRUFBRTtBQUNkRCxVQUFBQSxNQUFNLEVBQUV4QixJQUFJLENBQUNDO0FBREM7QUFEWDtBQURnRCxLQUExQixDQUEvQjtBQVFBLFVBQU0wQyxVQUFVLEdBQUcsTUFBTXhFLE1BQU0sQ0FBQ3FDLEtBQVAsQ0FBYWtDLEtBQWIsQ0FBbUI7QUFDMUM1QyxNQUFBQSxLQUFLLEVBQUU7QUFDTEMsUUFBQUEsTUFBTSxFQUFFQyxJQUFJLENBQUNDO0FBRFI7QUFEbUMsS0FBbkIsQ0FBekI7QUFNQSxRQUFJMkMsSUFBSSxHQUFHLEtBQVg7QUFDQSxRQUFJeEIsWUFBWSxHQUFHLEtBQW5COztBQUVBLFFBQUkvQixHQUFHLENBQUNXLElBQVIsRUFBYztBQUNaNEMsTUFBQUEsSUFBSSxHQUFHdkQsR0FBRyxDQUFDVyxJQUFKLENBQVNDLEVBQVQsS0FBZ0JELElBQUksQ0FBQ0MsRUFBNUI7QUFFQW1CLE1BQUFBLFlBQVksR0FBRyxNQUFNakQsTUFBTSxDQUFDa0QsWUFBUCxDQUFvQkMsU0FBcEIsQ0FBOEI7QUFDakR4QixRQUFBQSxLQUFLLEVBQUU7QUFDTCtDLFVBQUFBLEdBQUcsRUFBRTtBQUNIdEIsWUFBQUEsWUFBWSxFQUFFO0FBQ1pDLGNBQUFBLE1BQU0sRUFBRW5DLEdBQUcsQ0FBQ1csSUFBSixDQUFTQztBQURMLGFBRFg7QUFJSHdCLFlBQUFBLGNBQWMsRUFBRTtBQUNkRCxjQUFBQSxNQUFNLEVBQUV4QixJQUFJLENBQUNDO0FBREM7QUFKYjtBQURBO0FBRDBDLE9BQTlCLENBQXJCO0FBWUQ7O0FBQ0RELElBQUFBLElBQUksQ0FBQ3lDLGdCQUFMLEdBQXdCQSxnQkFBeEI7QUFDQXpDLElBQUFBLElBQUksQ0FBQzJDLFVBQUwsR0FBa0JBLFVBQWxCO0FBQ0EzQyxJQUFBQSxJQUFJLENBQUNvQixZQUFMLEdBQW9CMEIsT0FBTyxDQUFDMUIsWUFBRCxDQUEzQjtBQUNBcEIsSUFBQUEsSUFBSSxDQUFDNEMsSUFBTCxHQUFZQSxJQUFaO0FBQ0Q7O0FBRUR0RCxFQUFBQSxHQUFHLENBQUN3QixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRXNCLElBQUFBO0FBQUYsR0FBckI7QUFFRDs7QUFFRCxlQUFlMUQsc0JBQWYsQ0FBc0NVLEdBQXRDLEVBQTJDQyxHQUEzQyxFQUFnRDtBQUM5QyxRQUFNeUQsUUFBUSxHQUFHLE1BQU01RSxNQUFNLENBQUM2QixJQUFQLENBQVlILFFBQVosQ0FBcUI7QUFDMUNDLElBQUFBLEtBQUssRUFBRTtBQUNMRyxNQUFBQSxFQUFFLEVBQUU7QUFDRitDLFFBQUFBLEdBQUcsRUFBRTNELEdBQUcsQ0FBQ1csSUFBSixDQUFTQztBQURaO0FBREMsS0FEbUM7QUFNMUNnRCxJQUFBQSxJQUFJLEVBQUU7QUFOb0MsR0FBckIsQ0FBdkI7O0FBU0EsTUFBSSxDQUFDRixRQUFRLENBQUNsQyxNQUFkLEVBQXNCO0FBQ3BCLFdBQU92QixHQUFHLENBQUN3QixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRWdDLE1BQUFBO0FBQUYsS0FBckIsQ0FBUDtBQUNEOztBQUVELE9BQUssTUFBTUcsT0FBWCxJQUFzQkgsUUFBdEIsRUFBZ0M7QUFDOUIsVUFBTU4sZ0JBQWdCLEdBQUcsTUFBTXRFLE1BQU0sQ0FBQ2tELFlBQVAsQ0FBb0JxQixLQUFwQixDQUEwQjtBQUN2RDVDLE1BQUFBLEtBQUssRUFBRTtBQUNMMkIsUUFBQUEsY0FBYyxFQUFFO0FBQ2RELFVBQUFBLE1BQU0sRUFBRTBCLE9BQU8sQ0FBQ2pEO0FBREY7QUFEWDtBQURnRCxLQUExQixDQUEvQjtBQVFBLFVBQU0wQyxVQUFVLEdBQUcsTUFBTXhFLE1BQU0sQ0FBQ3FDLEtBQVAsQ0FBYWtDLEtBQWIsQ0FBbUI7QUFDMUM1QyxNQUFBQSxLQUFLLEVBQUU7QUFDTEMsUUFBQUEsTUFBTSxFQUFFbUQsT0FBTyxDQUFDakQ7QUFEWDtBQURtQyxLQUFuQixDQUF6QjtBQU1BLFVBQU1tQixZQUFZLEdBQUcsTUFBTWpELE1BQU0sQ0FBQ2tELFlBQVAsQ0FBb0JDLFNBQXBCLENBQThCO0FBQ3ZEeEIsTUFBQUEsS0FBSyxFQUFFO0FBQ0wrQyxRQUFBQSxHQUFHLEVBQUU7QUFDSHRCLFVBQUFBLFlBQVksRUFBRTtBQUNaQyxZQUFBQSxNQUFNLEVBQUVuQyxHQUFHLENBQUNXLElBQUosQ0FBU0M7QUFETCxXQURYO0FBSUh3QixVQUFBQSxjQUFjLEVBQUU7QUFDZEQsWUFBQUEsTUFBTSxFQUFFMEIsT0FBTyxDQUFDakQ7QUFERjtBQUpiO0FBREE7QUFEZ0QsS0FBOUIsQ0FBM0I7QUFhQWlELElBQUFBLE9BQU8sQ0FBQ1QsZ0JBQVIsR0FBMkJBLGdCQUEzQjtBQUNBUyxJQUFBQSxPQUFPLENBQUNQLFVBQVIsR0FBcUJBLFVBQXJCO0FBQ0FPLElBQUFBLE9BQU8sQ0FBQzlCLFlBQVIsR0FBdUIwQixPQUFPLENBQUMxQixZQUFELENBQTlCO0FBQ0Q7O0FBRUQsU0FBTzlCLEdBQUcsQ0FBQ3dCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFZ0MsSUFBQUE7QUFBRixHQUFyQixDQUFQO0FBQ0Q7O0FBRUQsZUFBZTVELFVBQWYsQ0FBMEJFLEdBQTFCLEVBQStCQyxHQUEvQixFQUFvQ0csSUFBcEMsRUFBMEM7QUFDeEMsUUFBTU8sSUFBSSxHQUFHLE1BQU03QixNQUFNLENBQUM2QixJQUFQLENBQVltQixVQUFaLENBQXVCO0FBQ3hDckIsSUFBQUEsS0FBSyxFQUFFO0FBQ0xHLE1BQUFBLEVBQUUsRUFBRVosR0FBRyxDQUFDMkIsTUFBSixDQUFXakI7QUFEVjtBQURpQyxHQUF2QixDQUFuQjs7QUFNQSxNQUFJLENBQUNDLElBQUwsRUFBVztBQUNULFdBQU9QLElBQUksQ0FBQztBQUNWd0IsTUFBQUEsT0FBTyxFQUFHLDBCQUF5QjVCLEdBQUcsQ0FBQzJCLE1BQUosQ0FBV2pCLE1BQU8sRUFEM0M7QUFFVm1CLE1BQUFBLFVBQVUsRUFBRTtBQUZGLEtBQUQsQ0FBWDtBQUlEOztBQUVELFFBQU11QixnQkFBZ0IsR0FBRyxNQUFNdEUsTUFBTSxDQUFDa0QsWUFBUCxDQUFvQnFCLEtBQXBCLENBQTBCO0FBQ3ZENUMsSUFBQUEsS0FBSyxFQUFFO0FBQ0wyQixNQUFBQSxjQUFjLEVBQUU7QUFDZEQsUUFBQUEsTUFBTSxFQUFFeEIsSUFBSSxDQUFDQztBQURDO0FBRFg7QUFEZ0QsR0FBMUIsQ0FBL0I7QUFRQSxNQUFJMkMsSUFBSSxHQUFHLEtBQVg7QUFDQSxNQUFJeEIsWUFBWSxHQUFHLEtBQW5COztBQUVBLE1BQUkvQixHQUFHLENBQUNXLElBQVIsRUFBYztBQUNaNEMsSUFBQUEsSUFBSSxHQUFHdkQsR0FBRyxDQUFDVyxJQUFKLENBQVNDLEVBQVQsS0FBZ0JELElBQUksQ0FBQ0MsRUFBNUI7QUFFQW1CLElBQUFBLFlBQVksR0FBRyxNQUFNakQsTUFBTSxDQUFDa0QsWUFBUCxDQUFvQkMsU0FBcEIsQ0FBOEI7QUFDakR4QixNQUFBQSxLQUFLLEVBQUU7QUFDTCtDLFFBQUFBLEdBQUcsRUFBRTtBQUNIdEIsVUFBQUEsWUFBWSxFQUFFO0FBQ1pDLFlBQUFBLE1BQU0sRUFBRW5DLEdBQUcsQ0FBQ1csSUFBSixDQUFTQztBQURMLFdBRFg7QUFJSHdCLFVBQUFBLGNBQWMsRUFBRTtBQUNkRCxZQUFBQSxNQUFNLEVBQUV4QixJQUFJLENBQUNDO0FBREM7QUFKYjtBQURBO0FBRDBDLEtBQTlCLENBQXJCO0FBWUQ7O0FBRUQsUUFBTThCLFlBQVksR0FBRyxNQUFNNUQsTUFBTSxDQUFDa0QsWUFBUCxDQUFvQnhCLFFBQXBCLENBQTZCO0FBQ3REQyxJQUFBQSxLQUFLLEVBQUU7QUFDTHlCLE1BQUFBLFlBQVksRUFBRTtBQUNaQyxRQUFBQSxNQUFNLEVBQUV4QixJQUFJLENBQUNDO0FBREQ7QUFEVDtBQUQrQyxHQUE3QixDQUEzQjtBQVFBLFFBQU0rQixhQUFhLEdBQUdELFlBQVksQ0FBQzFCLEdBQWIsQ0FBa0I0QixHQUFELElBQVNBLEdBQUcsQ0FBQ1IsY0FBOUIsQ0FBdEI7QUFFQSxRQUFNc0IsUUFBUSxHQUFHLE1BQU01RSxNQUFNLENBQUM2QixJQUFQLENBQVlILFFBQVosQ0FBcUI7QUFDMUNDLElBQUFBLEtBQUssRUFBRTtBQUNMRyxNQUFBQSxFQUFFLEVBQUU7QUFDRlEsUUFBQUEsRUFBRSxFQUFFdUI7QUFERjtBQURDO0FBRG1DLEdBQXJCLENBQXZCOztBQVFBLE9BQUssTUFBTWtCLE9BQVgsSUFBc0JILFFBQXRCLEVBQWdDO0FBQzlCLFVBQU1OLGdCQUFnQixHQUFHLE1BQU10RSxNQUFNLENBQUNnRixZQUFQLENBQW9CVCxLQUFwQixDQUEwQjtBQUN2RDVDLE1BQUFBLEtBQUssRUFBRTtBQUNMMkIsUUFBQUEsY0FBYyxFQUFFO0FBQ2RELFVBQUFBLE1BQU0sRUFBRTBCLE9BQU8sQ0FBQ2pEO0FBREY7QUFEWDtBQURnRCxLQUExQixDQUEvQjtBQU9BaUQsSUFBQUEsT0FBTyxDQUFDVCxnQkFBUixHQUEyQkEsZ0JBQTNCO0FBQ0Q7O0FBRUQsUUFBTWxDLE1BQU0sR0FBRyxNQUFNcEMsTUFBTSxDQUFDcUMsS0FBUCxDQUFhWCxRQUFiLENBQXNCO0FBQ3pDQyxJQUFBQSxLQUFLLEVBQUU7QUFDTEMsTUFBQUEsTUFBTSxFQUFFO0FBQ055QixRQUFBQSxNQUFNLEVBQUV4QixJQUFJLENBQUNDO0FBRFA7QUFESCxLQURrQztBQU16Q0MsSUFBQUEsT0FBTyxFQUFFO0FBQ1BDLE1BQUFBLFNBQVMsRUFBRTtBQURKO0FBTmdDLEdBQXRCLENBQXJCO0FBV0FILEVBQUFBLElBQUksQ0FBQ29ELGlCQUFMLEdBQXlCWCxnQkFBekI7QUFDQXpDLEVBQUFBLElBQUksQ0FBQ29CLFlBQUwsR0FBb0IwQixPQUFPLENBQUMxQixZQUFELENBQTNCO0FBQ0FwQixFQUFBQSxJQUFJLENBQUM0QyxJQUFMLEdBQVlBLElBQVo7QUFDQTVDLEVBQUFBLElBQUksQ0FBQytDLFFBQUwsR0FBZ0JBLFFBQWhCO0FBQ0EvQyxFQUFBQSxJQUFJLENBQUNPLE1BQUwsR0FBY0EsTUFBZDs7QUFFQSxNQUFJLENBQUNBLE1BQU0sQ0FBQ00sTUFBWixFQUFvQjtBQUNsQixXQUFPdkIsR0FBRyxDQUFDd0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVmLE1BQUFBO0FBQUYsS0FBckIsQ0FBUDtBQUNEOztBQUVEQSxFQUFBQSxJQUFJLENBQUNPLE1BQUwsR0FBYyxNQUFNLDBCQUFjQSxNQUFkLENBQXBCO0FBRUFqQixFQUFBQSxHQUFHLENBQUN3QixNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRWYsSUFBQUE7QUFBRixHQUFyQjtBQUNEOztBQUVELGVBQWVuQixRQUFmLENBQXdCUSxHQUF4QixFQUE2QkMsR0FBN0IsRUFBa0M7QUFDaEMsUUFBTTtBQUFFZ0QsSUFBQUEsUUFBRjtBQUFZZSxJQUFBQSxLQUFaO0FBQW1CQyxJQUFBQSxNQUFuQjtBQUEyQkMsSUFBQUE7QUFBM0IsTUFBcUNsRSxHQUFHLENBQUNtRSxJQUEvQztBQUVBLFFBQU14RCxJQUFJLEdBQUcsTUFBTTdCLE1BQU0sQ0FBQzZCLElBQVAsQ0FBWXlELE1BQVosQ0FBbUI7QUFDcEMzRCxJQUFBQSxLQUFLLEVBQUU7QUFDTEcsTUFBQUEsRUFBRSxFQUFFWixHQUFHLENBQUNXLElBQUosQ0FBU0M7QUFEUixLQUQ2QjtBQUlwQzJCLElBQUFBLElBQUksRUFBRTtBQUNKVSxNQUFBQSxRQURJO0FBRUplLE1BQUFBLEtBRkk7QUFHSkMsTUFBQUEsTUFISTtBQUlKQyxNQUFBQTtBQUpJO0FBSjhCLEdBQW5CLENBQW5CO0FBYUQiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvcmVlZGJhcmdlci15b3V0dWJlLXJlYWN0L0phdmFTY3JpcHQveW91VHViZS9zZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmltcG9ydCB7IGdldEF1dGhVc2VyLCBwcm90ZWN0IH0gZnJvbSBcIi4uL21pZGRsZXdhcmUvYXV0aG9yaXphdGlvblwiO1xuaW1wb3J0IHsgZ2V0VmlkZW9WaWV3cyB9IGZyb20gXCIuL3ZpZGVvXCJcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xuXG5mdW5jdGlvbiBnZXRVc2VyUm91dGVzKCkge1xuICBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gIHJvdXRlci5nZXQoJy8nLCBwcm90ZWN0LCBnZXRSZWNvbW1lbmRlZENoYW5uZWxzKVxuICByb3V0ZXIucHV0KCcvJywgcHJvdGVjdCwgZWRpdFVzZXIpXG5cbiAgcm91dGVyLmdldCgnL2xpa2VkLXZpZGVvcycsIHByb3RlY3QsIGdldExpa2VkVmlkZW9zKVxuICByb3V0ZXIuZ2V0KCcvaGlzdG9yeScsIHByb3RlY3QsIGdldEhpc3RvcnkpXG4gIHJvdXRlci5nZXQoJy9zdWJzY3JpcHRpb25zJywgcHJvdGVjdCwgZ2V0RmVlZClcbiAgcm91dGVyLmdldCgnL3NlYXJjaCcsIGdldEF1dGhVc2VyLCBzZWFyY2hVc2VyKVxuXG4gIHJvdXRlci5nZXQoJy86dXNlcklkJywgZ2V0QXV0aFVzZXIsIGdldFByb2ZpbGUpXG4gIHJvdXRlci5nZXQoJy86dXNlcklkL3RvZ2dsZS1zdWJzY3JpYmUnLCBwcm90ZWN0LCB0b2dnbGVTdWJzY3JpYmUpXG5cbiAgcmV0dXJuIHJvdXRlcjtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0TGlrZWRWaWRlb3MocmVxLCByZXMpIHtcbiAgYXdhaXQgZ2V0VmlkZW9zKHByaXNtYS52aWRlb0xpa2UsIHJlcSwgcmVzKVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0SGlzdG9yeShyZXEsIHJlcywgbmV4dCkge1xuICBhd2FpdCBnZXRWaWRlb3MocHJpc21hLnZpZXcsIHJlcSwgcmVzKVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFZpZGVvcyhtb2RlbCwgcmVxLCByZXMpIHtcbiAgY29uc3QgdmlkZW9SZWxhdGlvbnMgPSBhd2FpdCBtb2RlbC5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHVzZXJJZDogcmVxLnVzZXIuaWRcbiAgICB9LFxuICAgIG9yZGVyQnk6IHtcbiAgICAgIGNyZWF0ZWRBdDogJ2Rlc2MnXG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IFZpZGVvSWRzID0gdmlkZW9SZWxhdGlvbnMubWFwKCh2aWRlb0xpa2UpID0+IHZpZGVvTGlrZS52aWRlb0lkKVxuXG4gIGxldCB2aWRlb3MgPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDoge1xuICAgICAgICBpbjogVmlkZW9JZHNcbiAgICAgIH1cbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXI6IHRydWVcbiAgICB9XG4gIH0pXG4gIGNvbnNvbGUubG9nKFwiQmVmb3IgaWYgY2hlY2tcIiwgdmlkZW9zKVxuICBpZiAoIXZpZGVvcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyB2aWRlb3MgfSlcbiAgfVxuXG4gIHZpZGVvcyA9IGF3YWl0IGdldFZpZGVvVmlld3ModmlkZW9zKTtcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvcyB9KVxufVxuXG5hc3luYyBmdW5jdGlvbiB0b2dnbGVTdWJzY3JpYmUocmVxLCByZXMsIG5leHQpIHtcbiAgaWYgKHJlcS51c2VyLmlkID09PSByZXEucGFyYW1zLnVzZXJJZCkge1xuICAgIHJldHVybiBuZXh0KHtcbiAgICAgIG1lc3NhZ2U6IFwiWW91IGNhbmB0IHN1YnNjcmliZSB0byB5b3VyIG93biBjaGFubmVsXCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDBcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogcmVxLnBhcmFtcy51c2VySWRcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF1c2VyKSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogXCJVc2VyIHdpdGggdGhpcyBJZCBkb2VzbmB0IGV4Y2lzdFwiLFxuICAgICAgc3RhdHVzQ29kZTogNDA0XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGlzU3Vic2NyaWJlZCA9IGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgc3Vic2NyaWJlcklkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgIH0sXG4gICAgICBzdWJzY3JpYmVkVG9JZDoge1xuICAgICAgICBlcXVhbHM6IHJlcS5wYXJhbXMudXNlcklkXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGlmIChpc1N1YnNjcmliZWQpIHtcbiAgICBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmRlbGV0ZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZDogaXNTdWJzY3JpYmVkLmlkXG4gICAgICB9XG4gICAgfSlcbiAgfSBlbHNlIHtcbiAgICBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHN1YnNjcmliZXI6IHtcbiAgICAgICAgICBjb25uZWN0OiB7XG4gICAgICAgICAgICBpZDogcmVxLnVzZXIuaWRcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHN1YnNjcmliZWRUbzoge1xuICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgIGlkOiByZXEucGFyYW1zLnVzZXJJZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7fSlcblxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRGZWVkKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHN1YnNjcmliZWRUbyA9IGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBzdWJzY3JpYmVySWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgc3Vic2NyaWJ0aW9ucyA9IHN1YnNjcmliZWRUby5tYXAoc3ViID0+IHN1Yi5zdWJzY3JpYmVkVG9JZClcblxuICBjb25zdCBmZWVkID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiB7XG4gICAgICAgIGluOiBzdWJzY3JpYnRpb25zXG4gICAgICB9XG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICB1c2VyOiB0cnVlXG4gICAgfSxcbiAgICBvcmRlckJ5OiB7XG4gICAgICBjcmVhdGVkQXQ6IFwiZGVzY1wiXG4gICAgfVxuICB9KVxuXG4gIGlmICghZmVlZC5sZW5ndGgpIHtcbiAgICBjb25zb2xlLmxvZyhcImluc2lkZVwiKVxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGZlZWQgfSlcbiAgfVxuXG4gIGNvbnN0IGZlZWRWaWRlb3MgPSBhd2FpdCBnZXRWaWRlb1ZpZXdzKGZlZWQpXG4gIGNvbnNvbGUubG9nKFwib3V0c2lkZVwiKVxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGZlZWQ6IGZlZWRWaWRlb3MgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2VhcmNoVXNlcihyZXEsIHJlcywgbmV4dCkge1xuICBpZiAoIXJlcS5xdWVyeS5xdWVyeSkge1xuICAgIHJldHVybiBuZXh0KHtcbiAgICAgIG1lc3NhZ2U6IFwiUGxlYXNlIGVudGVyIHNlYXJjaCBxdWVyeVwiLFxuICAgICAgc3RhdHVzQ29kZTogNDAwLFxuICAgIH0pXG4gIH1cblxuICBjb25zdCB1c2VycyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcm5hbWU6IHtcbiAgICAgICAgY29udGFpbnM6IHJlcS5xdWVyeS5xdWVyeSxcbiAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGlmICghdXNlcnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdXNlcnMgfSlcbiAgfVxuXG4gIGZvciAoY29uc3QgdXNlciBvZiB1c2Vycykge1xuICAgIGNvbnN0IHN1YnNjcmliZXJzQ291bnQgPSBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmNvdW50KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHN1YnNjcmliZWRUb0lkOiB7XG4gICAgICAgICAgZXF1YWxzOiB1c2VyLmlkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3QgdmlkZW9Db3VudCA9IGF3YWl0IHByaXNtYS52aWRlby5jb3VudCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICB1c2VySWQ6IHVzZXIuaWRcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgbGV0IGlzTWUgPSBmYWxzZTtcbiAgICBsZXQgaXNTdWJzY3JpYmVkID0gZmFsc2U7XG5cbiAgICBpZiAocmVxLnVzZXIpIHtcbiAgICAgIGlzTWUgPSByZXEudXNlci5pZCA9PT0gdXNlci5pZDtcblxuICAgICAgaXNTdWJzY3JpYmVkID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5maW5kRmlyc3Qoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIEFORDoge1xuICAgICAgICAgICAgc3Vic2NyaWJlcklkOiB7XG4gICAgICAgICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWJzY3JpYmVkVG9JZDoge1xuICAgICAgICAgICAgICBlcXVhbHM6IHVzZXIuaWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICAgIHVzZXIuc3Vic2NyaWJlcnNDb3VudCA9IHN1YnNjcmliZXJzQ291bnQ7XG4gICAgdXNlci52aWRlb0NvdW50ID0gdmlkZW9Db3VudDtcbiAgICB1c2VyLmlzU3Vic2NyaWJlZCA9IEJvb2xlYW4oaXNTdWJzY3JpYmVkKTtcbiAgICB1c2VyLmlzTWUgPSBpc01lO1xuICB9XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VycyB9KVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFJlY29tbWVuZGVkQ2hhbm5lbHMocmVxLCByZXMpIHtcbiAgY29uc3QgY2hhbm5lbHMgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiB7XG4gICAgICAgIG5vdDogcmVxLnVzZXIuaWRcbiAgICAgIH1cbiAgICB9LFxuICAgIHRha2U6IDEwXG4gIH0pXG5cbiAgaWYgKCFjaGFubmVscy5sZW5ndGgpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBjaGFubmVscyB9KVxuICB9XG5cbiAgZm9yIChjb25zdCBjaGFubmVsIG9mIGNoYW5uZWxzKSB7XG4gICAgY29uc3Qgc3Vic2NyaWJlcnNDb3VudCA9IGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgc3Vic2NyaWJlZFRvSWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IGNoYW5uZWwuaWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCB2aWRlb0NvdW50ID0gYXdhaXQgcHJpc21hLnZpZGVvLmNvdW50KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHVzZXJJZDogY2hhbm5lbC5pZFxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBpc1N1YnNjcmliZWQgPSBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBBTkQ6IHtcbiAgICAgICAgICBzdWJzY3JpYmVySWQ6IHtcbiAgICAgICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN1YnNjcmliZWRUb0lkOiB7XG4gICAgICAgICAgICBlcXVhbHM6IGNoYW5uZWwuaWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY2hhbm5lbC5zdWJzY3JpYmVyc0NvdW50ID0gc3Vic2NyaWJlcnNDb3VudDtcbiAgICBjaGFubmVsLnZpZGVvQ291bnQgPSB2aWRlb0NvdW50O1xuICAgIGNoYW5uZWwuaXNTdWJzY3JpYmVkID0gQm9vbGVhbihpc1N1YnNjcmliZWQpO1xuICB9XG5cbiAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgY2hhbm5lbHMgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZmlsZShyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLnVzZXJJZFxuICAgIH1cbiAgfSlcblxuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBtZXNzYWdlOiBgTm8gdXNlciBmb3VuZCB3aXRoIGlkOiAke3JlcS5wYXJhbXMudXNlcklkfWAsXG4gICAgICBzdGF0dXNDb2RlOiA0MDQsXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IHN1YnNjcmliZXJzQ291bnQgPSBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgc3Vic2NyaWJlZFRvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiB1c2VyLmlkXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGxldCBpc01lID0gZmFsc2VcbiAgbGV0IGlzU3Vic2NyaWJlZCA9IGZhbHNlXG5cbiAgaWYgKHJlcS51c2VyKSB7XG4gICAgaXNNZSA9IHJlcS51c2VyLmlkID09PSB1c2VyLmlkO1xuXG4gICAgaXNTdWJzY3JpYmVkID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgQU5EOiB7XG4gICAgICAgICAgc3Vic2NyaWJlcklkOiB7XG4gICAgICAgICAgICBlcXVhbHM6IHJlcS51c2VyLmlkLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3Vic2NyaWJlZFRvSWQ6IHtcbiAgICAgICAgICAgIGVxdWFsczogdXNlci5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBjb25zdCBzdWJzY3JpYmVkVG8gPSBhd2FpdCBwcmlzbWEuc3Vic2NyaXB0aW9uLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgc3Vic2NyaWJlcklkOiB7XG4gICAgICAgIGVxdWFsczogdXNlci5pZCxcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3Qgc3Vic2NyaWJ0aW9ucyA9IHN1YnNjcmliZWRUby5tYXAoKHN1YikgPT4gc3ViLnN1YnNjcmliZWRUb0lkKTtcblxuICBjb25zdCBjaGFubmVscyA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHtcbiAgICAgICAgaW46IHN1YnNjcmlidGlvbnNcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgZm9yIChjb25zdCBjaGFubmVsIG9mIGNoYW5uZWxzKSB7XG4gICAgY29uc3Qgc3Vic2NyaWJlcnNDb3VudCA9IGF3YWl0IHByaXNtYS5zdWJzY3JpYnRpb24uY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgc3Vic2NyaWJlZFRvSWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IGNoYW5uZWwuaWQsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIGNoYW5uZWwuc3Vic2NyaWJlcnNDb3VudCA9IHN1YnNjcmliZXJzQ291bnRcbiAgfVxuXG4gIGNvbnN0IHZpZGVvcyA9IGF3YWl0IHByaXNtYS52aWRlby5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHVzZXJJZDoge1xuICAgICAgICBlcXVhbHM6IHVzZXIuaWRcbiAgICAgIH1cbiAgICB9LFxuICAgIG9yZGVyQnk6IHtcbiAgICAgIGNyZWF0ZWRBdDogXCJkZXNjXCJcbiAgICB9XG4gIH0pXG5cbiAgdXNlci5zdWJzY3JpYnRpb25Db3VudCA9IHN1YnNjcmliZXJzQ291bnQ7XG4gIHVzZXIuaXNTdWJzY3JpYmVkID0gQm9vbGVhbihpc1N1YnNjcmliZWQpO1xuICB1c2VyLmlzTWUgPSBpc01lO1xuICB1c2VyLmNoYW5uZWxzID0gY2hhbm5lbHM7XG4gIHVzZXIudmlkZW9zID0gdmlkZW9zO1xuXG4gIGlmICghdmlkZW9zLmxlbmd0aCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVzZXIgfSlcbiAgfVxuXG4gIHVzZXIudmlkZW9zID0gYXdhaXQgZ2V0VmlkZW9WaWV3cyh2aWRlb3MpXG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VyIH0pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGVkaXRVc2VyKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHsgdXNlcm5hbWUsIGNvdmVyLCBhdmF0YXIsIGFib3V0IH0gPSByZXEuYm9keTtcblxuICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS51c2VyLmlkLFxuICAgIH0sXG4gICAgZGF0YToge1xuICAgICAgdXNlcm5hbWUsXG4gICAgICBjb3ZlcixcbiAgICAgIGF2YXRhcixcbiAgICAgIGFib3V0LFxuICAgIH0sXG5cbiAgfSlcblxufVxuXG5leHBvcnQgeyBnZXRVc2VyUm91dGVzIH07Il19",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getUserRoutes",
        "router",
        "express",
        "Router",
        "get",
        "protect",
        "getRecommendedChannels",
        "put",
        "editUser",
        "getLikedVideos",
        "getHistory",
        "getFeed",
        "getAuthUser",
        "searchUser",
        "getProfile",
        "toggleSubscribe",
        "req",
        "res",
        "getVideos",
        "videoLike",
        "next",
        "view",
        "model",
        "videoRelations",
        "findMany",
        "where",
        "userId",
        "user",
        "id",
        "orderBy",
        "createdAt",
        "VideoIds",
        "map",
        "videoId",
        "videos",
        "video",
        "in",
        "include",
        "console",
        "log",
        "length",
        "status",
        "json",
        "params",
        "message",
        "statusCode",
        "findUnique",
        "isSubscribed",
        "subscription",
        "findFirst",
        "subscriberId",
        "equals",
        "subscribedToId",
        "delete",
        "create",
        "data",
        "subscriber",
        "connect",
        "subscribedTo",
        "subscribtions",
        "sub",
        "feed",
        "feedVideos",
        "query",
        "users",
        "username",
        "contains",
        "mode",
        "subscribersCount",
        "count",
        "videoCount",
        "isMe",
        "AND",
        "Boolean",
        "channels",
        "not",
        "take",
        "channel",
        "subscribtion",
        "subscribtionCount",
        "cover",
        "avatar",
        "about",
        "body",
        "update"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\nimport { PrismaClient } from \"@prisma/client\";\n\nimport { getAuthUser, protect } from \"../middleware/authorization\";\nimport { getVideoViews } from \"./video\"\n\nconst prisma = new PrismaClient();\n\nfunction getUserRoutes() {\n  const router = express.Router();\n\n  router.get('/', protect, getRecommendedChannels)\n  router.put('/', protect, editUser)\n\n  router.get('/liked-videos', protect, getLikedVideos)\n  router.get('/history', protect, getHistory)\n  router.get('/subscriptions', protect, getFeed)\n  router.get('/search', getAuthUser, searchUser)\n\n  router.get('/:userId', getAuthUser, getProfile)\n  router.get('/:userId/toggle-subscribe', protect, toggleSubscribe)\n\n  return router;\n}\n\nasync function getLikedVideos(req, res) {\n  await getVideos(prisma.videoLike, req, res)\n}\nasync function getHistory(req, res, next) {\n  await getVideos(prisma.view, req, res)\n\n}\n\nasync function getVideos(model, req, res) {\n  const videoRelations = await model.findMany({\n    where: {\n      userId: req.user.id\n    },\n    orderBy: {\n      createdAt: 'desc'\n    }\n  })\n\n  const VideoIds = videoRelations.map((videoLike) => videoLike.videoId)\n\n  let videos = await prisma.video.findMany({\n    where: {\n      id: {\n        in: VideoIds\n      }\n    },\n    include: {\n      user: true\n    }\n  })\n  console.log(\"Befor if check\", videos)\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n  }\n\n  videos = await getVideoViews(videos);\n\n  res.status(200).json({ videos })\n}\n\nasync function toggleSubscribe(req, res, next) {\n  if (req.user.id === req.params.userId) {\n    return next({\n      message: \"You can`t subscribe to your own channel\",\n      statusCode: 400\n    })\n  }\n\n  const user = await prisma.user.findUnique({\n    where: {\n      id: req.params.userId\n    }\n  })\n\n  if (!user) {\n    return next({\n      message: \"User with this Id doesn`t excist\",\n      statusCode: 404\n    })\n  }\n\n  const isSubscribed = await prisma.subscription.findFirst({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      },\n      subscribedToId: {\n        equals: req.params.userId\n      }\n    }\n  })\n\n  if (isSubscribed) {\n    await prisma.subscription.delete({\n      where: {\n        id: isSubscribed.id\n      }\n    })\n  } else {\n    await prisma.subscription.create({\n      data: {\n        subscriber: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        subscribedTo: {\n          connect: {\n            id: req.params.userId\n          }\n        }\n      }\n    })\n  }\n\n  res.status(200).json({})\n\n}\n\nasync function getFeed(req, res) {\n  const subscribedTo = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: req.user.id\n      }\n    }\n  });\n\n  const subscribtions = subscribedTo.map(sub => sub.subscribedToId)\n\n  const feed = await prisma.video.findMany({\n    where: {\n      userId: {\n        in: subscribtions\n      }\n    },\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  if (!feed.length) {\n    console.log(\"inside\")\n    return res.status(200).json({ feed })\n  }\n\n  const feedVideos = await getVideoViews(feed)\n  console.log(\"outside\")\n  res.status(200).json({ feed: feedVideos })\n}\n\nasync function searchUser(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      message: \"Please enter search query\",\n      statusCode: 400,\n    })\n  }\n\n  const users = await prisma.user.findMany({\n    where: {\n      username: {\n        contains: req.query.query,\n        mode: \"insensitive\"\n      }\n    }\n  })\n\n  if (!users.length) {\n    return res.status(200).json({ users })\n  }\n\n  for (const user of users) {\n    const subscribersCount = await prisma.subscription.count({\n      where: {\n        subscribedToId: {\n          equals: user.id\n        }\n      }\n    })\n\n    const videoCount = await prisma.video.count({\n      where: {\n        userId: user.id\n      }\n    })\n\n    let isMe = false;\n    let isSubscribed = false;\n\n    if (req.user) {\n      isMe = req.user.id === user.id;\n\n      isSubscribed = await prisma.subscription.findFirst({\n        where: {\n          AND: {\n            subscriberId: {\n              equals: req.user.id\n            },\n            subscribedToId: {\n              equals: user.id\n            }\n          }\n        }\n      })\n    }\n    user.subscribersCount = subscribersCount;\n    user.videoCount = videoCount;\n    user.isSubscribed = Boolean(isSubscribed);\n    user.isMe = isMe;\n  }\n\n  res.status(200).json({ users })\n\n}\n\nasync function getRecommendedChannels(req, res) {\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        not: req.user.id\n      }\n    },\n    take: 10\n  })\n\n  if (!channels.length) {\n    return res.status(200).json({ channels })\n  }\n\n  for (const channel of channels) {\n    const subscribersCount = await prisma.subscription.count({\n      where: {\n        subscribedToId: {\n          equals: channel.id\n        }\n      }\n    })\n\n    const videoCount = await prisma.video.count({\n      where: {\n        userId: channel.id\n      }\n    })\n\n    const isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        AND: {\n          subscriberId: {\n            equals: req.user.id\n          },\n          subscribedToId: {\n            equals: channel.id\n          }\n        }\n      }\n    })\n\n    channel.subscribersCount = subscribersCount;\n    channel.videoCount = videoCount;\n    channel.isSubscribed = Boolean(isSubscribed);\n  }\n\n  return res.status(200).json({ channels })\n}\n\nasync function getProfile(req, res, next) {\n  const user = await prisma.user.findUnique({\n    where: {\n      id: req.params.userId\n    }\n  })\n\n  if (!user) {\n    return next({\n      message: `No user found with id: ${req.params.userId}`,\n      statusCode: 404,\n    })\n  }\n\n  const subscribersCount = await prisma.subscription.count({\n    where: {\n      subscribedToId: {\n        equals: user.id\n      }\n    }\n  })\n\n  let isMe = false\n  let isSubscribed = false\n\n  if (req.user) {\n    isMe = req.user.id === user.id;\n\n    isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        AND: {\n          subscriberId: {\n            equals: req.user.id,\n          },\n          subscribedToId: {\n            equals: user.id\n          }\n        }\n      }\n    })\n  }\n\n  const subscribedTo = await prisma.subscription.findMany({\n    where: {\n      subscriberId: {\n        equals: user.id,\n      }\n    }\n  })\n\n  const subscribtions = subscribedTo.map((sub) => sub.subscribedToId);\n\n  const channels = await prisma.user.findMany({\n    where: {\n      id: {\n        in: subscribtions\n      }\n    }\n  })\n\n  for (const channel of channels) {\n    const subscribersCount = await prisma.subscribtion.count({\n      where: {\n        subscribedToId: {\n          equals: channel.id,\n        }\n      }\n    })\n    channel.subscribersCount = subscribersCount\n  }\n\n  const videos = await prisma.video.findMany({\n    where: {\n      userId: {\n        equals: user.id\n      }\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  user.subscribtionCount = subscribersCount;\n  user.isSubscribed = Boolean(isSubscribed);\n  user.isMe = isMe;\n  user.channels = channels;\n  user.videos = videos;\n\n  if (!videos.length) {\n    return res.status(200).json({ user })\n  }\n\n  user.videos = await getVideoViews(videos)\n\n  res.status(200).json({ user })\n}\n\nasync function editUser(req, res) {\n  const { username, cover, avatar, about } = req.body;\n\n  const user = await prisma.user.update({\n    where: {\n      id: req.user.id,\n    },\n    data: {\n      username,\n      cover,\n      avatar,\n      about,\n    },\n\n  })\n\n}\n\nexport { getUserRoutes };"
      ]
    },
    "sourceType": "script",
    "mtime": 1635171317798
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/video.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/video.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/video.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/video.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "video.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getVideoRoutes = getVideoRoutes;\nexports.getVideoViews = getVideoViews;\n\nvar _express = _interopRequireWildcard(require(\"express\"));\n\nvar _client = require(\"@prisma/client\");\n\nvar _authorization = require(\"../middleware/authorization\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst prisma = new _client.PrismaClient();\n\nfunction getVideoRoutes() {\n  const router = _express.default.Router();\n\n  router.get('/', getRecommendedVideos);\n  router.post('/', _authorization.protect, addVideo);\n  router.get('/trending', getTrendingVideos);\n  router.get('/search', searchVideos);\n  router.get('/:videoId', _authorization.getAuthUser, getVideo);\n  router.get('/:videoId', _authorization.getAuthUser, addVideoView);\n  router.get('/:videoId/like', _authorization.protect, likeVideo);\n  router.get('/:videoId/dislike', _authorization.protect, dislikeVideo);\n  router.post('/:videoId/comment', _authorization.protect, addComment);\n  router.delete('/:videoId/delete', _authorization.protect, deleteVideo);\n  router.delete('/:videoId/comment/:commentId', _authorization.protect, deleteComment);\n  return router;\n}\n\nasync function getVideoViews(videos) {\n  for (const video of videos) {\n    const views = await prisma.view.count({\n      where: {\n        videoId: {\n          equals: video.id\n        }\n      }\n    });\n    video.views = views;\n  }\n\n  return videos;\n}\n\nasync function getRecommendedVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await getVideoViews(videos);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function getTrendingVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await getVideoViews(videos);\n  videos.sort((a, b) => b.views - a.views);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function searchVideos(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      statusCode: 400,\n      message: \"You haven`t entered the serachasd fasdf afgnkdcvbrjnbfjtbg\"\n    });\n  }\n\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    where: {\n      OR: [{\n        title: {\n          contains: req.query.query,\n          mode: \"insensitive\"\n        }\n      }, {\n        description: {\n          contains: req.query.query,\n          mode: \"insensitive\"\n        }\n      }]\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await getVideoViews(videos);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function addVideo(req, res) {\n  const {\n    title,\n    description,\n    url,\n    thumbnail\n  } = req.body;\n  const video = await prisma.video.create({\n    data: {\n      title,\n      description,\n      url,\n      thumbnail,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      }\n    }\n  });\n  res.status(200).json({\n    video\n  });\n}\n\nasync function addComment(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} doesn't exist`,\n      statusCode: 404\n    });\n  }\n\n  const comment = await prisma.comment.create({\n    data: {\n      text: req.body.text,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      },\n      video: {\n        connect: {\n          id: req.params.videoId\n        }\n      }\n    }\n  });\n  res.status(200).json({\n    comment\n  });\n}\n\nasync function deleteComment(req, res) {\n  const comment = await prisma.comment.findUnique({\n    where: {\n      id: req.params.commentId\n    },\n    select: {\n      userId: true\n    }\n  });\n\n  if (comment.userId !== req.user.id) {\n    return res.status(401).send(\"You are not authorised to delete this comment\");\n  }\n\n  await prisma.comment.delete({\n    where: {\n      id: req.params.commentId\n    }\n  });\n  res.status(200).json({}).send();\n}\n\nasync function addVideoView(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} id doesn't exist`,\n      statusCode: 404\n    });\n  }\n\n  if (req.user) {\n    await prisma.view.create({\n      data: {\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        }\n      }\n    });\n  } else {\n    await prisma.view.create({\n      data: {\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        }\n      }\n    });\n  }\n\n  res.status(200).json({});\n}\n\nasync function likeVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    });\n  }\n\n  const isLiked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: 1\n      }\n    }\n  });\n  const isDisliked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: -1\n      }\n    }\n  });\n\n  if (isLiked) {\n    await prisma.videoLike.delete({\n      where: {\n        id: isLiked.id\n      }\n    });\n  } else if (isDisliked) {\n    await prisma.videoLike.update({\n      where: {\n        id: isDisliked.id\n      },\n      data: {\n        like: 1\n      }\n    });\n  } else {\n    await prisma.videoLike.create({\n      data: {\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        like: 1\n      }\n    });\n  }\n\n  res.status(200).json({});\n}\n\nasync function dislikeVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    });\n  }\n\n  const isLiked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: 1\n      }\n    }\n  });\n  const isDisliked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: -1\n      }\n    }\n  });\n\n  if (isDisliked) {\n    await prisma.videoLike.delete({\n      where: {\n        id: isDisliked.id\n      }\n    });\n  } else if (isLiked) {\n    await prisma.videoLike.update({\n      where: {\n        id: isLiked.id\n      },\n      data: {\n        like: -1\n      }\n    });\n  } else {\n    await prisma.videoLike.create({\n      data: {\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        like: -1\n      }\n    });\n  }\n\n  res.status(200).json({});\n}\n\nasync function getVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    },\n    include: {\n      user: true,\n      comments: {\n        include: {\n          user: true\n        },\n        orderBy: {\n          createdAt: \"desc\"\n        }\n      }\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: `Video with Id: \"${req.params.videoId}\" not found`,\n      statusCode: 404\n    });\n  }\n\n  let isVideoMine = false;\n  let isLiked = false;\n  let isDisliked = false;\n  let isSubscribed = false;\n  let isViewed = false;\n\n  if (req.user) {\n    isVideoMine = req.user.id === video.userId;\n    isLiked = await prisma.videoLike.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: 1\n        }\n      }\n    });\n    isDisliked = await prisma.videoLike.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: -1\n        }\n      }\n    });\n    isViewed = prisma.view.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        }\n      }\n    });\n    isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        subscriberId: {\n          equals: req.user.id\n        },\n        subscribedToId: {\n          equals: video.userId\n        }\n      }\n    });\n  }\n\n  const likesCount = await prisma.videoLike.count({\n    where: {\n      AND: {\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: 1\n        }\n      }\n    }\n  });\n  const dislikesCount = await prisma.videoLike.count({\n    where: {\n      AND: {\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: -1\n        }\n      }\n    }\n  });\n  const views = await prisma.view.count({\n    where: {\n      videoId: {\n        equals: video.id\n      }\n    }\n  });\n  const subscribersCount = await prisma.subscription.count({\n    where: {\n      subscribedToId: {\n        equals: video.userId\n      }\n    }\n  });\n  video.commentsCount = video.comments.length;\n  video.isLiked = Boolean(isLiked);\n  video.isDisliked = Boolean(isDisliked);\n  video.likesCount = likesCount;\n  video.views = views;\n  video.dislikesCount = dislikesCount;\n  video.isVideoMine = isVideoMine;\n  video.isSubscribed = Boolean(isSubscribed);\n  video.isViewed = Boolean(isViewed);\n  video.subscribersCount = subscribersCount;\n  res.status(200).json({\n    video\n  });\n}\n\nasync function deleteVideo(req, res) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    },\n    select: {\n      userId: true\n    }\n  });\n\n  if (req.user.id !== video.userId) {\n    return res.status(401).send('You are not authorizd to delete this video');\n  }\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    });\n  }\n\n  await prisma.view.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  });\n  await prisma.comment.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  });\n  await prisma.videoLike.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  });\n  await prisma.video.delete({\n    where: {\n      id: req.params.videoId\n    }\n  });\n  res.status(200).json({});\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvLmpzIl0sIm5hbWVzIjpbInByaXNtYSIsIlByaXNtYUNsaWVudCIsImdldFZpZGVvUm91dGVzIiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImdldFJlY29tbWVuZGVkVmlkZW9zIiwicG9zdCIsInByb3RlY3QiLCJhZGRWaWRlbyIsImdldFRyZW5kaW5nVmlkZW9zIiwic2VhcmNoVmlkZW9zIiwiZ2V0QXV0aFVzZXIiLCJnZXRWaWRlbyIsImFkZFZpZGVvVmlldyIsImxpa2VWaWRlbyIsImRpc2xpa2VWaWRlbyIsImFkZENvbW1lbnQiLCJkZWxldGUiLCJkZWxldGVWaWRlbyIsImRlbGV0ZUNvbW1lbnQiLCJnZXRWaWRlb1ZpZXdzIiwidmlkZW9zIiwidmlkZW8iLCJ2aWV3cyIsInZpZXciLCJjb3VudCIsIndoZXJlIiwidmlkZW9JZCIsImVxdWFscyIsImlkIiwicmVxIiwicmVzIiwiZmluZE1hbnkiLCJpbmNsdWRlIiwidXNlciIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJsZW5ndGgiLCJzdGF0dXMiLCJqc29uIiwic29ydCIsImEiLCJiIiwibmV4dCIsInF1ZXJ5Iiwic3RhdHVzQ29kZSIsIm1lc3NhZ2UiLCJPUiIsInRpdGxlIiwiY29udGFpbnMiLCJtb2RlIiwiZGVzY3JpcHRpb24iLCJ1cmwiLCJ0aHVtYm5haWwiLCJib2R5IiwiY3JlYXRlIiwiZGF0YSIsImNvbm5lY3QiLCJmaW5kVW5pcXVlIiwicGFyYW1zIiwiY29tbWVudCIsInRleHQiLCJjb21tZW50SWQiLCJzZWxlY3QiLCJ1c2VySWQiLCJzZW5kIiwiaXNMaWtlZCIsInZpZGVvTGlrZSIsImZpbmRGaXJzdCIsImxpa2UiLCJpc0Rpc2xpa2VkIiwidXBkYXRlIiwiY29tbWVudHMiLCJpc1ZpZGVvTWluZSIsImlzU3Vic2NyaWJlZCIsImlzVmlld2VkIiwic3Vic2NyaXB0aW9uIiwic3Vic2NyaWJlcklkIiwic3Vic2NyaWJlZFRvSWQiLCJsaWtlc0NvdW50IiwiQU5EIiwiZGlzbGlrZXNDb3VudCIsInN1YnNjcmliZXJzQ291bnQiLCJjb21tZW50c0NvdW50IiwiQm9vbGVhbiIsImRlbGV0ZU1hbnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFJQyxvQkFBSixFQUFmOztBQUVBLFNBQVNDLGNBQVQsR0FBMEI7QUFDeEIsUUFBTUMsTUFBTSxHQUFHQyxpQkFBUUMsTUFBUixFQUFmOztBQUVBRixFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxHQUFYLEVBQWdCQyxvQkFBaEI7QUFDQUosRUFBQUEsTUFBTSxDQUFDSyxJQUFQLENBQVksR0FBWixFQUFpQkMsc0JBQWpCLEVBQTBCQyxRQUExQjtBQUVBUCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxXQUFYLEVBQXdCSyxpQkFBeEI7QUFDQVIsRUFBQUEsTUFBTSxDQUFDRyxHQUFQLENBQVcsU0FBWCxFQUFzQk0sWUFBdEI7QUFFQVQsRUFBQUEsTUFBTSxDQUFDRyxHQUFQLENBQVcsV0FBWCxFQUF3Qk8sMEJBQXhCLEVBQXFDQyxRQUFyQztBQUNBWCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxXQUFYLEVBQXdCTywwQkFBeEIsRUFBcUNFLFlBQXJDO0FBQ0FaLEVBQUFBLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLGdCQUFYLEVBQTZCRyxzQkFBN0IsRUFBc0NPLFNBQXRDO0FBQ0FiLEVBQUFBLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLG1CQUFYLEVBQWdDRyxzQkFBaEMsRUFBeUNRLFlBQXpDO0FBQ0FkLEVBQUFBLE1BQU0sQ0FBQ0ssSUFBUCxDQUFZLG1CQUFaLEVBQWlDQyxzQkFBakMsRUFBMENTLFVBQTFDO0FBQ0FmLEVBQUFBLE1BQU0sQ0FBQ2dCLE1BQVAsQ0FBYyxrQkFBZCxFQUFrQ1Ysc0JBQWxDLEVBQTJDVyxXQUEzQztBQUVBakIsRUFBQUEsTUFBTSxDQUFDZ0IsTUFBUCxDQUFjLDhCQUFkLEVBQThDVixzQkFBOUMsRUFBdURZ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O0FBQ3hCUyxJQUFBQSxLQUFLLEVBQUU7QUFDTEcsTUFBQUEsRUFBRSxFQUFFQyxHQUFHLENBQUM2QixNQUFKLENBQVdoQztBQURWO0FBRGlCLEdBQXBCLENBQU47QUFNQUksRUFBQUEsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsRUFBckI7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9yZWVkYmFyZ2VyLXlvdXR1YmUtcmVhY3QvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzLCB7IHJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiXG5pbXBvcnQgeyBnZXRBdXRoVXNlciwgcHJvdGVjdCB9IGZyb20gXCIuLi9taWRkbGV3YXJlL2F1dGhvcml6YXRpb25cIjtcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpXG5cbmZ1bmN0aW9uIGdldFZpZGVvUm91dGVzKCkge1xuICBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gIHJvdXRlci5nZXQoJy8nLCBnZXRSZWNvbW1lbmRlZFZpZGVvcylcbiAgcm91dGVyLnBvc3QoJy8nLCBwcm90ZWN0LCBhZGRWaWRlbylcblxuICByb3V0ZXIuZ2V0KCcvdHJlbmRpbmcnLCBnZXRUcmVuZGluZ1ZpZGVvcylcbiAgcm91dGVyLmdldCgnL3NlYXJjaCcsIHNlYXJjaFZpZGVvcylcblxuICByb3V0ZXIuZ2V0KCcvOnZpZGVvSWQnLCBnZXRBdXRoVXNlciwgZ2V0VmlkZW8pXG4gIHJvdXRlci5nZXQoJy86dmlkZW9JZCcsIGdldEF1dGhVc2VyLCBhZGRWaWRlb1ZpZXcpXG4gIHJvdXRlci5nZXQoJy86dmlkZW9JZC9saWtlJywgcHJvdGVjdCwgbGlrZVZpZGVvKVxuICByb3V0ZXIuZ2V0KCcvOnZpZGVvSWQvZGlzbGlrZScsIHByb3RlY3QsIGRpc2xpa2VWaWRlbylcbiAgcm91dGVyLnBvc3QoJy86dmlkZW9JZC9jb21tZW50JywgcHJvdGVjdCwgYWRkQ29tbWVudClcbiAgcm91dGVyLmRlbGV0ZSgnLzp2aWRlb0lkL2RlbGV0ZScsIHByb3RlY3QsIGRlbGV0ZVZpZGVvKVxuXG4gIHJvdXRlci5kZWxldGUoJy86dmlkZW9JZC9jb21tZW50Lzpjb21tZW50SWQnLCBwcm90ZWN0LCBkZWxldGVDb21tZW50KVxuXG4gIHJldHVybiByb3V0ZXI7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFZpZGVvVmlld3ModmlkZW9zKSB7XG4gIGZvciAoY29uc3QgdmlkZW8gb2YgdmlkZW9zKSB7XG4gICAgY29uc3Qgdmlld3MgPSBhd2FpdCBwcmlzbWEudmlldy5jb3VudCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICB2aWRlb0lkOiB7XG4gICAgICAgICAgZXF1YWxzOiB2aWRlby5pZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICB2aWRlby52aWV3cyA9IHZpZXdzXG4gIH1cbiAgcmV0dXJuIHZpZGVvc1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRSZWNvbW1lbmRlZFZpZGVvcyhyZXEsIHJlcykge1xuICBsZXQgdmlkZW9zID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRNYW55KHtcbiAgICBpbmNsdWRlOiB7XG4gICAgICB1c2VyOiB0cnVlXG4gICAgfSxcbiAgICBvcmRlckJ5OiB7XG4gICAgICBjcmVhdGVkQXQ6IFwiZGVzY1wiXG4gICAgfVxuICB9KVxuXG4gIGlmICghdmlkZW9zLmxlbmd0aCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvcyB9KVxuXG4gIH1cbiAgdmlkZW9zID0gYXdhaXQgZ2V0VmlkZW9WaWV3cyh2aWRlb3MpXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdmlkZW9zIH0pXG5cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0VHJlbmRpbmdWaWRlb3MocmVxLCByZXMpIHtcbiAgbGV0IHZpZGVvcyA9IGF3YWl0IHByaXNtYS52aWRlby5maW5kTWFueSh7XG4gICAgaW5jbHVkZToge1xuICAgICAgdXNlcjogdHJ1ZVxuICAgIH0sXG4gICAgb3JkZXJCeToge1xuICAgICAgY3JlYXRlZEF0OiBcImRlc2NcIlxuICAgIH1cbiAgfSlcblxuICBpZiAoIXZpZGVvcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyB2aWRlb3MgfSlcblxuICB9XG4gIHZpZGVvcyA9IGF3YWl0IGdldFZpZGVvVmlld3ModmlkZW9zKVxuICB2aWRlb3Muc29ydCgoYSwgYikgPT4gYi52aWV3cyAtIGEudmlld3MpXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdmlkZW9zIH0pXG5cbn1cblxuYXN5bmMgZnVuY3Rpb24gc2VhcmNoVmlkZW9zKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGlmICghcmVxLnF1ZXJ5LnF1ZXJ5KSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgc3RhdHVzQ29kZTogNDAwLFxuICAgICAgbWVzc2FnZTogXCJZb3UgaGF2ZW5gdCBlbnRlcmVkIHRoZSBzZXJhY2hhc2QgZmFzZGYgYWZnbmtkY3ZicmpuYmZqdGJnXCJcbiAgICB9KVxuICB9XG5cbiAgbGV0IHZpZGVvcyA9IGF3YWl0IHByaXNtYS52aWRlby5maW5kTWFueSh7XG4gICAgaW5jbHVkZToge1xuICAgICAgdXNlcjogdHJ1ZVxuICAgIH0sXG4gICAgd2hlcmU6IHtcbiAgICAgIE9SOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZToge1xuICAgICAgICAgICAgY29udGFpbnM6IHJlcS5xdWVyeS5xdWVyeSxcbiAgICAgICAgICAgIG1vZGU6IFwiaW5zZW5zaXRpdmVcIlxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgICBjb250YWluczogcmVxLnF1ZXJ5LnF1ZXJ5LFxuICAgICAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH1cbiAgfSlcblxuICBpZiAoIXZpZGVvcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyB2aWRlb3MgfSlcblxuICB9XG4gIHZpZGVvcyA9IGF3YWl0IGdldFZpZGVvVmlld3ModmlkZW9zKVxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvcyB9KVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkZFZpZGVvKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHsgdGl0bGUsIGRlc2NyaXB0aW9uLCB1cmwsIHRodW1ibmFpbCB9ID0gcmVxLmJvZHk7XG5cbiAgY29uc3QgdmlkZW8gPSBhd2FpdCBwcmlzbWEudmlkZW8uY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICB0aXRsZSwgZGVzY3JpcHRpb24sIHVybCwgdGh1bWJuYWlsLFxuICAgICAgdXNlcjoge1xuICAgICAgICBjb25uZWN0OiB7XG4gICAgICAgICAgaWQ6IHJlcS51c2VyLmlkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB2aWRlbyB9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBhZGRDb21tZW50KHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHZpZGVvID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgfVxuICB9KVxuXG4gIGlmICghdmlkZW8pIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBtZXNzYWdlOiBgVGhlIHZpZGVvIHdpdGggJHtyZXEucGFyYW1zLnZpZGVvSWR9IGRvZXNuJ3QgZXhpc3RgLFxuICAgICAgc3RhdHVzQ29kZTogNDA0XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGNvbW1lbnQgPSBhd2FpdCBwcmlzbWEuY29tbWVudC5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIHRleHQ6IHJlcS5ib2R5LnRleHQsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICBpZDogcmVxLnVzZXIuaWRcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHZpZGVvOiB7XG4gICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICBpZDogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBjb21tZW50IH0pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNvbW1lbnQocmVxLCByZXMpIHtcbiAgY29uc3QgY29tbWVudCA9IGF3YWl0IHByaXNtYS5jb21tZW50LmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogcmVxLnBhcmFtcy5jb21tZW50SWRcbiAgICB9LFxuICAgIHNlbGVjdDoge1xuICAgICAgdXNlcklkOiB0cnVlXG4gICAgfVxuICB9KVxuXG4gIGlmIChjb21tZW50LnVzZXJJZCAhPT0gcmVxLnVzZXIuaWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoXCJZb3UgYXJlIG5vdCBhdXRob3Jpc2VkIHRvIGRlbGV0ZSB0aGlzIGNvbW1lbnRcIilcbiAgfVxuXG4gIGF3YWl0IHByaXNtYS5jb21tZW50LmRlbGV0ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLmNvbW1lbnRJZFxuICAgIH1cbiAgfSk7XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe30pLnNlbmQoKVxufVxuXG5hc3luYyBmdW5jdGlvbiBhZGRWaWRlb1ZpZXcocmVxLCByZXMsIG5leHQpIHtcbiAgY29uc3QgdmlkZW8gPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF2aWRlbykge1xuICAgIHJldHVybiBuZXh0KHtcbiAgICAgIG1lc3NhZ2U6IGBUaGUgdmlkZW8gd2l0aCAke3JlcS5wYXJhbXMudmlkZW9JZH0gaWQgZG9lc24ndCBleGlzdGAsXG4gICAgICBzdGF0dXNDb2RlOiA0MDRcbiAgICB9KVxuICB9XG5cbiAgaWYgKHJlcS51c2VyKSB7XG4gICAgYXdhaXQgcHJpc21hLnZpZXcuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdmlkZW86IHtcbiAgICAgICAgICBjb25uZWN0OiB7XG4gICAgICAgICAgICBpZDogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgICAgaWQ6IHJlcS51c2VyLmlkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfSBlbHNlIHtcbiAgICBhd2FpdCBwcmlzbWEudmlldy5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB2aWRlbzoge1xuICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe30pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpa2VWaWRlbyhyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB2aWRlbyA9IGF3YWl0IHByaXNtYS52aWRlby5maW5kVW5pcXVlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgIH1cbiAgfSlcblxuICBpZiAoIXZpZGVvKSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogXCJUaGUgdmlkZW8gZG9lc25gdCBleGlzdFwiLFxuICAgICAgc3RhdHVzQ29kZTogNDA0XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGlzTGlrZWQgPSBhd2FpdCBwcmlzbWEudmlkZW9MaWtlLmZpbmRGaXJzdCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHVzZXJJZDoge1xuICAgICAgICBlcXVhbHM6IHJlcS51c2VyLmlkXG4gICAgICB9LFxuICAgICAgdmlkZW9JZDoge1xuICAgICAgICBlcXVhbHM6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgICAgfSxcbiAgICAgIGxpa2U6IHtcbiAgICAgICAgZXF1YWxzOiAxXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IGlzRGlzbGlrZWQgPSBhd2FpdCBwcmlzbWEudmlkZW9MaWtlLmZpbmRGaXJzdCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHVzZXJJZDoge1xuICAgICAgICBlcXVhbHM6IHJlcS51c2VyLmlkXG4gICAgICB9LFxuICAgICAgdmlkZW9JZDoge1xuICAgICAgICBlcXVhbHM6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgICAgfSxcbiAgICAgIGxpa2U6IHtcbiAgICAgICAgZXF1YWxzOiAtMVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBpZiAoaXNMaWtlZCkge1xuICAgIGF3YWl0IHByaXNtYS52aWRlb0xpa2UuZGVsZXRlKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkOiBpc0xpa2VkLmlkXG4gICAgICB9XG4gICAgfSlcbiAgfSBlbHNlIGlmIChpc0Rpc2xpa2VkKSB7XG4gICAgYXdhaXQgcHJpc21hLnZpZGVvTGlrZS51cGRhdGUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQ6IGlzRGlzbGlrZWQuaWRcbiAgICAgIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGxpa2U6IDFcbiAgICAgIH1cbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGF3YWl0IHByaXNtYS52aWRlb0xpa2UuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgIGlkOiByZXEudXNlci5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdmlkZW86IHtcbiAgICAgICAgICBjb25uZWN0OiB7XG4gICAgICAgICAgICBpZDogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBsaWtlOiAxXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHt9KVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRpc2xpa2VWaWRlbyhyZXEsIHJlcywgbmV4dCkge1xuXG4gIGNvbnN0IHZpZGVvID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgfVxuICB9KVxuXG4gIGlmICghdmlkZW8pIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIlRoZSB2aWRlbyBkb2VzbmB0IGV4aXN0XCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDRcbiAgICB9KVxuICB9XG5cbiAgY29uc3QgaXNMaWtlZCA9IGF3YWl0IHByaXNtYS52aWRlb0xpa2UuZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgIH0sXG4gICAgICB2aWRlb0lkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICB9LFxuICAgICAgbGlrZToge1xuICAgICAgICBlcXVhbHM6IDFcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgaXNEaXNsaWtlZCA9IGF3YWl0IHByaXNtYS52aWRlb0xpa2UuZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgIH0sXG4gICAgICB2aWRlb0lkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICB9LFxuICAgICAgbGlrZToge1xuICAgICAgICBlcXVhbHM6IC0xXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGlmIChpc0Rpc2xpa2VkKSB7XG4gICAgYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5kZWxldGUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQ6IGlzRGlzbGlrZWQuaWRcbiAgICAgIH1cbiAgICB9KVxuICB9IGVsc2UgaWYgKGlzTGlrZWQpIHtcbiAgICBhd2FpdCBwcmlzbWEudmlkZW9MaWtlLnVwZGF0ZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZDogaXNMaWtlZC5pZFxuICAgICAgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbGlrZTogLTFcbiAgICAgIH1cbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIGF3YWl0IHByaXNtYS52aWRlb0xpa2UuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgIGlkOiByZXEudXNlci5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdmlkZW86IHtcbiAgICAgICAgICBjb25uZWN0OiB7XG4gICAgICAgICAgICBpZDogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBsaWtlOiAtMVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7fSlcblxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRWaWRlbyhyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB2aWRlbyA9IGF3YWl0IHByaXNtYS52aWRlby5maW5kVW5pcXVlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgdXNlcjogdHJ1ZSxcbiAgICAgIGNvbW1lbnRzOiB7XG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2VyOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IFwiZGVzY1wiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF2aWRlbykge1xuICAgIHJldHVybiBuZXh0KHtcbiAgICAgIG1lc3NhZ2U6IGBWaWRlbyB3aXRoIElkOiBcIiR7cmVxLnBhcmFtcy52aWRlb0lkfVwiIG5vdCBmb3VuZGAsXG4gICAgICBzdGF0dXNDb2RlOiA0MDRcbiAgICB9KVxuICB9XG5cbiAgbGV0IGlzVmlkZW9NaW5lID0gZmFsc2U7XG4gIGxldCBpc0xpa2VkID0gZmFsc2U7XG4gIGxldCBpc0Rpc2xpa2VkID0gZmFsc2U7XG4gIGxldCBpc1N1YnNjcmliZWQgPSBmYWxzZTtcbiAgbGV0IGlzVmlld2VkID0gZmFsc2U7XG5cbiAgaWYgKHJlcS51c2VyKSB7XG4gICAgaXNWaWRlb01pbmUgPSByZXEudXNlci5pZCA9PT0gdmlkZW8udXNlcklkO1xuXG4gICAgaXNMaWtlZCA9IGF3YWl0IHByaXNtYS52aWRlb0xpa2UuZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHVzZXJJZDoge1xuICAgICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgICAgfSxcbiAgICAgICAgdmlkZW9JZDoge1xuICAgICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICAgIH0sXG4gICAgICAgIGxpa2U6IHtcbiAgICAgICAgICBlcXVhbHM6IDFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpc0Rpc2xpa2VkID0gYXdhaXQgcHJpc21hLnZpZGVvTGlrZS5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdXNlcklkOiB7XG4gICAgICAgICAgZXF1YWxzOiByZXEudXNlci5pZFxuICAgICAgICB9LFxuICAgICAgICB2aWRlb0lkOiB7XG4gICAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgICAgfSxcbiAgICAgICAgbGlrZToge1xuICAgICAgICAgIGVxdWFsczogLTFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpc1ZpZXdlZCA9IHByaXNtYS52aWV3LmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICB1c2VySWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHJlcS51c2VyLmlkXG4gICAgICAgIH0sXG4gICAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIGlzU3Vic2NyaWJlZCA9IGF3YWl0IHByaXNtYS5zdWJzY3JpcHRpb24uZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHN1YnNjcmliZXJJZDoge1xuICAgICAgICAgIGVxdWFsczogcmVxLnVzZXIuaWRcbiAgICAgICAgfSxcbiAgICAgICAgc3Vic2NyaWJlZFRvSWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHZpZGVvLnVzZXJJZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IGxpa2VzQ291bnQgPSBhd2FpdCBwcmlzbWEudmlkZW9MaWtlLmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgQU5EOiB7XG4gICAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgICBlcXVhbHM6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgICAgICB9LFxuICAgICAgICBsaWtlOiB7XG4gICAgICAgICAgZXF1YWxzOiAxXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgZGlzbGlrZXNDb3VudCA9IGF3YWl0IHByaXNtYS52aWRlb0xpa2UuY291bnQoe1xuICAgIHdoZXJlOiB7XG4gICAgICBBTkQ6IHtcbiAgICAgICAgdmlkZW9JZDoge1xuICAgICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICAgIH0sXG4gICAgICAgIGxpa2U6IHtcbiAgICAgICAgICBlcXVhbHM6IC0xXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgY29uc3Qgdmlld3MgPSBhd2FpdCBwcmlzbWEudmlldy5jb3VudCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiB2aWRlby5pZFxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBjb25zdCBzdWJzY3JpYmVyc0NvdW50ID0gYXdhaXQgcHJpc21hLnN1YnNjcmlwdGlvbi5jb3VudCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHN1YnNjcmliZWRUb0lkOiB7XG4gICAgICAgIGVxdWFsczogdmlkZW8udXNlcklkXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIHZpZGVvLmNvbW1lbnRzQ291bnQgPSB2aWRlby5jb21tZW50cy5sZW5ndGg7XG4gIHZpZGVvLmlzTGlrZWQgPSBCb29sZWFuKGlzTGlrZWQpO1xuICB2aWRlby5pc0Rpc2xpa2VkID0gQm9vbGVhbihpc0Rpc2xpa2VkKTtcbiAgdmlkZW8ubGlrZXNDb3VudCA9IGxpa2VzQ291bnQ7XG4gIHZpZGVvLnZpZXdzID0gdmlld3M7XG4gIHZpZGVvLmRpc2xpa2VzQ291bnQgPSBkaXNsaWtlc0NvdW50O1xuICB2aWRlby5pc1ZpZGVvTWluZSA9IGlzVmlkZW9NaW5lO1xuICB2aWRlby5pc1N1YnNjcmliZWQgPSBCb29sZWFuKGlzU3Vic2NyaWJlZCk7XG4gIHZpZGVvLmlzVmlld2VkID0gQm9vbGVhbihpc1ZpZXdlZCk7XG4gIHZpZGVvLnN1YnNjcmliZXJzQ291bnQgPSBzdWJzY3JpYmVyc0NvdW50O1xuXG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB2aWRlbyB9KVxufVxuXG5cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVZpZGVvKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHZpZGVvID0gYXdhaXQgcHJpc21hLnZpZGVvLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIHVzZXJJZDogdHJ1ZVxuICAgIH1cbiAgfSlcblxuICBpZiAocmVxLnVzZXIuaWQgIT09IHZpZGVvLnVzZXJJZCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZCgnWW91IGFyZSBub3QgYXV0aG9yaXpkIHRvIGRlbGV0ZSB0aGlzIHZpZGVvJyk7XG4gIH1cblxuICBpZiAoIXZpZGVvKSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogXCJUaGUgdmlkZW8gZG9lc25gdCBleGlzdFwiLFxuICAgICAgc3RhdHVzQ29kZTogNDA0XG4gICAgfSlcbiAgfVxuXG4gIGF3YWl0IHByaXNtYS52aWV3LmRlbGV0ZU1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICB2aWRlb0lkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGF3YWl0IHByaXNtYS5jb21tZW50LmRlbGV0ZU1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICB2aWRlb0lkOiB7XG4gICAgICAgIGVxdWFsczogcmVxLnBhcmFtcy52aWRlb0lkXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGF3YWl0IHByaXNtYS52aWRlb0xpa2UuZGVsZXRlTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHZpZGVvSWQ6IHtcbiAgICAgICAgZXF1YWxzOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgYXdhaXQgcHJpc21hLnZpZGVvLmRlbGV0ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiByZXEucGFyYW1zLnZpZGVvSWRcbiAgICB9XG4gIH0pXG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe30pXG59XG5cbmV4cG9ydCB7IGdldFZpZGVvUm91dGVzLCBnZXRWaWRlb1ZpZXdzIH07Il19",
    "map": {
      "version": 3,
      "sources": [
        "video.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getVideoRoutes",
        "router",
        "express",
        "Router",
        "get",
        "getRecommendedVideos",
        "post",
        "protect",
        "addVideo",
        "getTrendingVideos",
        "searchVideos",
        "getAuthUser",
        "getVideo",
        "addVideoView",
        "likeVideo",
        "dislikeVideo",
        "addComment",
        "delete",
        "deleteVideo",
        "deleteComment",
        "getVideoViews",
        "videos",
        "video",
        "views",
        "view",
        "count",
        "where",
        "videoId",
        "equals",
        "id",
        "req",
        "res",
        "findMany",
        "include",
        "user",
        "orderBy",
        "createdAt",
        "length",
        "status",
        "json",
        "sort",
        "a",
        "b",
        "next",
        "query",
        "statusCode",
        "message",
        "OR",
        "title",
        "contains",
        "mode",
        "description",
        "url",
        "thumbnail",
        "body",
        "create",
        "data",
        "connect",
        "findUnique",
        "params",
        "comment",
        "text",
        "commentId",
        "select",
        "userId",
        "send",
        "isLiked",
        "videoLike",
        "findFirst",
        "like",
        "isDisliked",
        "update",
        "comments",
        "isVideoMine",
        "isSubscribed",
        "isViewed",
        "subscription",
        "subscriberId",
        "subscribedToId",
        "likesCount",
        "AND",
        "dislikesCount",
        "subscribersCount",
        "commentsCount",
        "Boolean",
        "deleteMany"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express, { response } from \"express\";\nimport { PrismaClient } from \"@prisma/client\"\nimport { getAuthUser, protect } from \"../middleware/authorization\";\n\nconst prisma = new PrismaClient()\n\nfunction getVideoRoutes() {\n  const router = express.Router();\n\n  router.get('/', getRecommendedVideos)\n  router.post('/', protect, addVideo)\n\n  router.get('/trending', getTrendingVideos)\n  router.get('/search', searchVideos)\n\n  router.get('/:videoId', getAuthUser, getVideo)\n  router.get('/:videoId', getAuthUser, addVideoView)\n  router.get('/:videoId/like', protect, likeVideo)\n  router.get('/:videoId/dislike', protect, dislikeVideo)\n  router.post('/:videoId/comment', protect, addComment)\n  router.delete('/:videoId/delete', protect, deleteVideo)\n\n  router.delete('/:videoId/comment/:commentId', protect, deleteComment)\n\n  return router;\n}\n\nasync function getVideoViews(videos) {\n  for (const video of videos) {\n    const views = await prisma.view.count({\n      where: {\n        videoId: {\n          equals: video.id\n        }\n      }\n    })\n    video.views = views\n  }\n  return videos\n}\n\nasync function getRecommendedVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n  videos = await getVideoViews(videos)\n  res.status(200).json({ videos })\n\n}\n\nasync function getTrendingVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n  videos = await getVideoViews(videos)\n  videos.sort((a, b) => b.views - a.views)\n  res.status(200).json({ videos })\n\n}\n\nasync function searchVideos(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      statusCode: 400,\n      message: \"You haven`t entered the serachasd fasdf afgnkdcvbrjnbfjtbg\"\n    })\n  }\n\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    where: {\n      OR: [\n        {\n          title: {\n            contains: req.query.query,\n            mode: \"insensitive\"\n          }\n        },\n        {\n          description: {\n            contains: req.query.query,\n            mode: \"insensitive\"\n          },\n        }\n      ]\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n  videos = await getVideoViews(videos)\n  res.status(200).json({ videos })\n\n}\n\nasync function addVideo(req, res) {\n  const { title, description, url, thumbnail } = req.body;\n\n  const video = await prisma.video.create({\n    data: {\n      title, description, url, thumbnail,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      }\n    }\n  })\n\n  res.status(200).json({ video })\n}\n\nasync function addComment(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} doesn't exist`,\n      statusCode: 404\n    })\n  }\n\n  const comment = await prisma.comment.create({\n    data: {\n      text: req.body.text,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      },\n      video: {\n        connect: {\n          id: req.params.videoId\n        }\n      }\n    }\n  })\n\n  res.status(200).json({ comment })\n}\n\nasync function deleteComment(req, res) {\n  const comment = await prisma.comment.findUnique({\n    where: {\n      id: req.params.commentId\n    },\n    select: {\n      userId: true\n    }\n  })\n\n  if (comment.userId !== req.user.id) {\n    return res.status(401).send(\"You are not authorised to delete this comment\")\n  }\n\n  await prisma.comment.delete({\n    where: {\n      id: req.params.commentId\n    }\n  });\n\n  res.status(200).json({}).send()\n}\n\nasync function addVideoView(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} id doesn't exist`,\n      statusCode: 404\n    })\n  }\n\n  if (req.user) {\n    await prisma.view.create({\n      data: {\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        }\n      }\n    })\n  } else {\n    await prisma.view.create({\n      data: {\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        }\n      }\n    })\n  }\n\n  res.status(200).json({})\n}\n\nasync function likeVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    })\n  }\n\n  const isLiked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: 1\n      }\n    }\n  })\n\n  const isDisliked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: -1\n      }\n    }\n  })\n\n  if (isLiked) {\n    await prisma.videoLike.delete({\n      where: {\n        id: isLiked.id\n      }\n    })\n  } else if (isDisliked) {\n    await prisma.videoLike.update({\n      where: {\n        id: isDisliked.id\n      },\n      data: {\n        like: 1\n      }\n    })\n  } else {\n    await prisma.videoLike.create({\n      data: {\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        like: 1\n      }\n    })\n  }\n\n  res.status(200).json({})\n\n}\n\nasync function dislikeVideo(req, res, next) {\n\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    })\n  }\n\n  const isLiked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: 1\n      }\n    }\n  })\n\n  const isDisliked = await prisma.videoLike.findFirst({\n    where: {\n      userId: {\n        equals: req.user.id\n      },\n      videoId: {\n        equals: req.params.videoId\n      },\n      like: {\n        equals: -1\n      }\n    }\n  })\n\n  if (isDisliked) {\n    await prisma.videoLike.delete({\n      where: {\n        id: isDisliked.id\n      }\n    })\n  } else if (isLiked) {\n    await prisma.videoLike.update({\n      where: {\n        id: isLiked.id\n      },\n      data: {\n        like: -1\n      }\n    })\n  } else {\n    await prisma.videoLike.create({\n      data: {\n        user: {\n          connect: {\n            id: req.user.id\n          }\n        },\n        video: {\n          connect: {\n            id: req.params.videoId\n          }\n        },\n        like: -1\n      }\n    })\n  }\n\n  res.status(200).json({})\n\n}\n\nasync function getVideo(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    },\n    include: {\n      user: true,\n      comments: {\n        include: {\n          user: true\n        },\n        orderBy: {\n          createdAt: \"desc\"\n        }\n      }\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: `Video with Id: \"${req.params.videoId}\" not found`,\n      statusCode: 404\n    })\n  }\n\n  let isVideoMine = false;\n  let isLiked = false;\n  let isDisliked = false;\n  let isSubscribed = false;\n  let isViewed = false;\n\n  if (req.user) {\n    isVideoMine = req.user.id === video.userId;\n\n    isLiked = await prisma.videoLike.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: 1\n        }\n      }\n    })\n\n    isDisliked = await prisma.videoLike.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: -1\n        }\n      }\n    })\n\n    isViewed = prisma.view.findFirst({\n      where: {\n        userId: {\n          equals: req.user.id\n        },\n        videoId: {\n          equals: req.params.videoId\n        }\n      }\n    })\n\n    isSubscribed = await prisma.subscription.findFirst({\n      where: {\n        subscriberId: {\n          equals: req.user.id\n        },\n        subscribedToId: {\n          equals: video.userId\n        }\n      }\n    })\n  }\n\n  const likesCount = await prisma.videoLike.count({\n    where: {\n      AND: {\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: 1\n        }\n      }\n    }\n  })\n\n  const dislikesCount = await prisma.videoLike.count({\n    where: {\n      AND: {\n        videoId: {\n          equals: req.params.videoId\n        },\n        like: {\n          equals: -1\n        }\n      }\n    }\n  })\n\n  const views = await prisma.view.count({\n    where: {\n      videoId: {\n        equals: video.id\n      }\n    }\n  })\n\n  const subscribersCount = await prisma.subscription.count({\n    where: {\n      subscribedToId: {\n        equals: video.userId\n      }\n    }\n  })\n\n  video.commentsCount = video.comments.length;\n  video.isLiked = Boolean(isLiked);\n  video.isDisliked = Boolean(isDisliked);\n  video.likesCount = likesCount;\n  video.views = views;\n  video.dislikesCount = dislikesCount;\n  video.isVideoMine = isVideoMine;\n  video.isSubscribed = Boolean(isSubscribed);\n  video.isViewed = Boolean(isViewed);\n  video.subscribersCount = subscribersCount;\n\n\n  res.status(200).json({ video })\n}\n\n\nasync function deleteVideo(req, res) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    },\n    select: {\n      userId: true\n    }\n  })\n\n  if (req.user.id !== video.userId) {\n    return res.status(401).send('You are not authorizd to delete this video');\n  }\n\n  if (!video) {\n    return next({\n      message: \"The video doesn`t exist\",\n      statusCode: 404\n    })\n  }\n\n  await prisma.view.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  })\n\n  await prisma.comment.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  })\n\n  await prisma.videoLike.deleteMany({\n    where: {\n      videoId: {\n        equals: req.params.videoId\n      }\n    }\n  })\n\n  await prisma.video.delete({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  res.status(200).json({})\n}\n\nexport { getVideoRoutes, getVideoViews };"
      ]
    },
    "sourceType": "script",
    "mtime": 1633853746050
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/error.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/error.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/error.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/",
        "sourceFileName": "error.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.errorMiddleware = errorMiddleware;\nexports.setupCloseOnExit = setupCloseOnExit;\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Middleware that will help us catch generic express-related errors\nfunction errorMiddleware(error, req, res, next) {\n  if (res.headersSent) {\n    next(error);\n  } else {\n    _loglevel.default.error(error);\n\n    res.status(error.statusCode || 500);\n    res.json({\n      message: error.message,\n      ...(process.env.NODE_ENV === \"production\" ? null : {\n        stack: error.stack\n      })\n    });\n  }\n} // This closes the server in the event of an error so\n// that our requests do not hang\n\n\nfunction setupCloseOnExit(server) {\n  async function exitHandler(options = {}) {\n    await server.close().then(() => {\n      _loglevel.default.info(\"Server successfully closed\");\n    }).catch(error => {\n      _loglevel.default.warn(\"Something went wrong closing the server\", error.stack);\n    });\n    if (options.exit) process.exit();\n  } // Do something when app is closing\n\n\n  process.on(\"exit\", exitHandler); // Catches ctrl+c event\n\n  process.on(\"SIGINT\", exitHandler.bind(null, {\n    exit: true\n  })); // Catches \"kill pid\" (for example: nodemon restart)\n\n  process.on(\"SIGUSR1\", exitHandler.bind(null, {\n    exit: true\n  }));\n  process.on(\"SIGUSR2\", exitHandler.bind(null, {\n    exit: true\n  })); // Catches uncaught exceptions\n\n  process.on(\"uncaughtException\", exitHandler.bind(null, {\n    exit: true\n  }));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVycm9yLmpzIl0sIm5hbWVzIjpbImVycm9yTWlkZGxld2FyZSIsImVycm9yIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlcnNTZW50IiwibG9nZ2VyIiwic3RhdHVzIiwic3RhdHVzQ29kZSIsImpzb24iLCJtZXNzYWdlIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic3RhY2siLCJzZXR1cENsb3NlT25FeGl0Iiwic2VydmVyIiwiZXhpdEhhbmRsZXIiLCJvcHRpb25zIiwiY2xvc2UiLCJ0aGVuIiwiaW5mbyIsImNhdGNoIiwid2FybiIsImV4aXQiLCJvbiIsImJpbmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7Ozs7QUFFQTtBQUNBLFNBQVNBLGVBQVQsQ0FBeUJDLEtBQXpCLEVBQWdDQyxHQUFoQyxFQUFxQ0MsR0FBckMsRUFBMENDLElBQTFDLEVBQWdEO0FBQzlDLE1BQUlELEdBQUcsQ0FBQ0UsV0FBUixFQUFxQjtBQUNuQkQsSUFBQUEsSUFBSSxDQUFDSCxLQUFELENBQUo7QUFDRCxHQUZELE1BRU87QUFDTEssc0JBQU9MLEtBQVAsQ0FBYUEsS0FBYjs7QUFDQUUsSUFBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVdOLEtBQUssQ0FBQ08sVUFBTixJQUFvQixHQUEvQjtBQUNBTCxJQUFBQSxHQUFHLENBQUNNLElBQUosQ0FBUztBQUNQQyxNQUFBQSxPQUFPLEVBQUVULEtBQUssQ0FBQ1MsT0FEUjtBQUVQLFVBQUlDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxRQUFaLEtBQXlCLFlBQXpCLEdBQ0EsSUFEQSxHQUVBO0FBQUVDLFFBQUFBLEtBQUssRUFBRWIsS0FBSyxDQUFDYTtBQUFmLE9BRko7QUFGTyxLQUFUO0FBTUQ7QUFDRixDLENBRUQ7QUFDQTs7O0FBQ0EsU0FBU0MsZ0JBQVQsQ0FBMEJDLE1BQTFCLEVBQWtDO0FBQ2hDLGlCQUFlQyxXQUFmLENBQTJCQyxPQUFPLEdBQUcsRUFBckMsRUFBeUM7QUFDdkMsVUFBTUYsTUFBTSxDQUNURyxLQURHLEdBRUhDLElBRkcsQ0FFRSxNQUFNO0FBQ1ZkLHdCQUFPZSxJQUFQLENBQVksNEJBQVo7QUFDRCxLQUpHLEVBS0hDLEtBTEcsQ0FLSXJCLEtBQUQsSUFBVztBQUNoQkssd0JBQU9pQixJQUFQLENBQVkseUNBQVosRUFBdUR0QixLQUFLLENBQUNhLEtBQTdEO0FBQ0QsS0FQRyxDQUFOO0FBUUEsUUFBSUksT0FBTyxDQUFDTSxJQUFaLEVBQWtCYixPQUFPLENBQUNhLElBQVI7QUFDbkIsR0FYK0IsQ0FZaEM7OztBQUNBYixFQUFBQSxPQUFPLENBQUNjLEVBQVIsQ0FBVyxNQUFYLEVBQW1CUixXQUFuQixFQWJnQyxDQWNoQzs7QUFDQU4sRUFBQUEsT0FBTyxDQUFDYyxFQUFSLENBQVcsUUFBWCxFQUFxQlIsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQXJCLEVBZmdDLENBZ0JoQzs7QUFDQWIsRUFBQUEsT0FBTyxDQUFDYyxFQUFSLENBQVcsU0FBWCxFQUFzQlIsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQXRCO0FBQ0FiLEVBQUFBLE9BQU8sQ0FBQ2MsRUFBUixDQUFXLFNBQVgsRUFBc0JSLFdBQVcsQ0FBQ1MsSUFBWixDQUFpQixJQUFqQixFQUF1QjtBQUFFRixJQUFBQSxJQUFJLEVBQUU7QUFBUixHQUF2QixDQUF0QixFQWxCZ0MsQ0FtQmhDOztBQUNBYixFQUFBQSxPQUFPLENBQUNjLEVBQVIsQ0FBVyxtQkFBWCxFQUFnQ1IsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQWhDO0FBQ0QiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvcmVlZGJhcmdlci15b3V0dWJlLXJlYWN0L0phdmFTY3JpcHQveW91VHViZS9zZXJ2ZXIvc3JjL21pZGRsZXdhcmUvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZ2dlciBmcm9tIFwibG9nbGV2ZWxcIjtcblxuLy8gTWlkZGxld2FyZSB0aGF0IHdpbGwgaGVscCB1cyBjYXRjaCBnZW5lcmljIGV4cHJlc3MtcmVsYXRlZCBlcnJvcnNcbmZ1bmN0aW9uIGVycm9yTWlkZGxld2FyZShlcnJvciwgcmVxLCByZXMsIG5leHQpIHtcbiAgaWYgKHJlcy5oZWFkZXJzU2VudCkge1xuICAgIG5leHQoZXJyb3IpO1xuICB9IGVsc2Uge1xuICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgcmVzLnN0YXR1cyhlcnJvci5zdGF0dXNDb2RlIHx8IDUwMCk7XG4gICAgcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIC4uLihwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCJcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogeyBzdGFjazogZXJyb3Iuc3RhY2sgfSksXG4gICAgfSk7XG4gIH1cbn1cblxuLy8gVGhpcyBjbG9zZXMgdGhlIHNlcnZlciBpbiB0aGUgZXZlbnQgb2YgYW4gZXJyb3Igc29cbi8vIHRoYXQgb3VyIHJlcXVlc3RzIGRvIG5vdCBoYW5nXG5mdW5jdGlvbiBzZXR1cENsb3NlT25FeGl0KHNlcnZlcikge1xuICBhc3luYyBmdW5jdGlvbiBleGl0SGFuZGxlcihvcHRpb25zID0ge30pIHtcbiAgICBhd2FpdCBzZXJ2ZXJcbiAgICAgIC5jbG9zZSgpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGxvZ2dlci5pbmZvKFwiU2VydmVyIHN1Y2Nlc3NmdWxseSBjbG9zZWRcIik7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBsb2dnZXIud2FybihcIlNvbWV0aGluZyB3ZW50IHdyb25nIGNsb3NpbmcgdGhlIHNlcnZlclwiLCBlcnJvci5zdGFjayk7XG4gICAgICB9KTtcbiAgICBpZiAob3B0aW9ucy5leGl0KSBwcm9jZXNzLmV4aXQoKTtcbiAgfVxuICAvLyBEbyBzb21ldGhpbmcgd2hlbiBhcHAgaXMgY2xvc2luZ1xuICBwcm9jZXNzLm9uKFwiZXhpdFwiLCBleGl0SGFuZGxlcik7XG4gIC8vIENhdGNoZXMgY3RybCtjIGV2ZW50XG4gIHByb2Nlc3Mub24oXCJTSUdJTlRcIiwgZXhpdEhhbmRsZXIuYmluZChudWxsLCB7IGV4aXQ6IHRydWUgfSkpO1xuICAvLyBDYXRjaGVzIFwia2lsbCBwaWRcIiAoZm9yIGV4YW1wbGU6IG5vZGVtb24gcmVzdGFydClcbiAgcHJvY2Vzcy5vbihcIlNJR1VTUjFcIiwgZXhpdEhhbmRsZXIuYmluZChudWxsLCB7IGV4aXQ6IHRydWUgfSkpO1xuICBwcm9jZXNzLm9uKFwiU0lHVVNSMlwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG4gIC8vIENhdGNoZXMgdW5jYXVnaHQgZXhjZXB0aW9uc1xuICBwcm9jZXNzLm9uKFwidW5jYXVnaHRFeGNlcHRpb25cIiwgZXhpdEhhbmRsZXIuYmluZChudWxsLCB7IGV4aXQ6IHRydWUgfSkpO1xufVxuXG5leHBvcnQgeyBlcnJvck1pZGRsZXdhcmUsIHNldHVwQ2xvc2VPbkV4aXQgfTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "error.js"
      ],
      "names": [
        "errorMiddleware",
        "error",
        "req",
        "res",
        "next",
        "headersSent",
        "logger",
        "status",
        "statusCode",
        "json",
        "message",
        "process",
        "env",
        "NODE_ENV",
        "stack",
        "setupCloseOnExit",
        "server",
        "exitHandler",
        "options",
        "close",
        "then",
        "info",
        "catch",
        "warn",
        "exit",
        "on",
        "bind"
      ],
      "mappings": ";;;;;;;;AAAA;;;;AAEA;AACA,SAASA,eAAT,CAAyBC,KAAzB,EAAgCC,GAAhC,EAAqCC,GAArC,EAA0CC,IAA1C,EAAgD;AAC9C,MAAID,GAAG,CAACE,WAAR,EAAqB;AACnBD,IAAAA,IAAI,CAACH,KAAD,CAAJ;AACD,GAFD,MAEO;AACLK,sBAAOL,KAAP,CAAaA,KAAb;;AACAE,IAAAA,GAAG,CAACI,MAAJ,CAAWN,KAAK,CAACO,UAAN,IAAoB,GAA/B;AACAL,IAAAA,GAAG,CAACM,IAAJ,CAAS;AACPC,MAAAA,OAAO,EAAET,KAAK,CAACS,OADR;AAEP,UAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACA,IADA,GAEA;AAAEC,QAAAA,KAAK,EAAEb,KAAK,CAACa;AAAf,OAFJ;AAFO,KAAT;AAMD;AACF,C,CAED;AACA;;;AACA,SAASC,gBAAT,CAA0BC,MAA1B,EAAkC;AAChC,iBAAeC,WAAf,CAA2BC,OAAO,GAAG,EAArC,EAAyC;AACvC,UAAMF,MAAM,CACTG,KADG,GAEHC,IAFG,CAEE,MAAM;AACVd,wBAAOe,IAAP,CAAY,4BAAZ;AACD,KAJG,EAKHC,KALG,CAKIrB,KAAD,IAAW;AAChBK,wBAAOiB,IAAP,CAAY,yCAAZ,EAAuDtB,KAAK,CAACa,KAA7D;AACD,KAPG,CAAN;AAQA,QAAII,OAAO,CAACM,IAAZ,EAAkBb,OAAO,CAACa,IAAR;AACnB,GAX+B,CAYhC;;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,MAAX,EAAmBR,WAAnB,EAbgC,CAchC;;AACAN,EAAAA,OAAO,CAACc,EAAR,CAAW,QAAX,EAAqBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAArB,EAfgC,CAgBhC;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,SAAX,EAAsBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAtB;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,SAAX,EAAsBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAtB,EAlBgC,CAmBhC;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,mBAAX,EAAgCR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAhC;AACD",
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/middleware/",
      "sourcesContent": [
        "import logger from \"loglevel\";\n\n// Middleware that will help us catch generic express-related errors\nfunction errorMiddleware(error, req, res, next) {\n  if (res.headersSent) {\n    next(error);\n  } else {\n    logger.error(error);\n    res.status(error.statusCode || 500);\n    res.json({\n      message: error.message,\n      ...(process.env.NODE_ENV === \"production\"\n        ? null\n        : { stack: error.stack }),\n    });\n  }\n}\n\n// This closes the server in the event of an error so\n// that our requests do not hang\nfunction setupCloseOnExit(server) {\n  async function exitHandler(options = {}) {\n    await server\n      .close()\n      .then(() => {\n        logger.info(\"Server successfully closed\");\n      })\n      .catch((error) => {\n        logger.warn(\"Something went wrong closing the server\", error.stack);\n      });\n    if (options.exit) process.exit();\n  }\n  // Do something when app is closing\n  process.on(\"exit\", exitHandler);\n  // Catches ctrl+c event\n  process.on(\"SIGINT\", exitHandler.bind(null, { exit: true }));\n  // Catches \"kill pid\" (for example: nodemon restart)\n  process.on(\"SIGUSR1\", exitHandler.bind(null, { exit: true }));\n  process.on(\"SIGUSR2\", exitHandler.bind(null, { exit: true }));\n  // Catches uncaught exceptions\n  process.on(\"uncaughtException\", exitHandler.bind(null, { exit: true }));\n}\n\nexport { errorMiddleware, setupCloseOnExit };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/start.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/start.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/start.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/start.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/",
        "sourceFileName": "start.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.startServer = startServer;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nrequire(\"express-async-errors\");\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\n\nvar _routes = require(\"./routes\");\n\nvar _error = require(\"./middleware/error\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Import this module to handle errors when using async functions for our route handlers\n_dotenv.default.config();\n\nfunction startServer({\n  port = process.env.PORT\n} = {}) {\n  const app = (0, _express.default)();\n  app.use((0, _morgan.default)(\"dev\"));\n  app.use((0, _cors.default)());\n  app.use((0, _cookieParser.default)());\n  app.use(_express.default.json()); // all API routes are prefixed with /api/v1\n\n  app.use(\"/api/v1\", (0, _routes.getRoutes)()); // Generic error handler if errors are missed by 'express-async-errors' middleware\n\n  app.use(_error.errorMiddleware); // When our project is pushed to production, we will serve // the react app using express.static() middleware\n\n  if (process.env.NODE_ENV === \"production\") {\n    app.use(_express.default.static(_path.default.resolve(__dirname, \"../client/build\"))); // Any request not caught by our API will be routed\n    // to our built react app\n\n    app.get(\"*\", function (req, res) {\n      res.sendFile(_path.default.resolve(__dirname, \"../client/build\", \"index.html\"));\n    });\n  } // This block of code is made to reliably start and close our express app\n  // It is written as a promise, which can be more easily tested\n\n\n  return new Promise(resolve => {\n    const server = app.listen(port, () => {\n      _loglevel.default.info(`Listening on port ${server.address().port}`);\n\n      const originalClose = server.close.bind(server);\n\n      server.close = () => {\n        return new Promise(resolveClose => {\n          originalClose(resolveClose);\n        });\n      }; // This function properly closes the server when the program exits\n\n\n      (0, _error.setupCloseOnExit)(server);\n      resolve(server);\n    });\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXJ0LmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsInN0YXJ0U2VydmVyIiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwiYXBwIiwidXNlIiwiZXhwcmVzcyIsImpzb24iLCJlcnJvck1pZGRsZXdhcmUiLCJOT0RFX0VOViIsInN0YXRpYyIsInBhdGgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiZ2V0IiwicmVxIiwicmVzIiwic2VuZEZpbGUiLCJQcm9taXNlIiwic2VydmVyIiwibGlzdGVuIiwibG9nZ2VyIiwiaW5mbyIsImFkZHJlc3MiLCJvcmlnaW5hbENsb3NlIiwiY2xvc2UiLCJiaW5kIiwicmVzb2x2ZUNsb3NlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFWQTtBQVlBQSxnQkFBT0MsTUFBUDs7QUFFQSxTQUFTQyxXQUFULENBQXFCO0FBQUVDLEVBQUFBLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDO0FBQXJCLElBQThCLEVBQW5ELEVBQXVEO0FBQ3JELFFBQU1DLEdBQUcsR0FBRyx1QkFBWjtBQUNBQSxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxxQkFBTyxLQUFQLENBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsb0JBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsNEJBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVFDLGlCQUFRQyxJQUFSLEVBQVIsRUFMcUQsQ0FNckQ7O0FBQ0FILEVBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLFNBQVIsRUFBbUIsd0JBQW5CLEVBUHFELENBU3JEOztBQUNBRCxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUUcsc0JBQVIsRUFWcUQsQ0FZckQ7O0FBQ0EsTUFBSVAsT0FBTyxDQUFDQyxHQUFSLENBQVlPLFFBQVosS0FBeUIsWUFBN0IsRUFBMkM7QUFDekNMLElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxpQkFBUUksTUFBUixDQUFlQyxjQUFLQyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsaUJBQXhCLENBQWYsQ0FBUixFQUR5QyxDQUd6QztBQUNBOztBQUNBVCxJQUFBQSxHQUFHLENBQUNVLEdBQUosQ0FBUSxHQUFSLEVBQWEsVUFBVUMsR0FBVixFQUFlQyxHQUFmLEVBQW9CO0FBQy9CQSxNQUFBQSxHQUFHLENBQUNDLFFBQUosQ0FBYU4sY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLGlCQUF4QixFQUEyQyxZQUEzQyxDQUFiO0FBQ0QsS0FGRDtBQUdELEdBckJvRCxDQXVCckQ7QUFDQTs7O0FBQ0EsU0FBTyxJQUFJSyxPQUFKLENBQWFOLE9BQUQsSUFBYTtBQUM5QixVQUFNTyxNQUFNLEdBQUdmLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBV3BCLElBQVgsRUFBaUIsTUFBTTtBQUNwQ3FCLHdCQUFPQyxJQUFQLENBQWEscUJBQW9CSCxNQUFNLENBQUNJLE9BQVAsR0FBaUJ2QixJQUFLLEVBQXZEOztBQUVBLFlBQU13QixhQUFhLEdBQUdMLE1BQU0sQ0FBQ00sS0FBUCxDQUFhQyxJQUFiLENBQWtCUCxNQUFsQixDQUF0Qjs7QUFDQUEsTUFBQUEsTUFBTSxDQUFDTSxLQUFQLEdBQWUsTUFBTTtBQUNuQixlQUFPLElBQUlQLE9BQUosQ0FBYVMsWUFBRCxJQUFrQjtBQUNuQ0gsVUFBQUEsYUFBYSxDQUFDRyxZQUFELENBQWI7QUFDRCxTQUZNLENBQVA7QUFHRCxPQUpELENBSm9DLENBU3BDOzs7QUFDQSxtQ0FBaUJSLE1BQWpCO0FBQ0FQLE1BQUFBLE9BQU8sQ0FBQ08sTUFBRCxDQUFQO0FBQ0QsS0FaYyxDQUFmO0FBYUQsR0FkTSxDQUFQO0FBZUQiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvcmVlZGJhcmdlci15b3V0dWJlLXJlYWN0L0phdmFTY3JpcHQveW91VHViZS9zZXJ2ZXIvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG4vLyBJbXBvcnQgdGhpcyBtb2R1bGUgdG8gaGFuZGxlIGVycm9ycyB3aGVuIHVzaW5nIGFzeW5jIGZ1bmN0aW9ucyBmb3Igb3VyIHJvdXRlIGhhbmRsZXJzXG5pbXBvcnQgXCJleHByZXNzLWFzeW5jLWVycm9yc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCJsb2dsZXZlbFwiO1xuaW1wb3J0IG1vcmdhbiBmcm9tIFwibW9yZ2FuXCI7XG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSBcImNvb2tpZS1wYXJzZXJcIjtcblxuaW1wb3J0IHsgZ2V0Um91dGVzIH0gZnJvbSBcIi4vcm91dGVzXCI7XG5pbXBvcnQgeyBlcnJvck1pZGRsZXdhcmUsIHNldHVwQ2xvc2VPbkV4aXQgfSBmcm9tIFwiLi9taWRkbGV3YXJlL2Vycm9yXCI7XG5cbmRvdGVudi5jb25maWcoKTtcblxuZnVuY3Rpb24gc3RhcnRTZXJ2ZXIoeyBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB9ID0ge30pIHtcbiAgY29uc3QgYXBwID0gZXhwcmVzcygpO1xuICBhcHAudXNlKG1vcmdhbihcImRldlwiKSk7XG4gIGFwcC51c2UoY29ycygpKTtcbiAgYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG4gIGFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuICAvLyBhbGwgQVBJIHJvdXRlcyBhcmUgcHJlZml4ZWQgd2l0aCAvYXBpL3YxXG4gIGFwcC51c2UoXCIvYXBpL3YxXCIsIGdldFJvdXRlcygpKTtcblxuICAvLyBHZW5lcmljIGVycm9yIGhhbmRsZXIgaWYgZXJyb3JzIGFyZSBtaXNzZWQgYnkgJ2V4cHJlc3MtYXN5bmMtZXJyb3JzJyBtaWRkbGV3YXJlXG4gIGFwcC51c2UoZXJyb3JNaWRkbGV3YXJlKTtcblxuICAvLyBXaGVuIG91ciBwcm9qZWN0IGlzIHB1c2hlZCB0byBwcm9kdWN0aW9uLCB3ZSB3aWxsIHNlcnZlIC8vIHRoZSByZWFjdCBhcHAgdXNpbmcgZXhwcmVzcy5zdGF0aWMoKSBtaWRkbGV3YXJlXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBhcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiLi4vY2xpZW50L2J1aWxkXCIpKSk7XG5cbiAgICAvLyBBbnkgcmVxdWVzdCBub3QgY2F1Z2h0IGJ5IG91ciBBUEkgd2lsbCBiZSByb3V0ZWRcbiAgICAvLyB0byBvdXIgYnVpbHQgcmVhY3QgYXBwXG4gICAgYXBwLmdldChcIipcIiwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gICAgICByZXMuc2VuZEZpbGUocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuLi9jbGllbnQvYnVpbGRcIiwgXCJpbmRleC5odG1sXCIpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFRoaXMgYmxvY2sgb2YgY29kZSBpcyBtYWRlIHRvIHJlbGlhYmx5IHN0YXJ0IGFuZCBjbG9zZSBvdXIgZXhwcmVzcyBhcHBcbiAgLy8gSXQgaXMgd3JpdHRlbiBhcyBhIHByb21pc2UsIHdoaWNoIGNhbiBiZSBtb3JlIGVhc2lseSB0ZXN0ZWRcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgY29uc3Qgc2VydmVyID0gYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbyhgTGlzdGVuaW5nIG9uIHBvcnQgJHtzZXJ2ZXIuYWRkcmVzcygpLnBvcnR9YCk7XG5cbiAgICAgIGNvbnN0IG9yaWdpbmFsQ2xvc2UgPSBzZXJ2ZXIuY2xvc2UuYmluZChzZXJ2ZXIpO1xuICAgICAgc2VydmVyLmNsb3NlID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmVDbG9zZSkgPT4ge1xuICAgICAgICAgIG9yaWdpbmFsQ2xvc2UocmVzb2x2ZUNsb3NlKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgLy8gVGhpcyBmdW5jdGlvbiBwcm9wZXJseSBjbG9zZXMgdGhlIHNlcnZlciB3aGVuIHRoZSBwcm9ncmFtIGV4aXRzXG4gICAgICBzZXR1cENsb3NlT25FeGl0KHNlcnZlcik7XG4gICAgICByZXNvbHZlKHNlcnZlcik7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgeyBzdGFydFNlcnZlciB9O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "start.js"
      ],
      "names": [
        "dotenv",
        "config",
        "startServer",
        "port",
        "process",
        "env",
        "PORT",
        "app",
        "use",
        "express",
        "json",
        "errorMiddleware",
        "NODE_ENV",
        "static",
        "path",
        "resolve",
        "__dirname",
        "get",
        "req",
        "res",
        "sendFile",
        "Promise",
        "server",
        "listen",
        "logger",
        "info",
        "address",
        "originalClose",
        "close",
        "bind",
        "resolveClose"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAVA;AAYAA,gBAAOC,MAAP;;AAEA,SAASC,WAAT,CAAqB;AAAEC,EAAAA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC;AAArB,IAA8B,EAAnD,EAAuD;AACrD,QAAMC,GAAG,GAAG,uBAAZ;AACAA,EAAAA,GAAG,CAACC,GAAJ,CAAQ,qBAAO,KAAP,CAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQ,4BAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQC,IAAR,EAAR,EALqD,CAMrD;;AACAH,EAAAA,GAAG,CAACC,GAAJ,CAAQ,SAAR,EAAmB,wBAAnB,EAPqD,CASrD;;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQG,sBAAR,EAVqD,CAYrD;;AACA,MAAIP,OAAO,CAACC,GAAR,CAAYO,QAAZ,KAAyB,YAA7B,EAA2C;AACzCL,IAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQI,MAAR,CAAeC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,CAAf,CAAR,EADyC,CAGzC;AACA;;AACAT,IAAAA,GAAG,CAACU,GAAJ,CAAQ,GAAR,EAAa,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC/BA,MAAAA,GAAG,CAACC,QAAJ,CAAaN,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,EAA2C,YAA3C,CAAb;AACD,KAFD;AAGD,GArBoD,CAuBrD;AACA;;;AACA,SAAO,IAAIK,OAAJ,CAAaN,OAAD,IAAa;AAC9B,UAAMO,MAAM,GAAGf,GAAG,CAACgB,MAAJ,CAAWpB,IAAX,EAAiB,MAAM;AACpCqB,wBAAOC,IAAP,CAAa,qBAAoBH,MAAM,CAACI,OAAP,GAAiBvB,IAAK,EAAvD;;AAEA,YAAMwB,aAAa,GAAGL,MAAM,CAACM,KAAP,CAAaC,IAAb,CAAkBP,MAAlB,CAAtB;;AACAA,MAAAA,MAAM,CAACM,KAAP,GAAe,MAAM;AACnB,eAAO,IAAIP,OAAJ,CAAaS,YAAD,IAAkB;AACnCH,UAAAA,aAAa,CAACG,YAAD,CAAb;AACD,SAFM,CAAP;AAGD,OAJD,CAJoC,CASpC;;;AACA,mCAAiBR,MAAjB;AACAP,MAAAA,OAAO,CAACO,MAAD,CAAP;AACD,KAZc,CAAf;AAaD,GAdM,CAAP;AAeD",
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/",
      "sourcesContent": [
        "import express from \"express\";\n// Import this module to handle errors when using async functions for our route handlers\nimport \"express-async-errors\";\nimport path from \"path\";\nimport cors from \"cors\";\nimport logger from \"loglevel\";\nimport morgan from \"morgan\";\nimport dotenv from \"dotenv\";\nimport cookieParser from \"cookie-parser\";\n\nimport { getRoutes } from \"./routes\";\nimport { errorMiddleware, setupCloseOnExit } from \"./middleware/error\";\n\ndotenv.config();\n\nfunction startServer({ port = process.env.PORT } = {}) {\n  const app = express();\n  app.use(morgan(\"dev\"));\n  app.use(cors());\n  app.use(cookieParser());\n  app.use(express.json());\n  // all API routes are prefixed with /api/v1\n  app.use(\"/api/v1\", getRoutes());\n\n  // Generic error handler if errors are missed by 'express-async-errors' middleware\n  app.use(errorMiddleware);\n\n  // When our project is pushed to production, we will serve // the react app using express.static() middleware\n  if (process.env.NODE_ENV === \"production\") {\n    app.use(express.static(path.resolve(__dirname, \"../client/build\")));\n\n    // Any request not caught by our API will be routed\n    // to our built react app\n    app.get(\"*\", function (req, res) {\n      res.sendFile(path.resolve(__dirname, \"../client/build\", \"index.html\"));\n    });\n  }\n\n  // This block of code is made to reliably start and close our express app\n  // It is written as a promise, which can be more easily tested\n  return new Promise((resolve) => {\n    const server = app.listen(port, () => {\n      logger.info(`Listening on port ${server.address().port}`);\n\n      const originalClose = server.close.bind(server);\n      server.close = () => {\n        return new Promise((resolveClose) => {\n          originalClose(resolveClose);\n        });\n      };\n      // This function properly closes the server when the program exits\n      setupCloseOnExit(server);\n      resolve(server);\n    });\n  });\n}\n\nexport { startServer };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/index.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRoutes = getRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _auth = require(\"./auth\");\n\nvar _user = require(\"./user\");\n\nvar _video = require(\"./video\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getRoutes() {\n  // All routes in our Node API are placed on this router\n  const router = _express.default.Router(); // router.use() prefixes our route (i.e. /api/v1/auth)\n\n\n  router.use(\"/auth\", (0, _auth.getAuthRoutes)());\n  router.use(\"/users\", (0, _user.getUserRoutes)());\n  router.use(\"/videos\", (0, _video.getVideoRoutes)());\n  return router;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImdldFJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJ1c2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUVBLFNBQVNBLFNBQVQsR0FBcUI7QUFDbkI7QUFDQSxRQUFNQyxNQUFNLEdBQUdDLGlCQUFRQyxNQUFSLEVBQWYsQ0FGbUIsQ0FJbkI7OztBQUNBRixFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxPQUFYLEVBQW9CLDBCQUFwQjtBQUNBSCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxRQUFYLEVBQXFCLDBCQUFyQjtBQUNBSCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxTQUFYLEVBQXNCLDRCQUF0QjtBQUVBLFNBQU9ILE1BQVA7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9yZWVkYmFyZ2VyLXlvdXR1YmUtcmVhY3QvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5cbmltcG9ydCB7IGdldEF1dGhSb3V0ZXMgfSBmcm9tIFwiLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRVc2VyUm91dGVzIH0gZnJvbSBcIi4vdXNlclwiO1xuaW1wb3J0IHsgZ2V0VmlkZW9Sb3V0ZXMgfSBmcm9tIFwiLi92aWRlb1wiO1xuXG5mdW5jdGlvbiBnZXRSb3V0ZXMoKSB7XG4gIC8vIEFsbCByb3V0ZXMgaW4gb3VyIE5vZGUgQVBJIGFyZSBwbGFjZWQgb24gdGhpcyByb3V0ZXJcbiAgY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuICAvLyByb3V0ZXIudXNlKCkgcHJlZml4ZXMgb3VyIHJvdXRlIChpLmUuIC9hcGkvdjEvYXV0aClcbiAgcm91dGVyLnVzZShcIi9hdXRoXCIsIGdldEF1dGhSb3V0ZXMoKSk7XG4gIHJvdXRlci51c2UoXCIvdXNlcnNcIiwgZ2V0VXNlclJvdXRlcygpKTtcbiAgcm91dGVyLnVzZShcIi92aWRlb3NcIiwgZ2V0VmlkZW9Sb3V0ZXMoKSk7XG5cbiAgcmV0dXJuIHJvdXRlcjtcbn1cblxuZXhwb3J0IHsgZ2V0Um91dGVzIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "getRoutes",
        "router",
        "express",
        "Router",
        "use"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;;;AAEA,SAASA,SAAT,GAAqB;AACnB;AACA,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf,CAFmB,CAInB;;;AACAF,EAAAA,MAAM,CAACG,GAAP,CAAW,OAAX,EAAoB,0BAApB;AACAH,EAAAA,MAAM,CAACG,GAAP,CAAW,QAAX,EAAqB,0BAArB;AACAH,EAAAA,MAAM,CAACG,GAAP,CAAW,SAAX,EAAsB,4BAAtB;AAEA,SAAOH,MAAP;AACD",
      "sourceRoot": "/Users/meroj/Desktop/reedbarger-youtube-react/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\n\nimport { getAuthRoutes } from \"./auth\";\nimport { getUserRoutes } from \"./user\";\nimport { getVideoRoutes } from \"./video\";\n\nfunction getRoutes() {\n  // All routes in our Node API are placed on this router\n  const router = express.Router();\n\n  // router.use() prefixes our route (i.e. /api/v1/auth)\n  router.use(\"/auth\", getAuthRoutes());\n  router.use(\"/users\", getUserRoutes());\n  router.use(\"/videos\", getVideoRoutes());\n\n  return router;\n}\n\nexport { getRoutes };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  }
}