{
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/index.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nvar _start = require(\"./start\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_loglevel.default.setLevel(\"info\");\n\n(0, _start.startServer)();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImxvZ2dlciIsInNldExldmVsIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOzs7O0FBQ0FBLGtCQUFPQyxRQUFQLENBQWdCLE1BQWhCOztBQUNBIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tZXJvai9EZXNrdG9wL0phdmFTY3JpcHQveW91VHViZS9zZXJ2ZXIvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2dnZXIgZnJvbSBcImxvZ2xldmVsXCI7XG5pbXBvcnQgeyBzdGFydFNlcnZlciB9IGZyb20gXCIuL3N0YXJ0XCI7XG5sb2dnZXIuc2V0TGV2ZWwoXCJpbmZvXCIpO1xuc3RhcnRTZXJ2ZXIoKTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "logger",
        "setLevel"
      ],
      "mappings": ";;AAAA;;AACA;;;;AACAA,kBAAOC,QAAP,CAAgB,MAAhB;;AACA",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
      "sourcesContent": [
        "import logger from \"loglevel\";\nimport { startServer } from \"./start\";\nlogger.setLevel(\"info\");\nstartServer();\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
        "sourceFileName": "start.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.startServer = startServer;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nrequire(\"express-async-errors\");\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\n\nvar _routes = require(\"./routes\");\n\nvar _error = require(\"./middleware/error\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Import this module to handle errors when using async functions for our route handlers\n_dotenv.default.config();\n\nfunction startServer({\n  port = process.env.PORT\n} = {}) {\n  const app = (0, _express.default)();\n  app.use((0, _morgan.default)(\"dev\"));\n  app.use((0, _cors.default)());\n  app.use((0, _cookieParser.default)());\n  app.use(_express.default.json()); // all API routes are prefixed with /api/v1\n\n  app.use(\"/api/v1\", (0, _routes.getRoutes)()); // Generic error handler if errors are missed by 'express-async-errors' middleware\n\n  app.use(_error.errorMiddleware); // When our project is pushed to production, we will serve // the react app using express.static() middleware\n\n  if (process.env.NODE_ENV === \"production\") {\n    app.use(_express.default.static(_path.default.resolve(__dirname, \"../client/build\"))); // Any request not caught by our API will be routed\n    // to our built react app\n\n    app.get(\"*\", function (req, res) {\n      res.sendFile(_path.default.resolve(__dirname, \"../client/build\", \"index.html\"));\n    });\n  } // This block of code is made to reliably start and close our express app\n  // It is written as a promise, which can be more easily tested\n\n\n  return new Promise(resolve => {\n    const server = app.listen(port, () => {\n      _loglevel.default.info(`Listening on port ${server.address().port}`);\n\n      const originalClose = server.close.bind(server);\n\n      server.close = () => {\n        return new Promise(resolveClose => {\n          originalClose(resolveClose);\n        });\n      }; // This function properly closes the server when the program exits\n\n\n      (0, _error.setupCloseOnExit)(server);\n      resolve(server);\n    });\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXJ0LmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsInN0YXJ0U2VydmVyIiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwiYXBwIiwidXNlIiwiZXhwcmVzcyIsImpzb24iLCJlcnJvck1pZGRsZXdhcmUiLCJOT0RFX0VOViIsInN0YXRpYyIsInBhdGgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiZ2V0IiwicmVxIiwicmVzIiwic2VuZEZpbGUiLCJQcm9taXNlIiwic2VydmVyIiwibGlzdGVuIiwibG9nZ2VyIiwiaW5mbyIsImFkZHJlc3MiLCJvcmlnaW5hbENsb3NlIiwiY2xvc2UiLCJiaW5kIiwicmVzb2x2ZUNsb3NlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFWQTtBQVlBQSxnQkFBT0MsTUFBUDs7QUFFQSxTQUFTQyxXQUFULENBQXFCO0FBQUVDLEVBQUFBLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDO0FBQXJCLElBQThCLEVBQW5ELEVBQXVEO0FBQ3JELFFBQU1DLEdBQUcsR0FBRyx1QkFBWjtBQUNBQSxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxxQkFBTyxLQUFQLENBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsb0JBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsNEJBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVFDLGlCQUFRQyxJQUFSLEVBQVIsRUFMcUQsQ0FNckQ7O0FBQ0FILEVBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLFNBQVIsRUFBbUIsd0JBQW5CLEVBUHFELENBU3JEOztBQUNBRCxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUUcsc0JBQVIsRUFWcUQsQ0FZckQ7O0FBQ0EsTUFBSVAsT0FBTyxDQUFDQyxHQUFSLENBQVlPLFFBQVosS0FBeUIsWUFBN0IsRUFBMkM7QUFDekNMLElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxpQkFBUUksTUFBUixDQUFlQyxjQUFLQyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsaUJBQXhCLENBQWYsQ0FBUixFQUR5QyxDQUd6QztBQUNBOztBQUNBVCxJQUFBQSxHQUFHLENBQUNVLEdBQUosQ0FBUSxHQUFSLEVBQWEsVUFBVUMsR0FBVixFQUFlQyxHQUFmLEVBQW9CO0FBQy9CQSxNQUFBQSxHQUFHLENBQUNDLFFBQUosQ0FBYU4sY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLGlCQUF4QixFQUEyQyxZQUEzQyxDQUFiO0FBQ0QsS0FGRDtBQUdELEdBckJvRCxDQXVCckQ7QUFDQTs7O0FBQ0EsU0FBTyxJQUFJSyxPQUFKLENBQWFOLE9BQUQsSUFBYTtBQUM5QixVQUFNTyxNQUFNLEdBQUdmLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBV3BCLElBQVgsRUFBaUIsTUFBTTtBQUNwQ3FCLHdCQUFPQyxJQUFQLENBQWEscUJBQW9CSCxNQUFNLENBQUNJLE9BQVAsR0FBaUJ2QixJQUFLLEVBQXZEOztBQUVBLFlBQU13QixhQUFhLEdBQUdMLE1BQU0sQ0FBQ00sS0FBUCxDQUFhQyxJQUFiLENBQWtCUCxNQUFsQixDQUF0Qjs7QUFDQUEsTUFBQUEsTUFBTSxDQUFDTSxLQUFQLEdBQWUsTUFBTTtBQUNuQixlQUFPLElBQUlQLE9BQUosQ0FBYVMsWUFBRCxJQUFrQjtBQUNuQ0gsVUFBQUEsYUFBYSxDQUFDRyxZQUFELENBQWI7QUFDRCxTQUZNLENBQVA7QUFHRCxPQUpELENBSm9DLENBU3BDOzs7QUFDQSxtQ0FBaUJSLE1BQWpCO0FBQ0FQLE1BQUFBLE9BQU8sQ0FBQ08sTUFBRCxDQUFQO0FBQ0QsS0FaYyxDQUFmO0FBYUQsR0FkTSxDQUFQO0FBZUQiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcbi8vIEltcG9ydCB0aGlzIG1vZHVsZSB0byBoYW5kbGUgZXJyb3JzIHdoZW4gdXNpbmcgYXN5bmMgZnVuY3Rpb25zIGZvciBvdXIgcm91dGUgaGFuZGxlcnNcbmltcG9ydCBcImV4cHJlc3MtYXN5bmMtZXJyb3JzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcImxvZ2xldmVsXCI7XG5pbXBvcnQgbW9yZ2FuIGZyb20gXCJtb3JnYW5cIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tIFwiY29va2llLXBhcnNlclwiO1xuXG5pbXBvcnQgeyBnZXRSb3V0ZXMgfSBmcm9tIFwiLi9yb3V0ZXNcIjtcbmltcG9ydCB7IGVycm9yTWlkZGxld2FyZSwgc2V0dXBDbG9zZU9uRXhpdCB9IGZyb20gXCIuL21pZGRsZXdhcmUvZXJyb3JcIjtcblxuZG90ZW52LmNvbmZpZygpO1xuXG5mdW5jdGlvbiBzdGFydFNlcnZlcih7IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIH0gPSB7fSkge1xuICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG4gIGFwcC51c2UobW9yZ2FuKFwiZGV2XCIpKTtcbiAgYXBwLnVzZShjb3JzKCkpO1xuICBhcHAudXNlKGNvb2tpZVBhcnNlcigpKTtcbiAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gIC8vIGFsbCBBUEkgcm91dGVzIGFyZSBwcmVmaXhlZCB3aXRoIC9hcGkvdjFcbiAgYXBwLnVzZShcIi9hcGkvdjFcIiwgZ2V0Um91dGVzKCkpO1xuXG4gIC8vIEdlbmVyaWMgZXJyb3IgaGFuZGxlciBpZiBlcnJvcnMgYXJlIG1pc3NlZCBieSAnZXhwcmVzcy1hc3luYy1lcnJvcnMnIG1pZGRsZXdhcmVcbiAgYXBwLnVzZShlcnJvck1pZGRsZXdhcmUpO1xuXG4gIC8vIFdoZW4gb3VyIHByb2plY3QgaXMgcHVzaGVkIHRvIHByb2R1Y3Rpb24sIHdlIHdpbGwgc2VydmUgLy8gdGhlIHJlYWN0IGFwcCB1c2luZyBleHByZXNzLnN0YXRpYygpIG1pZGRsZXdhcmVcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xuICAgIGFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuLi9jbGllbnQvYnVpbGRcIikpKTtcblxuICAgIC8vIEFueSByZXF1ZXN0IG5vdCBjYXVnaHQgYnkgb3VyIEFQSSB3aWxsIGJlIHJvdXRlZFxuICAgIC8vIHRvIG91ciBidWlsdCByZWFjdCBhcHBcbiAgICBhcHAuZ2V0KFwiKlwiLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICAgIHJlcy5zZW5kRmlsZShwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uL2NsaWVudC9idWlsZFwiLCBcImluZGV4Lmh0bWxcIikpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gVGhpcyBibG9jayBvZiBjb2RlIGlzIG1hZGUgdG8gcmVsaWFibHkgc3RhcnQgYW5kIGNsb3NlIG91ciBleHByZXNzIGFwcFxuICAvLyBJdCBpcyB3cml0dGVuIGFzIGEgcHJvbWlzZSwgd2hpY2ggY2FuIGJlIG1vcmUgZWFzaWx5IHRlc3RlZFxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBzZXJ2ZXIgPSBhcHAubGlzdGVuKHBvcnQsICgpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKGBMaXN0ZW5pbmcgb24gcG9ydCAke3NlcnZlci5hZGRyZXNzKCkucG9ydH1gKTtcblxuICAgICAgY29uc3Qgb3JpZ2luYWxDbG9zZSA9IHNlcnZlci5jbG9zZS5iaW5kKHNlcnZlcik7XG4gICAgICBzZXJ2ZXIuY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZUNsb3NlKSA9PiB7XG4gICAgICAgICAgb3JpZ2luYWxDbG9zZShyZXNvbHZlQ2xvc2UpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICAvLyBUaGlzIGZ1bmN0aW9uIHByb3Blcmx5IGNsb3NlcyB0aGUgc2VydmVyIHdoZW4gdGhlIHByb2dyYW0gZXhpdHNcbiAgICAgIHNldHVwQ2xvc2VPbkV4aXQoc2VydmVyKTtcbiAgICAgIHJlc29sdmUoc2VydmVyKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCB7IHN0YXJ0U2VydmVyIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "start.js"
      ],
      "names": [
        "dotenv",
        "config",
        "startServer",
        "port",
        "process",
        "env",
        "PORT",
        "app",
        "use",
        "express",
        "json",
        "errorMiddleware",
        "NODE_ENV",
        "static",
        "path",
        "resolve",
        "__dirname",
        "get",
        "req",
        "res",
        "sendFile",
        "Promise",
        "server",
        "listen",
        "logger",
        "info",
        "address",
        "originalClose",
        "close",
        "bind",
        "resolveClose"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAVA;AAYAA,gBAAOC,MAAP;;AAEA,SAASC,WAAT,CAAqB;AAAEC,EAAAA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC;AAArB,IAA8B,EAAnD,EAAuD;AACrD,QAAMC,GAAG,GAAG,uBAAZ;AACAA,EAAAA,GAAG,CAACC,GAAJ,CAAQ,qBAAO,KAAP,CAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQ,4BAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQC,IAAR,EAAR,EALqD,CAMrD;;AACAH,EAAAA,GAAG,CAACC,GAAJ,CAAQ,SAAR,EAAmB,wBAAnB,EAPqD,CASrD;;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQG,sBAAR,EAVqD,CAYrD;;AACA,MAAIP,OAAO,CAACC,GAAR,CAAYO,QAAZ,KAAyB,YAA7B,EAA2C;AACzCL,IAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQI,MAAR,CAAeC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,CAAf,CAAR,EADyC,CAGzC;AACA;;AACAT,IAAAA,GAAG,CAACU,GAAJ,CAAQ,GAAR,EAAa,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC/BA,MAAAA,GAAG,CAACC,QAAJ,CAAaN,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,EAA2C,YAA3C,CAAb;AACD,KAFD;AAGD,GArBoD,CAuBrD;AACA;;;AACA,SAAO,IAAIK,OAAJ,CAAaN,OAAD,IAAa;AAC9B,UAAMO,MAAM,GAAGf,GAAG,CAACgB,MAAJ,CAAWpB,IAAX,EAAiB,MAAM;AACpCqB,wBAAOC,IAAP,CAAa,qBAAoBH,MAAM,CAACI,OAAP,GAAiBvB,IAAK,EAAvD;;AAEA,YAAMwB,aAAa,GAAGL,MAAM,CAACM,KAAP,CAAaC,IAAb,CAAkBP,MAAlB,CAAtB;;AACAA,MAAAA,MAAM,CAACM,KAAP,GAAe,MAAM;AACnB,eAAO,IAAIP,OAAJ,CAAaS,YAAD,IAAkB;AACnCH,UAAAA,aAAa,CAACG,YAAD,CAAb;AACD,SAFM,CAAP;AAGD,OAJD,CAJoC,CASpC;;;AACA,mCAAiBR,MAAjB;AACAP,MAAAA,OAAO,CAACO,MAAD,CAAP;AACD,KAZc,CAAf;AAaD,GAdM,CAAP;AAeD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
      "sourcesContent": [
        "import express from \"express\";\n// Import this module to handle errors when using async functions for our route handlers\nimport \"express-async-errors\";\nimport path from \"path\";\nimport cors from \"cors\";\nimport logger from \"loglevel\";\nimport morgan from \"morgan\";\nimport dotenv from \"dotenv\";\nimport cookieParser from \"cookie-parser\";\n\nimport { getRoutes } from \"./routes\";\nimport { errorMiddleware, setupCloseOnExit } from \"./middleware/error\";\n\ndotenv.config();\n\nfunction startServer({ port = process.env.PORT } = {}) {\n  const app = express();\n  app.use(morgan(\"dev\"));\n  app.use(cors());\n  app.use(cookieParser());\n  app.use(express.json());\n  // all API routes are prefixed with /api/v1\n  app.use(\"/api/v1\", getRoutes());\n\n  // Generic error handler if errors are missed by 'express-async-errors' middleware\n  app.use(errorMiddleware);\n\n  // When our project is pushed to production, we will serve // the react app using express.static() middleware\n  if (process.env.NODE_ENV === \"production\") {\n    app.use(express.static(path.resolve(__dirname, \"../client/build\")));\n\n    // Any request not caught by our API will be routed\n    // to our built react app\n    app.get(\"*\", function (req, res) {\n      res.sendFile(path.resolve(__dirname, \"../client/build\", \"index.html\"));\n    });\n  }\n\n  // This block of code is made to reliably start and close our express app\n  // It is written as a promise, which can be more easily tested\n  return new Promise((resolve) => {\n    const server = app.listen(port, () => {\n      logger.info(`Listening on port ${server.address().port}`);\n\n      const originalClose = server.close.bind(server);\n      server.close = () => {\n        return new Promise((resolveClose) => {\n          originalClose(resolveClose);\n        });\n      };\n      // This function properly closes the server when the program exits\n      setupCloseOnExit(server);\n      resolve(server);\n    });\n  });\n}\n\nexport { startServer };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRoutes = getRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _auth = require(\"./auth\");\n\nvar _user = require(\"./user\");\n\nvar _video = require(\"./video\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getRoutes() {\n  // All routes in our Node API are placed on this router\n  const router = _express.default.Router(); // router.use() prefixes our route (i.e. /api/v1/auth)\n\n\n  router.use(\"/auth\", (0, _auth.getAuthRoutes)());\n  router.use(\"/users\", (0, _user.getUserRoutes)());\n  router.use(\"/videos\", (0, _video.getVideoRoutes)());\n  return router;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImdldFJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJ1c2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUVBLFNBQVNBLFNBQVQsR0FBcUI7QUFDbkI7QUFDQSxRQUFNQyxNQUFNLEdBQUdDLGlCQUFRQyxNQUFSLEVBQWYsQ0FGbUIsQ0FJbkI7OztBQUNBRixFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxPQUFYLEVBQW9CLDBCQUFwQjtBQUNBSCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxRQUFYLEVBQXFCLDBCQUFyQjtBQUNBSCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxTQUFYLEVBQXNCLDRCQUF0QjtBQUVBLFNBQU9ILE1BQVA7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9KYXZhU2NyaXB0L3lvdVR1YmUvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcblxuaW1wb3J0IHsgZ2V0QXV0aFJvdXRlcyB9IGZyb20gXCIuL2F1dGhcIjtcbmltcG9ydCB7IGdldFVzZXJSb3V0ZXMgfSBmcm9tIFwiLi91c2VyXCI7XG5pbXBvcnQgeyBnZXRWaWRlb1JvdXRlcyB9IGZyb20gXCIuL3ZpZGVvXCI7XG5cbmZ1bmN0aW9uIGdldFJvdXRlcygpIHtcbiAgLy8gQWxsIHJvdXRlcyBpbiBvdXIgTm9kZSBBUEkgYXJlIHBsYWNlZCBvbiB0aGlzIHJvdXRlclxuICBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gIC8vIHJvdXRlci51c2UoKSBwcmVmaXhlcyBvdXIgcm91dGUgKGkuZS4gL2FwaS92MS9hdXRoKVxuICByb3V0ZXIudXNlKFwiL2F1dGhcIiwgZ2V0QXV0aFJvdXRlcygpKTtcbiAgcm91dGVyLnVzZShcIi91c2Vyc1wiLCBnZXRVc2VyUm91dGVzKCkpO1xuICByb3V0ZXIudXNlKFwiL3ZpZGVvc1wiLCBnZXRWaWRlb1JvdXRlcygpKTtcblxuICByZXR1cm4gcm91dGVyO1xufVxuXG5leHBvcnQgeyBnZXRSb3V0ZXMgfTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "getRoutes",
        "router",
        "express",
        "Router",
        "use"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;;;AAEA,SAASA,SAAT,GAAqB;AACnB;AACA,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf,CAFmB,CAInB;;;AACAF,EAAAA,MAAM,CAACG,GAAP,CAAW,OAAX,EAAoB,0BAApB;AACAH,EAAAA,MAAM,CAACG,GAAP,CAAW,QAAX,EAAqB,0BAArB;AACAH,EAAAA,MAAM,CAACG,GAAP,CAAW,SAAX,EAAsB,4BAAtB;AAEA,SAAOH,MAAP;AACD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\n\nimport { getAuthRoutes } from \"./auth\";\nimport { getUserRoutes } from \"./user\";\nimport { getVideoRoutes } from \"./video\";\n\nfunction getRoutes() {\n  // All routes in our Node API are placed on this router\n  const router = express.Router();\n\n  // router.use() prefixes our route (i.e. /api/v1/auth)\n  router.use(\"/auth\", getAuthRoutes());\n  router.use(\"/users\", getUserRoutes());\n  router.use(\"/videos\", getVideoRoutes());\n\n  return router;\n}\n\nexport { getRoutes };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAuthRoutes = getAuthRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// A function to get the routes.\n// All route definitions are in one place and we only need to export one thing\nfunction getAuthRoutes() {\n  const router = _express.default.Router();\n\n  return router;\n} // All controllers/utility functions here\n\n\nasync function googleLogin(req, res) {}\n\nasync function me(req, res) {}\n\nfunction signout(req, res) {}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiZ2V0QXV0aFJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnb29nbGVMb2dpbiIsInJlcSIsInJlcyIsIm1lIiwic2lnbm91dCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBQ0E7QUFDQTtBQUNBLFNBQVNBLGFBQVQsR0FBeUI7QUFDdkIsUUFBTUMsTUFBTSxHQUFHQyxpQkFBUUMsTUFBUixFQUFmOztBQUVBLFNBQU9GLE1BQVA7QUFDRCxDLENBRUQ7OztBQUNBLGVBQWVHLFdBQWYsQ0FBMkJDLEdBQTNCLEVBQWdDQyxHQUFoQyxFQUFxQyxDQUFFOztBQUV2QyxlQUFlQyxFQUFmLENBQWtCRixHQUFsQixFQUF1QkMsR0FBdkIsRUFBNEIsQ0FBRTs7QUFFOUIsU0FBU0UsT0FBVCxDQUFpQkgsR0FBakIsRUFBc0JDLEdBQXRCLEVBQTJCLENBQUUiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG4vLyBBIGZ1bmN0aW9uIHRvIGdldCB0aGUgcm91dGVzLlxuLy8gQWxsIHJvdXRlIGRlZmluaXRpb25zIGFyZSBpbiBvbmUgcGxhY2UgYW5kIHdlIG9ubHkgbmVlZCB0byBleHBvcnQgb25lIHRoaW5nXG5mdW5jdGlvbiBnZXRBdXRoUm91dGVzKCkge1xuICBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gIHJldHVybiByb3V0ZXI7XG59XG5cbi8vIEFsbCBjb250cm9sbGVycy91dGlsaXR5IGZ1bmN0aW9ucyBoZXJlXG5hc3luYyBmdW5jdGlvbiBnb29nbGVMb2dpbihyZXEsIHJlcykge31cblxuYXN5bmMgZnVuY3Rpb24gbWUocmVxLCByZXMpIHt9XG5cbmZ1bmN0aW9uIHNpZ25vdXQocmVxLCByZXMpIHt9XG5cbmV4cG9ydCB7IGdldEF1dGhSb3V0ZXMgfTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "getAuthRoutes",
        "router",
        "express",
        "Router",
        "googleLogin",
        "req",
        "res",
        "me",
        "signout"
      ],
      "mappings": ";;;;;;;AAAA;;;;AACA;AACA;AACA,SAASA,aAAT,GAAyB;AACvB,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEA,SAAOF,MAAP;AACD,C,CAED;;;AACA,eAAeG,WAAf,CAA2BC,GAA3B,EAAgCC,GAAhC,EAAqC,CAAE;;AAEvC,eAAeC,EAAf,CAAkBF,GAAlB,EAAuBC,GAAvB,EAA4B,CAAE;;AAE9B,SAASE,OAAT,CAAiBH,GAAjB,EAAsBC,GAAtB,EAA2B,CAAE",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\n// A function to get the routes.\n// All route definitions are in one place and we only need to export one thing\nfunction getAuthRoutes() {\n  const router = express.Router();\n\n  return router;\n}\n\n// All controllers/utility functions here\nasync function googleLogin(req, res) {}\n\nasync function me(req, res) {}\n\nfunction signout(req, res) {}\n\nexport { getAuthRoutes };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUserRoutes = getUserRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getUserRoutes() {\n  const router = _express.default.Router();\n\n  return router;\n}\n\nasync function getLikedVideos(req, res, next) {}\n\nasync function getHistory(req, res, next) {}\n\nasync function toggleSubscribe(req, res, next) {}\n\nasync function getFeed(req, res) {}\n\nasync function searchUser(req, res, next) {}\n\nasync function getRecommendedChannels(req, res) {}\n\nasync function getProfile(req, res, next) {}\n\nasync function editUser(req, res) {}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiZ2V0VXNlclJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXRMaWtlZFZpZGVvcyIsInJlcSIsInJlcyIsIm5leHQiLCJnZXRIaXN0b3J5IiwidG9nZ2xlU3Vic2NyaWJlIiwiZ2V0RmVlZCIsInNlYXJjaFVzZXIiLCJnZXRSZWNvbW1lbmRlZENoYW5uZWxzIiwiZ2V0UHJvZmlsZSIsImVkaXRVc2VyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxTQUFTQSxhQUFULEdBQXlCO0FBQ3ZCLFFBQU1DLE1BQU0sR0FBR0MsaUJBQVFDLE1BQVIsRUFBZjs7QUFFQSxTQUFPRixNQUFQO0FBQ0Q7O0FBRUQsZUFBZUcsY0FBZixDQUE4QkMsR0FBOUIsRUFBbUNDLEdBQW5DLEVBQXdDQyxJQUF4QyxFQUE4QyxDQUFFOztBQUVoRCxlQUFlQyxVQUFmLENBQTBCSCxHQUExQixFQUErQkMsR0FBL0IsRUFBb0NDLElBQXBDLEVBQTBDLENBQUU7O0FBRTVDLGVBQWVFLGVBQWYsQ0FBK0JKLEdBQS9CLEVBQW9DQyxHQUFwQyxFQUF5Q0MsSUFBekMsRUFBK0MsQ0FBRTs7QUFFakQsZUFBZUcsT0FBZixDQUF1QkwsR0FBdkIsRUFBNEJDLEdBQTVCLEVBQWlDLENBQUU7O0FBRW5DLGVBQWVLLFVBQWYsQ0FBMEJOLEdBQTFCLEVBQStCQyxHQUEvQixFQUFvQ0MsSUFBcEMsRUFBMEMsQ0FBRTs7QUFFNUMsZUFBZUssc0JBQWYsQ0FBc0NQLEdBQXRDLEVBQTJDQyxHQUEzQyxFQUFnRCxDQUFFOztBQUVsRCxlQUFlTyxVQUFmLENBQTBCUixHQUExQixFQUErQkMsR0FBL0IsRUFBb0NDLElBQXBDLEVBQTBDLENBQUU7O0FBRTVDLGVBQWVPLFFBQWYsQ0FBd0JULEdBQXhCLEVBQTZCQyxHQUE3QixFQUFrQyxDQUFFIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tZXJvai9EZXNrdG9wL0phdmFTY3JpcHQveW91VHViZS9zZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuXG5mdW5jdGlvbiBnZXRVc2VyUm91dGVzKCkge1xuICBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gIHJldHVybiByb3V0ZXI7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldExpa2VkVmlkZW9zKHJlcSwgcmVzLCBuZXh0KSB7fVxuXG5hc3luYyBmdW5jdGlvbiBnZXRIaXN0b3J5KHJlcSwgcmVzLCBuZXh0KSB7fVxuXG5hc3luYyBmdW5jdGlvbiB0b2dnbGVTdWJzY3JpYmUocmVxLCByZXMsIG5leHQpIHt9XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEZlZWQocmVxLCByZXMpIHt9XG5cbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaFVzZXIocmVxLCByZXMsIG5leHQpIHt9XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFJlY29tbWVuZGVkQ2hhbm5lbHMocmVxLCByZXMpIHt9XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFByb2ZpbGUocmVxLCByZXMsIG5leHQpIHt9XG5cbmFzeW5jIGZ1bmN0aW9uIGVkaXRVc2VyKHJlcSwgcmVzKSB7fVxuXG5leHBvcnQgeyBnZXRVc2VyUm91dGVzIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "getUserRoutes",
        "router",
        "express",
        "Router",
        "getLikedVideos",
        "req",
        "res",
        "next",
        "getHistory",
        "toggleSubscribe",
        "getFeed",
        "searchUser",
        "getRecommendedChannels",
        "getProfile",
        "editUser"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEA,SAASA,aAAT,GAAyB;AACvB,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEA,SAAOF,MAAP;AACD;;AAED,eAAeG,cAAf,CAA8BC,GAA9B,EAAmCC,GAAnC,EAAwCC,IAAxC,EAA8C,CAAE;;AAEhD,eAAeC,UAAf,CAA0BH,GAA1B,EAA+BC,GAA/B,EAAoCC,IAApC,EAA0C,CAAE;;AAE5C,eAAeE,eAAf,CAA+BJ,GAA/B,EAAoCC,GAApC,EAAyCC,IAAzC,EAA+C,CAAE;;AAEjD,eAAeG,OAAf,CAAuBL,GAAvB,EAA4BC,GAA5B,EAAiC,CAAE;;AAEnC,eAAeK,UAAf,CAA0BN,GAA1B,EAA+BC,GAA/B,EAAoCC,IAApC,EAA0C,CAAE;;AAE5C,eAAeK,sBAAf,CAAsCP,GAAtC,EAA2CC,GAA3C,EAAgD,CAAE;;AAElD,eAAeO,UAAf,CAA0BR,GAA1B,EAA+BC,GAA/B,EAAoCC,IAApC,EAA0C,CAAE;;AAE5C,eAAeO,QAAf,CAAwBT,GAAxB,EAA6BC,GAA7B,EAAkC,CAAE",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\n\nfunction getUserRoutes() {\n  const router = express.Router();\n\n  return router;\n}\n\nasync function getLikedVideos(req, res, next) {}\n\nasync function getHistory(req, res, next) {}\n\nasync function toggleSubscribe(req, res, next) {}\n\nasync function getFeed(req, res) {}\n\nasync function searchUser(req, res, next) {}\n\nasync function getRecommendedChannels(req, res) {}\n\nasync function getProfile(req, res, next) {}\n\nasync function editUser(req, res) {}\n\nexport { getUserRoutes };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "video.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getVideoRoutes = getVideoRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _client = require(\"@prisma/client\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst prisma = new _client.PrismaClient();\n\nfunction getVideoRoutes() {\n  const router = _express.default.Router();\n\n  router.get('/', getRecommendedVideos);\n  return router;\n}\n\nasync function getRecommendedVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  for (const video of videos) {\n    let views = await prisma.view.count({\n      where: {\n        videoId: {\n          equals: video.id\n        }\n      }\n    });\n    video.view = views;\n  }\n\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function getTrendingVideos(req, res) {}\n\nasync function searchVideos(req, res, next) {}\n\nasync function addVideo(req, res) {}\n\nasync function addComment(req, res, next) {}\n\nasync function deleteComment(req, res) {}\n\nasync function addVideoView(req, res, next) {}\n\nasync function likeVideo(req, res, next) {}\n\nasync function dislikeVideo(req, res, next) {}\n\nasync function getVideo(req, res, next) {}\n\nasync function deleteVideo(req, res) {}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvLmpzIl0sIm5hbWVzIjpbInByaXNtYSIsIlByaXNtYUNsaWVudCIsImdldFZpZGVvUm91dGVzIiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImdldFJlY29tbWVuZGVkVmlkZW9zIiwicmVxIiwicmVzIiwidmlkZW9zIiwidmlkZW8iLCJmaW5kTWFueSIsImluY2x1ZGUiLCJ1c2VyIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsImxlbmd0aCIsInN0YXR1cyIsImpzb24iLCJ2aWV3cyIsInZpZXciLCJjb3VudCIsIndoZXJlIiwidmlkZW9JZCIsImVxdWFscyIsImlkIiwiZ2V0VHJlbmRpbmdWaWRlb3MiLCJzZWFyY2hWaWRlb3MiLCJuZXh0IiwiYWRkVmlkZW8iLCJhZGRDb21tZW50IiwiZGVsZXRlQ29tbWVudCIsImFkZFZpZGVvVmlldyIsImxpa2VWaWRlbyIsImRpc2xpa2VWaWRlbyIsImdldFZpZGVvIiwiZGVsZXRlVmlkZW8iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxJQUFJQyxvQkFBSixFQUFmOztBQUVBLFNBQVNDLGNBQVQsR0FBMEI7QUFDeEIsUUFBTUMsTUFBTSxHQUFHQyxpQkFBUUMsTUFBUixFQUFmOztBQUVBRixFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxHQUFYLEVBQWdCQyxvQkFBaEI7QUFFQSxTQUFPSixNQUFQO0FBQ0Q7O0FBRUQsZUFBZUksb0JBQWYsQ0FBb0NDLEdBQXBDLEVBQXlDQyxHQUF6QyxFQUE4QztBQUM1QyxNQUFJQyxNQUFNLEdBQUcsTUFBTVYsTUFBTSxDQUFDVyxLQUFQLENBQWFDLFFBQWIsQ0FBc0I7QUFDdkNDLElBQUFBLE9BQU8sRUFBRTtBQUNQQyxNQUFBQSxJQUFJLEVBQUU7QUFEQyxLQUQ4QjtBQUl2Q0MsSUFBQUEsT0FBTyxFQUFFO0FBQ1BDLE1BQUFBLFNBQVMsRUFBRTtBQURKO0FBSjhCLEdBQXRCLENBQW5COztBQVNBLE1BQUksQ0FBQ04sTUFBTSxDQUFDTyxNQUFaLEVBQW9CO0FBQ2xCLFdBQU9SLEdBQUcsQ0FBQ1MsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVULE1BQUFBO0FBQUYsS0FBckIsQ0FBUDtBQUVEOztBQUVELE9BQUssTUFBTUMsS0FBWCxJQUFvQkQsTUFBcEIsRUFBNEI7QUFDMUIsUUFBSVUsS0FBSyxHQUFHLE1BQU1wQixNQUFNLENBQUNxQixJQUFQLENBQVlDLEtBQVosQ0FBa0I7QUFDbENDLE1BQUFBLEtBQUssRUFBRTtBQUNMQyxRQUFBQSxPQUFPLEVBQUU7QUFDUEMsVUFBQUEsTUFBTSxFQUFFZCxLQUFLLENBQUNlO0FBRFA7QUFESjtBQUQyQixLQUFsQixDQUFsQjtBQU9BZixJQUFBQSxLQUFLLENBQUNVLElBQU4sR0FBYUQsS0FBYjtBQUNEOztBQUVEWCxFQUFBQSxHQUFHLENBQUNTLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUFFVCxJQUFBQTtBQUFGLEdBQXJCO0FBRUQ7O0FBRUQsZUFBZWlCLGlCQUFmLENBQWlDbkIsR0FBakMsRUFBc0NDLEdBQXRDLEVBQTJDLENBQUc7O0FBRTlDLGVBQWVtQixZQUFmLENBQTRCcEIsR0FBNUIsRUFBaUNDLEdBQWpDLEVBQXNDb0IsSUFBdEMsRUFBNEMsQ0FBRzs7QUFFL0MsZUFBZUMsUUFBZixDQUF3QnRCLEdBQXhCLEVBQTZCQyxHQUE3QixFQUFrQyxDQUFHOztBQUVyQyxlQUFlc0IsVUFBZixDQUEwQnZCLEdBQTFCLEVBQStCQyxHQUEvQixFQUFvQ29CLElBQXBDLEVBQTBDLENBQUc7O0FBRTdDLGVBQWVHLGFBQWYsQ0FBNkJ4QixHQUE3QixFQUFrQ0MsR0FBbEMsRUFBdUMsQ0FBRzs7QUFFMUMsZUFBZXdCLFlBQWYsQ0FBNEJ6QixHQUE1QixFQUFpQ0MsR0FBakMsRUFBc0NvQixJQUF0QyxFQUE0QyxDQUFHOztBQUUvQyxlQUFlSyxTQUFmLENBQXlCMUIsR0FBekIsRUFBOEJDLEdBQTlCLEVBQW1Db0IsSUFBbkMsRUFBeUMsQ0FBRzs7QUFFNUMsZUFBZU0sWUFBZixDQUE0QjNCLEdBQTVCLEVBQWlDQyxHQUFqQyxFQUFzQ29CLElBQXRDLEVBQTRDLENBQUc7O0FBRS9DLGVBQWVPLFFBQWYsQ0FBd0I1QixHQUF4QixFQUE2QkMsR0FBN0IsRUFBa0NvQixJQUFsQyxFQUF3QyxDQUFHOztBQUUzQyxlQUFlUSxXQUFmLENBQTJCN0IsR0FBM0IsRUFBZ0NDLEdBQWhDLEVBQXFDLENBQUciLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIlxuXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KClcblxuZnVuY3Rpb24gZ2V0VmlkZW9Sb3V0ZXMoKSB7XG4gIGNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbiAgcm91dGVyLmdldCgnLycsIGdldFJlY29tbWVuZGVkVmlkZW9zKVxuXG4gIHJldHVybiByb3V0ZXI7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFJlY29tbWVuZGVkVmlkZW9zKHJlcSwgcmVzKSB7XG4gIGxldCB2aWRlb3MgPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZE1hbnkoe1xuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXI6IHRydWVcbiAgICB9LFxuICAgIG9yZGVyQnk6IHtcbiAgICAgIGNyZWF0ZWRBdDogXCJkZXNjXCJcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF2aWRlb3MubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdmlkZW9zIH0pXG5cbiAgfVxuXG4gIGZvciAoY29uc3QgdmlkZW8gb2YgdmlkZW9zKSB7XG4gICAgbGV0IHZpZXdzID0gYXdhaXQgcHJpc21hLnZpZXcuY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdmlkZW9JZDoge1xuICAgICAgICAgIGVxdWFsczogdmlkZW8uaWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgdmlkZW8udmlldyA9IHZpZXdzXG4gIH1cblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvcyB9KVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFRyZW5kaW5nVmlkZW9zKHJlcSwgcmVzKSB7IH1cblxuYXN5bmMgZnVuY3Rpb24gc2VhcmNoVmlkZW9zKHJlcSwgcmVzLCBuZXh0KSB7IH1cblxuYXN5bmMgZnVuY3Rpb24gYWRkVmlkZW8ocmVxLCByZXMpIHsgfVxuXG5hc3luYyBmdW5jdGlvbiBhZGRDb21tZW50KHJlcSwgcmVzLCBuZXh0KSB7IH1cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ29tbWVudChyZXEsIHJlcykgeyB9XG5cbmFzeW5jIGZ1bmN0aW9uIGFkZFZpZGVvVmlldyhyZXEsIHJlcywgbmV4dCkgeyB9XG5cbmFzeW5jIGZ1bmN0aW9uIGxpa2VWaWRlbyhyZXEsIHJlcywgbmV4dCkgeyB9XG5cbmFzeW5jIGZ1bmN0aW9uIGRpc2xpa2VWaWRlbyhyZXEsIHJlcywgbmV4dCkgeyB9XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFZpZGVvKHJlcSwgcmVzLCBuZXh0KSB7IH1cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlVmlkZW8ocmVxLCByZXMpIHsgfVxuXG5leHBvcnQgeyBnZXRWaWRlb1JvdXRlcyB9O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "video.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getVideoRoutes",
        "router",
        "express",
        "Router",
        "get",
        "getRecommendedVideos",
        "req",
        "res",
        "videos",
        "video",
        "findMany",
        "include",
        "user",
        "orderBy",
        "createdAt",
        "length",
        "status",
        "json",
        "views",
        "view",
        "count",
        "where",
        "videoId",
        "equals",
        "id",
        "getTrendingVideos",
        "searchVideos",
        "next",
        "addVideo",
        "addComment",
        "deleteComment",
        "addVideoView",
        "likeVideo",
        "dislikeVideo",
        "getVideo",
        "deleteVideo"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,oBAAJ,EAAf;;AAEA,SAASC,cAAT,GAA0B;AACxB,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEAF,EAAAA,MAAM,CAACG,GAAP,CAAW,GAAX,EAAgBC,oBAAhB;AAEA,SAAOJ,MAAP;AACD;;AAED,eAAeI,oBAAf,CAAoCC,GAApC,EAAyCC,GAAzC,EAA8C;AAC5C,MAAIC,MAAM,GAAG,MAAMV,MAAM,CAACW,KAAP,CAAaC,QAAb,CAAsB;AACvCC,IAAAA,OAAO,EAAE;AACPC,MAAAA,IAAI,EAAE;AADC,KAD8B;AAIvCC,IAAAA,OAAO,EAAE;AACPC,MAAAA,SAAS,EAAE;AADJ;AAJ8B,GAAtB,CAAnB;;AASA,MAAI,CAACN,MAAM,CAACO,MAAZ,EAAoB;AAClB,WAAOR,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAET,MAAAA;AAAF,KAArB,CAAP;AAED;;AAED,OAAK,MAAMC,KAAX,IAAoBD,MAApB,EAA4B;AAC1B,QAAIU,KAAK,GAAG,MAAMpB,MAAM,CAACqB,IAAP,CAAYC,KAAZ,CAAkB;AAClCC,MAAAA,KAAK,EAAE;AACLC,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAEd,KAAK,CAACe;AADP;AADJ;AAD2B,KAAlB,CAAlB;AAOAf,IAAAA,KAAK,CAACU,IAAN,GAAaD,KAAb;AACD;;AAEDX,EAAAA,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAET,IAAAA;AAAF,GAArB;AAED;;AAED,eAAeiB,iBAAf,CAAiCnB,GAAjC,EAAsCC,GAAtC,EAA2C,CAAG;;AAE9C,eAAemB,YAAf,CAA4BpB,GAA5B,EAAiCC,GAAjC,EAAsCoB,IAAtC,EAA4C,CAAG;;AAE/C,eAAeC,QAAf,CAAwBtB,GAAxB,EAA6BC,GAA7B,EAAkC,CAAG;;AAErC,eAAesB,UAAf,CAA0BvB,GAA1B,EAA+BC,GAA/B,EAAoCoB,IAApC,EAA0C,CAAG;;AAE7C,eAAeG,aAAf,CAA6BxB,GAA7B,EAAkCC,GAAlC,EAAuC,CAAG;;AAE1C,eAAewB,YAAf,CAA4BzB,GAA5B,EAAiCC,GAAjC,EAAsCoB,IAAtC,EAA4C,CAAG;;AAE/C,eAAeK,SAAf,CAAyB1B,GAAzB,EAA8BC,GAA9B,EAAmCoB,IAAnC,EAAyC,CAAG;;AAE5C,eAAeM,YAAf,CAA4B3B,GAA5B,EAAiCC,GAAjC,EAAsCoB,IAAtC,EAA4C,CAAG;;AAE/C,eAAeO,QAAf,CAAwB5B,GAAxB,EAA6BC,GAA7B,EAAkCoB,IAAlC,EAAwC,CAAG;;AAE3C,eAAeQ,WAAf,CAA2B7B,GAA3B,EAAgCC,GAAhC,EAAqC,CAAG",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\nimport { PrismaClient } from \"@prisma/client\"\n\nconst prisma = new PrismaClient()\n\nfunction getVideoRoutes() {\n  const router = express.Router();\n\n  router.get('/', getRecommendedVideos)\n\n  return router;\n}\n\nasync function getRecommendedVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n\n  for (const video of videos) {\n    let views = await prisma.view.count({\n      where: {\n        videoId: {\n          equals: video.id\n        }\n      }\n    })\n    video.view = views\n  }\n\n  res.status(200).json({ videos })\n\n}\n\nasync function getTrendingVideos(req, res) { }\n\nasync function searchVideos(req, res, next) { }\n\nasync function addVideo(req, res) { }\n\nasync function addComment(req, res, next) { }\n\nasync function deleteComment(req, res) { }\n\nasync function addVideoView(req, res, next) { }\n\nasync function likeVideo(req, res, next) { }\n\nasync function dislikeVideo(req, res, next) { }\n\nasync function getVideo(req, res, next) { }\n\nasync function deleteVideo(req, res) { }\n\nexport { getVideoRoutes };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632889337089
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
        "sourceFileName": "error.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.errorMiddleware = errorMiddleware;\nexports.setupCloseOnExit = setupCloseOnExit;\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Middleware that will help us catch generic express-related errors\nfunction errorMiddleware(error, req, res, next) {\n  if (res.headersSent) {\n    next(error);\n  } else {\n    _loglevel.default.error(error);\n\n    res.status(error.statusCode || 500);\n    res.json({\n      message: error.message,\n      ...(process.env.NODE_ENV === \"production\" ? null : {\n        stack: error.stack\n      })\n    });\n  }\n} // This closes the server in the event of an error so\n// that our requests do not hang\n\n\nfunction setupCloseOnExit(server) {\n  async function exitHandler(options = {}) {\n    await server.close().then(() => {\n      _loglevel.default.info(\"Server successfully closed\");\n    }).catch(error => {\n      _loglevel.default.warn(\"Something went wrong closing the server\", error.stack);\n    });\n    if (options.exit) process.exit();\n  } // Do something when app is closing\n\n\n  process.on(\"exit\", exitHandler); // Catches ctrl+c event\n\n  process.on(\"SIGINT\", exitHandler.bind(null, {\n    exit: true\n  })); // Catches \"kill pid\" (for example: nodemon restart)\n\n  process.on(\"SIGUSR1\", exitHandler.bind(null, {\n    exit: true\n  }));\n  process.on(\"SIGUSR2\", exitHandler.bind(null, {\n    exit: true\n  })); // Catches uncaught exceptions\n\n  process.on(\"uncaughtException\", exitHandler.bind(null, {\n    exit: true\n  }));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVycm9yLmpzIl0sIm5hbWVzIjpbImVycm9yTWlkZGxld2FyZSIsImVycm9yIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlcnNTZW50IiwibG9nZ2VyIiwic3RhdHVzIiwic3RhdHVzQ29kZSIsImpzb24iLCJtZXNzYWdlIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic3RhY2siLCJzZXR1cENsb3NlT25FeGl0Iiwic2VydmVyIiwiZXhpdEhhbmRsZXIiLCJvcHRpb25zIiwiY2xvc2UiLCJ0aGVuIiwiaW5mbyIsImNhdGNoIiwid2FybiIsImV4aXQiLCJvbiIsImJpbmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7Ozs7QUFFQTtBQUNBLFNBQVNBLGVBQVQsQ0FBeUJDLEtBQXpCLEVBQWdDQyxHQUFoQyxFQUFxQ0MsR0FBckMsRUFBMENDLElBQTFDLEVBQWdEO0FBQzlDLE1BQUlELEdBQUcsQ0FBQ0UsV0FBUixFQUFxQjtBQUNuQkQsSUFBQUEsSUFBSSxDQUFDSCxLQUFELENBQUo7QUFDRCxHQUZELE1BRU87QUFDTEssc0JBQU9MLEtBQVAsQ0FBYUEsS0FBYjs7QUFDQUUsSUFBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVdOLEtBQUssQ0FBQ08sVUFBTixJQUFvQixHQUEvQjtBQUNBTCxJQUFBQSxHQUFHLENBQUNNLElBQUosQ0FBUztBQUNQQyxNQUFBQSxPQUFPLEVBQUVULEtBQUssQ0FBQ1MsT0FEUjtBQUVQLFVBQUlDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxRQUFaLEtBQXlCLFlBQXpCLEdBQ0EsSUFEQSxHQUVBO0FBQUVDLFFBQUFBLEtBQUssRUFBRWIsS0FBSyxDQUFDYTtBQUFmLE9BRko7QUFGTyxLQUFUO0FBTUQ7QUFDRixDLENBRUQ7QUFDQTs7O0FBQ0EsU0FBU0MsZ0JBQVQsQ0FBMEJDLE1BQTFCLEVBQWtDO0FBQ2hDLGlCQUFlQyxXQUFmLENBQTJCQyxPQUFPLEdBQUcsRUFBckMsRUFBeUM7QUFDdkMsVUFBTUYsTUFBTSxDQUNURyxLQURHLEdBRUhDLElBRkcsQ0FFRSxNQUFNO0FBQ1ZkLHdCQUFPZSxJQUFQLENBQVksNEJBQVo7QUFDRCxLQUpHLEVBS0hDLEtBTEcsQ0FLSXJCLEtBQUQsSUFBVztBQUNoQkssd0JBQU9pQixJQUFQLENBQVkseUNBQVosRUFBdUR0QixLQUFLLENBQUNhLEtBQTdEO0FBQ0QsS0FQRyxDQUFOO0FBUUEsUUFBSUksT0FBTyxDQUFDTSxJQUFaLEVBQWtCYixPQUFPLENBQUNhLElBQVI7QUFDbkIsR0FYK0IsQ0FZaEM7OztBQUNBYixFQUFBQSxPQUFPLENBQUNjLEVBQVIsQ0FBVyxNQUFYLEVBQW1CUixXQUFuQixFQWJnQyxDQWNoQzs7QUFDQU4sRUFBQUEsT0FBTyxDQUFDYyxFQUFSLENBQVcsUUFBWCxFQUFxQlIsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQXJCLEVBZmdDLENBZ0JoQzs7QUFDQWIsRUFBQUEsT0FBTyxDQUFDYyxFQUFSLENBQVcsU0FBWCxFQUFzQlIsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQXRCO0FBQ0FiLEVBQUFBLE9BQU8sQ0FBQ2MsRUFBUixDQUFXLFNBQVgsRUFBc0JSLFdBQVcsQ0FBQ1MsSUFBWixDQUFpQixJQUFqQixFQUF1QjtBQUFFRixJQUFBQSxJQUFJLEVBQUU7QUFBUixHQUF2QixDQUF0QixFQWxCZ0MsQ0FtQmhDOztBQUNBYixFQUFBQSxPQUFPLENBQUNjLEVBQVIsQ0FBVyxtQkFBWCxFQUFnQ1IsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQWhDO0FBQ0QiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvbWlkZGxld2FyZS8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nZ2VyIGZyb20gXCJsb2dsZXZlbFwiO1xuXG4vLyBNaWRkbGV3YXJlIHRoYXQgd2lsbCBoZWxwIHVzIGNhdGNoIGdlbmVyaWMgZXhwcmVzcy1yZWxhdGVkIGVycm9yc1xuZnVuY3Rpb24gZXJyb3JNaWRkbGV3YXJlKGVycm9yLCByZXEsIHJlcywgbmV4dCkge1xuICBpZiAocmVzLmhlYWRlcnNTZW50KSB7XG4gICAgbmV4dChlcnJvcik7XG4gIH0gZWxzZSB7XG4gICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICByZXMuc3RhdHVzKGVycm9yLnN0YXR1c0NvZGUgfHwgNTAwKTtcbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgLi4uKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIlxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiB7IHN0YWNrOiBlcnJvci5zdGFjayB9KSxcbiAgICB9KTtcbiAgfVxufVxuXG4vLyBUaGlzIGNsb3NlcyB0aGUgc2VydmVyIGluIHRoZSBldmVudCBvZiBhbiBlcnJvciBzb1xuLy8gdGhhdCBvdXIgcmVxdWVzdHMgZG8gbm90IGhhbmdcbmZ1bmN0aW9uIHNldHVwQ2xvc2VPbkV4aXQoc2VydmVyKSB7XG4gIGFzeW5jIGZ1bmN0aW9uIGV4aXRIYW5kbGVyKG9wdGlvbnMgPSB7fSkge1xuICAgIGF3YWl0IHNlcnZlclxuICAgICAgLmNsb3NlKClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJTZXJ2ZXIgc3VjY2Vzc2Z1bGx5IGNsb3NlZFwiKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGxvZ2dlci53YXJuKFwiU29tZXRoaW5nIHdlbnQgd3JvbmcgY2xvc2luZyB0aGUgc2VydmVyXCIsIGVycm9yLnN0YWNrKTtcbiAgICAgIH0pO1xuICAgIGlmIChvcHRpb25zLmV4aXQpIHByb2Nlc3MuZXhpdCgpO1xuICB9XG4gIC8vIERvIHNvbWV0aGluZyB3aGVuIGFwcCBpcyBjbG9zaW5nXG4gIHByb2Nlc3Mub24oXCJleGl0XCIsIGV4aXRIYW5kbGVyKTtcbiAgLy8gQ2F0Y2hlcyBjdHJsK2MgZXZlbnRcbiAgcHJvY2Vzcy5vbihcIlNJR0lOVFwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG4gIC8vIENhdGNoZXMgXCJraWxsIHBpZFwiIChmb3IgZXhhbXBsZTogbm9kZW1vbiByZXN0YXJ0KVxuICBwcm9jZXNzLm9uKFwiU0lHVVNSMVwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG4gIHByb2Nlc3Mub24oXCJTSUdVU1IyXCIsIGV4aXRIYW5kbGVyLmJpbmQobnVsbCwgeyBleGl0OiB0cnVlIH0pKTtcbiAgLy8gQ2F0Y2hlcyB1bmNhdWdodCBleGNlcHRpb25zXG4gIHByb2Nlc3Mub24oXCJ1bmNhdWdodEV4Y2VwdGlvblwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG59XG5cbmV4cG9ydCB7IGVycm9yTWlkZGxld2FyZSwgc2V0dXBDbG9zZU9uRXhpdCB9O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "error.js"
      ],
      "names": [
        "errorMiddleware",
        "error",
        "req",
        "res",
        "next",
        "headersSent",
        "logger",
        "status",
        "statusCode",
        "json",
        "message",
        "process",
        "env",
        "NODE_ENV",
        "stack",
        "setupCloseOnExit",
        "server",
        "exitHandler",
        "options",
        "close",
        "then",
        "info",
        "catch",
        "warn",
        "exit",
        "on",
        "bind"
      ],
      "mappings": ";;;;;;;;AAAA;;;;AAEA;AACA,SAASA,eAAT,CAAyBC,KAAzB,EAAgCC,GAAhC,EAAqCC,GAArC,EAA0CC,IAA1C,EAAgD;AAC9C,MAAID,GAAG,CAACE,WAAR,EAAqB;AACnBD,IAAAA,IAAI,CAACH,KAAD,CAAJ;AACD,GAFD,MAEO;AACLK,sBAAOL,KAAP,CAAaA,KAAb;;AACAE,IAAAA,GAAG,CAACI,MAAJ,CAAWN,KAAK,CAACO,UAAN,IAAoB,GAA/B;AACAL,IAAAA,GAAG,CAACM,IAAJ,CAAS;AACPC,MAAAA,OAAO,EAAET,KAAK,CAACS,OADR;AAEP,UAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACA,IADA,GAEA;AAAEC,QAAAA,KAAK,EAAEb,KAAK,CAACa;AAAf,OAFJ;AAFO,KAAT;AAMD;AACF,C,CAED;AACA;;;AACA,SAASC,gBAAT,CAA0BC,MAA1B,EAAkC;AAChC,iBAAeC,WAAf,CAA2BC,OAAO,GAAG,EAArC,EAAyC;AACvC,UAAMF,MAAM,CACTG,KADG,GAEHC,IAFG,CAEE,MAAM;AACVd,wBAAOe,IAAP,CAAY,4BAAZ;AACD,KAJG,EAKHC,KALG,CAKIrB,KAAD,IAAW;AAChBK,wBAAOiB,IAAP,CAAY,yCAAZ,EAAuDtB,KAAK,CAACa,KAA7D;AACD,KAPG,CAAN;AAQA,QAAII,OAAO,CAACM,IAAZ,EAAkBb,OAAO,CAACa,IAAR;AACnB,GAX+B,CAYhC;;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,MAAX,EAAmBR,WAAnB,EAbgC,CAchC;;AACAN,EAAAA,OAAO,CAACc,EAAR,CAAW,QAAX,EAAqBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAArB,EAfgC,CAgBhC;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,SAAX,EAAsBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAtB;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,SAAX,EAAsBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAtB,EAlBgC,CAmBhC;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,mBAAX,EAAgCR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAhC;AACD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "sourcesContent": [
        "import logger from \"loglevel\";\n\n// Middleware that will help us catch generic express-related errors\nfunction errorMiddleware(error, req, res, next) {\n  if (res.headersSent) {\n    next(error);\n  } else {\n    logger.error(error);\n    res.status(error.statusCode || 500);\n    res.json({\n      message: error.message,\n      ...(process.env.NODE_ENV === \"production\"\n        ? null\n        : { stack: error.stack }),\n    });\n  }\n}\n\n// This closes the server in the event of an error so\n// that our requests do not hang\nfunction setupCloseOnExit(server) {\n  async function exitHandler(options = {}) {\n    await server\n      .close()\n      .then(() => {\n        logger.info(\"Server successfully closed\");\n      })\n      .catch((error) => {\n        logger.warn(\"Something went wrong closing the server\", error.stack);\n      });\n    if (options.exit) process.exit();\n  }\n  // Do something when app is closing\n  process.on(\"exit\", exitHandler);\n  // Catches ctrl+c event\n  process.on(\"SIGINT\", exitHandler.bind(null, { exit: true }));\n  // Catches \"kill pid\" (for example: nodemon restart)\n  process.on(\"SIGUSR1\", exitHandler.bind(null, { exit: true }));\n  process.on(\"SIGUSR2\", exitHandler.bind(null, { exit: true }));\n  // Catches uncaught exceptions\n  process.on(\"uncaughtException\", exitHandler.bind(null, { exit: true }));\n}\n\nexport { errorMiddleware, setupCloseOnExit };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/start.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
        "sourceFileName": "start.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.startServer = startServer;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nrequire(\"express-async-errors\");\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _cookieParser = _interopRequireDefault(require(\"cookie-parser\"));\n\nvar _routes = require(\"./routes\");\n\nvar _error = require(\"./middleware/error\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Import this module to handle errors when using async functions for our route handlers\n_dotenv.default.config();\n\nfunction startServer({\n  port = process.env.PORT\n} = {}) {\n  const app = (0, _express.default)();\n  app.use((0, _morgan.default)(\"dev\"));\n  app.use((0, _cors.default)());\n  app.use((0, _cookieParser.default)());\n  app.use(_express.default.json()); // all API routes are prefixed with /api/v1\n\n  app.use(\"/api/v1\", (0, _routes.getRoutes)()); // Generic error handler if errors are missed by 'express-async-errors' middleware\n\n  app.use(_error.errorMiddleware); // When our project is pushed to production, we will serve // the react app using express.static() middleware\n\n  if (process.env.NODE_ENV === \"production\") {\n    app.use(_express.default.static(_path.default.resolve(__dirname, \"../client/build\"))); // Any request not caught by our API will be routed\n    // to our built react app\n\n    app.get(\"*\", function (req, res) {\n      res.sendFile(_path.default.resolve(__dirname, \"../client/build\", \"index.html\"));\n    });\n  } // This block of code is made to reliably start and close our express app\n  // It is written as a promise, which can be more easily tested\n\n\n  return new Promise(resolve => {\n    const server = app.listen(port, () => {\n      _loglevel.default.info(`Listening on port ${server.address().port}`);\n\n      const originalClose = server.close.bind(server);\n\n      server.close = () => {\n        return new Promise(resolveClose => {\n          originalClose(resolveClose);\n        });\n      }; // This function properly closes the server when the program exits\n\n\n      (0, _error.setupCloseOnExit)(server);\n      resolve(server);\n    });\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXJ0LmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsInN0YXJ0U2VydmVyIiwicG9ydCIsInByb2Nlc3MiLCJlbnYiLCJQT1JUIiwiYXBwIiwidXNlIiwiZXhwcmVzcyIsImpzb24iLCJlcnJvck1pZGRsZXdhcmUiLCJOT0RFX0VOViIsInN0YXRpYyIsInBhdGgiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiZ2V0IiwicmVxIiwicmVzIiwic2VuZEZpbGUiLCJQcm9taXNlIiwic2VydmVyIiwibGlzdGVuIiwibG9nZ2VyIiwiaW5mbyIsImFkZHJlc3MiLCJvcmlnaW5hbENsb3NlIiwiY2xvc2UiLCJiaW5kIiwicmVzb2x2ZUNsb3NlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFWQTtBQVlBQSxnQkFBT0MsTUFBUDs7QUFFQSxTQUFTQyxXQUFULENBQXFCO0FBQUVDLEVBQUFBLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDO0FBQXJCLElBQThCLEVBQW5ELEVBQXVEO0FBQ3JELFFBQU1DLEdBQUcsR0FBRyx1QkFBWjtBQUNBQSxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUSxxQkFBTyxLQUFQLENBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsb0JBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsNEJBQVI7QUFDQUQsRUFBQUEsR0FBRyxDQUFDQyxHQUFKLENBQVFDLGlCQUFRQyxJQUFSLEVBQVIsRUFMcUQsQ0FNckQ7O0FBQ0FILEVBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLFNBQVIsRUFBbUIsd0JBQW5CLEVBUHFELENBU3JEOztBQUNBRCxFQUFBQSxHQUFHLENBQUNDLEdBQUosQ0FBUUcsc0JBQVIsRUFWcUQsQ0FZckQ7O0FBQ0EsTUFBSVAsT0FBTyxDQUFDQyxHQUFSLENBQVlPLFFBQVosS0FBeUIsWUFBN0IsRUFBMkM7QUFDekNMLElBQUFBLEdBQUcsQ0FBQ0MsR0FBSixDQUFRQyxpQkFBUUksTUFBUixDQUFlQyxjQUFLQyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsaUJBQXhCLENBQWYsQ0FBUixFQUR5QyxDQUd6QztBQUNBOztBQUNBVCxJQUFBQSxHQUFHLENBQUNVLEdBQUosQ0FBUSxHQUFSLEVBQWEsVUFBVUMsR0FBVixFQUFlQyxHQUFmLEVBQW9CO0FBQy9CQSxNQUFBQSxHQUFHLENBQUNDLFFBQUosQ0FBYU4sY0FBS0MsT0FBTCxDQUFhQyxTQUFiLEVBQXdCLGlCQUF4QixFQUEyQyxZQUEzQyxDQUFiO0FBQ0QsS0FGRDtBQUdELEdBckJvRCxDQXVCckQ7QUFDQTs7O0FBQ0EsU0FBTyxJQUFJSyxPQUFKLENBQWFOLE9BQUQsSUFBYTtBQUM5QixVQUFNTyxNQUFNLEdBQUdmLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBV3BCLElBQVgsRUFBaUIsTUFBTTtBQUNwQ3FCLHdCQUFPQyxJQUFQLENBQWEscUJBQW9CSCxNQUFNLENBQUNJLE9BQVAsR0FBaUJ2QixJQUFLLEVBQXZEOztBQUVBLFlBQU13QixhQUFhLEdBQUdMLE1BQU0sQ0FBQ00sS0FBUCxDQUFhQyxJQUFiLENBQWtCUCxNQUFsQixDQUF0Qjs7QUFDQUEsTUFBQUEsTUFBTSxDQUFDTSxLQUFQLEdBQWUsTUFBTTtBQUNuQixlQUFPLElBQUlQLE9BQUosQ0FBYVMsWUFBRCxJQUFrQjtBQUNuQ0gsVUFBQUEsYUFBYSxDQUFDRyxZQUFELENBQWI7QUFDRCxTQUZNLENBQVA7QUFHRCxPQUpELENBSm9DLENBU3BDOzs7QUFDQSxtQ0FBaUJSLE1BQWpCO0FBQ0FQLE1BQUFBLE9BQU8sQ0FBQ08sTUFBRCxDQUFQO0FBQ0QsS0FaYyxDQUFmO0FBYUQsR0FkTSxDQUFQO0FBZUQiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcbi8vIEltcG9ydCB0aGlzIG1vZHVsZSB0byBoYW5kbGUgZXJyb3JzIHdoZW4gdXNpbmcgYXN5bmMgZnVuY3Rpb25zIGZvciBvdXIgcm91dGUgaGFuZGxlcnNcbmltcG9ydCBcImV4cHJlc3MtYXN5bmMtZXJyb3JzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcImxvZ2xldmVsXCI7XG5pbXBvcnQgbW9yZ2FuIGZyb20gXCJtb3JnYW5cIjtcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tIFwiY29va2llLXBhcnNlclwiO1xuXG5pbXBvcnQgeyBnZXRSb3V0ZXMgfSBmcm9tIFwiLi9yb3V0ZXNcIjtcbmltcG9ydCB7IGVycm9yTWlkZGxld2FyZSwgc2V0dXBDbG9zZU9uRXhpdCB9IGZyb20gXCIuL21pZGRsZXdhcmUvZXJyb3JcIjtcblxuZG90ZW52LmNvbmZpZygpO1xuXG5mdW5jdGlvbiBzdGFydFNlcnZlcih7IHBvcnQgPSBwcm9jZXNzLmVudi5QT1JUIH0gPSB7fSkge1xuICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG4gIGFwcC51c2UobW9yZ2FuKFwiZGV2XCIpKTtcbiAgYXBwLnVzZShjb3JzKCkpO1xuICBhcHAudXNlKGNvb2tpZVBhcnNlcigpKTtcbiAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gIC8vIGFsbCBBUEkgcm91dGVzIGFyZSBwcmVmaXhlZCB3aXRoIC9hcGkvdjFcbiAgYXBwLnVzZShcIi9hcGkvdjFcIiwgZ2V0Um91dGVzKCkpO1xuXG4gIC8vIEdlbmVyaWMgZXJyb3IgaGFuZGxlciBpZiBlcnJvcnMgYXJlIG1pc3NlZCBieSAnZXhwcmVzcy1hc3luYy1lcnJvcnMnIG1pZGRsZXdhcmVcbiAgYXBwLnVzZShlcnJvck1pZGRsZXdhcmUpO1xuXG4gIC8vIFdoZW4gb3VyIHByb2plY3QgaXMgcHVzaGVkIHRvIHByb2R1Y3Rpb24sIHdlIHdpbGwgc2VydmUgLy8gdGhlIHJlYWN0IGFwcCB1c2luZyBleHByZXNzLnN0YXRpYygpIG1pZGRsZXdhcmVcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xuICAgIGFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuLi9jbGllbnQvYnVpbGRcIikpKTtcblxuICAgIC8vIEFueSByZXF1ZXN0IG5vdCBjYXVnaHQgYnkgb3VyIEFQSSB3aWxsIGJlIHJvdXRlZFxuICAgIC8vIHRvIG91ciBidWlsdCByZWFjdCBhcHBcbiAgICBhcHAuZ2V0KFwiKlwiLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgICAgIHJlcy5zZW5kRmlsZShwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uL2NsaWVudC9idWlsZFwiLCBcImluZGV4Lmh0bWxcIikpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gVGhpcyBibG9jayBvZiBjb2RlIGlzIG1hZGUgdG8gcmVsaWFibHkgc3RhcnQgYW5kIGNsb3NlIG91ciBleHByZXNzIGFwcFxuICAvLyBJdCBpcyB3cml0dGVuIGFzIGEgcHJvbWlzZSwgd2hpY2ggY2FuIGJlIG1vcmUgZWFzaWx5IHRlc3RlZFxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBzZXJ2ZXIgPSBhcHAubGlzdGVuKHBvcnQsICgpID0+IHtcbiAgICAgIGxvZ2dlci5pbmZvKGBMaXN0ZW5pbmcgb24gcG9ydCAke3NlcnZlci5hZGRyZXNzKCkucG9ydH1gKTtcblxuICAgICAgY29uc3Qgb3JpZ2luYWxDbG9zZSA9IHNlcnZlci5jbG9zZS5iaW5kKHNlcnZlcik7XG4gICAgICBzZXJ2ZXIuY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZUNsb3NlKSA9PiB7XG4gICAgICAgICAgb3JpZ2luYWxDbG9zZShyZXNvbHZlQ2xvc2UpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICAvLyBUaGlzIGZ1bmN0aW9uIHByb3Blcmx5IGNsb3NlcyB0aGUgc2VydmVyIHdoZW4gdGhlIHByb2dyYW0gZXhpdHNcbiAgICAgIHNldHVwQ2xvc2VPbkV4aXQoc2VydmVyKTtcbiAgICAgIHJlc29sdmUoc2VydmVyKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCB7IHN0YXJ0U2VydmVyIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "start.js"
      ],
      "names": [
        "dotenv",
        "config",
        "startServer",
        "port",
        "process",
        "env",
        "PORT",
        "app",
        "use",
        "express",
        "json",
        "errorMiddleware",
        "NODE_ENV",
        "static",
        "path",
        "resolve",
        "__dirname",
        "get",
        "req",
        "res",
        "sendFile",
        "Promise",
        "server",
        "listen",
        "logger",
        "info",
        "address",
        "originalClose",
        "close",
        "bind",
        "resolveClose"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAVA;AAYAA,gBAAOC,MAAP;;AAEA,SAASC,WAAT,CAAqB;AAAEC,EAAAA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC;AAArB,IAA8B,EAAnD,EAAuD;AACrD,QAAMC,GAAG,GAAG,uBAAZ;AACAA,EAAAA,GAAG,CAACC,GAAJ,CAAQ,qBAAO,KAAP,CAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQ,4BAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQC,IAAR,EAAR,EALqD,CAMrD;;AACAH,EAAAA,GAAG,CAACC,GAAJ,CAAQ,SAAR,EAAmB,wBAAnB,EAPqD,CASrD;;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQG,sBAAR,EAVqD,CAYrD;;AACA,MAAIP,OAAO,CAACC,GAAR,CAAYO,QAAZ,KAAyB,YAA7B,EAA2C;AACzCL,IAAAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQI,MAAR,CAAeC,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,CAAf,CAAR,EADyC,CAGzC;AACA;;AACAT,IAAAA,GAAG,CAACU,GAAJ,CAAQ,GAAR,EAAa,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC/BA,MAAAA,GAAG,CAACC,QAAJ,CAAaN,cAAKC,OAAL,CAAaC,SAAb,EAAwB,iBAAxB,EAA2C,YAA3C,CAAb;AACD,KAFD;AAGD,GArBoD,CAuBrD;AACA;;;AACA,SAAO,IAAIK,OAAJ,CAAaN,OAAD,IAAa;AAC9B,UAAMO,MAAM,GAAGf,GAAG,CAACgB,MAAJ,CAAWpB,IAAX,EAAiB,MAAM;AACpCqB,wBAAOC,IAAP,CAAa,qBAAoBH,MAAM,CAACI,OAAP,GAAiBvB,IAAK,EAAvD;;AAEA,YAAMwB,aAAa,GAAGL,MAAM,CAACM,KAAP,CAAaC,IAAb,CAAkBP,MAAlB,CAAtB;;AACAA,MAAAA,MAAM,CAACM,KAAP,GAAe,MAAM;AACnB,eAAO,IAAIP,OAAJ,CAAaS,YAAD,IAAkB;AACnCH,UAAAA,aAAa,CAACG,YAAD,CAAb;AACD,SAFM,CAAP;AAGD,OAJD,CAJoC,CASpC;;;AACA,mCAAiBR,MAAjB;AACAP,MAAAA,OAAO,CAACO,MAAD,CAAP;AACD,KAZc,CAAf;AAaD,GAdM,CAAP;AAeD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/",
      "sourcesContent": [
        "import express from \"express\";\n// Import this module to handle errors when using async functions for our route handlers\nimport \"express-async-errors\";\nimport path from \"path\";\nimport cors from \"cors\";\nimport logger from \"loglevel\";\nimport morgan from \"morgan\";\nimport dotenv from \"dotenv\";\nimport cookieParser from \"cookie-parser\";\n\nimport { getRoutes } from \"./routes\";\nimport { errorMiddleware, setupCloseOnExit } from \"./middleware/error\";\n\ndotenv.config();\n\nfunction startServer({ port = process.env.PORT } = {}) {\n  const app = express();\n  app.use(morgan(\"dev\"));\n  app.use(cors());\n  app.use(cookieParser());\n  app.use(express.json());\n  // all API routes are prefixed with /api/v1\n  app.use(\"/api/v1\", getRoutes());\n\n  // Generic error handler if errors are missed by 'express-async-errors' middleware\n  app.use(errorMiddleware);\n\n  // When our project is pushed to production, we will serve // the react app using express.static() middleware\n  if (process.env.NODE_ENV === \"production\") {\n    app.use(express.static(path.resolve(__dirname, \"../client/build\")));\n\n    // Any request not caught by our API will be routed\n    // to our built react app\n    app.get(\"*\", function (req, res) {\n      res.sendFile(path.resolve(__dirname, \"../client/build\", \"index.html\"));\n    });\n  }\n\n  // This block of code is made to reliably start and close our express app\n  // It is written as a promise, which can be more easily tested\n  return new Promise((resolve) => {\n    const server = app.listen(port, () => {\n      logger.info(`Listening on port ${server.address().port}`);\n\n      const originalClose = server.close.bind(server);\n      server.close = () => {\n        return new Promise((resolveClose) => {\n          originalClose(resolveClose);\n        });\n      };\n      // This function properly closes the server when the program exits\n      setupCloseOnExit(server);\n      resolve(server);\n    });\n  });\n}\n\nexport { startServer };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getRoutes = getRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _auth = require(\"./auth\");\n\nvar _user = require(\"./user\");\n\nvar _video = require(\"./video\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getRoutes() {\n  // All routes in our Node API are placed on this router\n  const router = _express.default.Router(); // router.use() prefixes our route (i.e. /api/v1/auth)\n\n\n  router.use(\"/auth\", (0, _auth.getAuthRoutes)());\n  router.use(\"/users\", (0, _user.getUserRoutes)());\n  router.use(\"/videos\", (0, _video.getVideoRoutes)());\n  return router;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImdldFJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJ1c2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUVBLFNBQVNBLFNBQVQsR0FBcUI7QUFDbkI7QUFDQSxRQUFNQyxNQUFNLEdBQUdDLGlCQUFRQyxNQUFSLEVBQWYsQ0FGbUIsQ0FJbkI7OztBQUNBRixFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxPQUFYLEVBQW9CLDBCQUFwQjtBQUNBSCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxRQUFYLEVBQXFCLDBCQUFyQjtBQUNBSCxFQUFBQSxNQUFNLENBQUNHLEdBQVAsQ0FBVyxTQUFYLEVBQXNCLDRCQUF0QjtBQUVBLFNBQU9ILE1BQVA7QUFDRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9KYXZhU2NyaXB0L3lvdVR1YmUvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcblxuaW1wb3J0IHsgZ2V0QXV0aFJvdXRlcyB9IGZyb20gXCIuL2F1dGhcIjtcbmltcG9ydCB7IGdldFVzZXJSb3V0ZXMgfSBmcm9tIFwiLi91c2VyXCI7XG5pbXBvcnQgeyBnZXRWaWRlb1JvdXRlcyB9IGZyb20gXCIuL3ZpZGVvXCI7XG5cbmZ1bmN0aW9uIGdldFJvdXRlcygpIHtcbiAgLy8gQWxsIHJvdXRlcyBpbiBvdXIgTm9kZSBBUEkgYXJlIHBsYWNlZCBvbiB0aGlzIHJvdXRlclxuICBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gIC8vIHJvdXRlci51c2UoKSBwcmVmaXhlcyBvdXIgcm91dGUgKGkuZS4gL2FwaS92MS9hdXRoKVxuICByb3V0ZXIudXNlKFwiL2F1dGhcIiwgZ2V0QXV0aFJvdXRlcygpKTtcbiAgcm91dGVyLnVzZShcIi91c2Vyc1wiLCBnZXRVc2VyUm91dGVzKCkpO1xuICByb3V0ZXIudXNlKFwiL3ZpZGVvc1wiLCBnZXRWaWRlb1JvdXRlcygpKTtcblxuICByZXR1cm4gcm91dGVyO1xufVxuXG5leHBvcnQgeyBnZXRSb3V0ZXMgfTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "getRoutes",
        "router",
        "express",
        "Router",
        "use"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA;;AACA;;AACA;;;;AAEA,SAASA,SAAT,GAAqB;AACnB;AACA,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf,CAFmB,CAInB;;;AACAF,EAAAA,MAAM,CAACG,GAAP,CAAW,OAAX,EAAoB,0BAApB;AACAH,EAAAA,MAAM,CAACG,GAAP,CAAW,QAAX,EAAqB,0BAArB;AACAH,EAAAA,MAAM,CAACG,GAAP,CAAW,SAAX,EAAsB,4BAAtB;AAEA,SAAOH,MAAP;AACD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\n\nimport { getAuthRoutes } from \"./auth\";\nimport { getUserRoutes } from \"./user\";\nimport { getVideoRoutes } from \"./video\";\n\nfunction getRoutes() {\n  // All routes in our Node API are placed on this router\n  const router = express.Router();\n\n  // router.use() prefixes our route (i.e. /api/v1/auth)\n  router.use(\"/auth\", getAuthRoutes());\n  router.use(\"/users\", getUserRoutes());\n  router.use(\"/videos\", getVideoRoutes());\n\n  return router;\n}\n\nexport { getRoutes };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/auth.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "auth.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAuthRoutes = getAuthRoutes;\n\nvar _express = _interopRequireWildcard(require(\"express\"));\n\nvar _client = require(\"@prisma/client\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _authorization = require(\"../middleware/authorization\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// A function to get the routes.\n// All route definitions are in one place and we only need to export one thing\nconst prisma = new _client.PrismaClient();\n\nfunction getAuthRoutes() {\n  const router = _express.default.Router();\n\n  router.post('/google-login', googleLogin);\n  router.get('/me', _authorization.protect, me);\n  router.get('/signout', signout);\n  return router;\n} // All controllers/utility functions here\n\n\nasync function googleLogin(req, res) {\n  const {\n    username,\n    email\n  } = req.body;\n  let user = await prisma.user.findUnique({\n    where: {\n      email: email\n    }\n  });\n\n  if (!user) {\n    user = await prisma.user.create({\n      data: {\n        username,\n        email\n      }\n    });\n  }\n\n  const tokenPlayload = {\n    id: user.id\n  };\n\n  const token = _jsonwebtoken.default.sign(tokenPlayload, process.env.JWT_SECRET, {\n    expiresIn: process.env.JWT_EXPIRE\n  });\n\n  res.cookie(\"token\", token, {\n    httpOnly: true\n  });\n  res.status(200).send(token);\n}\n\nasync function me(req, res) {\n  res.status(200).json({\n    user: req.user\n  });\n}\n\nfunction signout(req, res) {\n  res.clearCookie('token');\n  res.status(200).json({});\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsicHJpc21hIiwiUHJpc21hQ2xpZW50IiwiZ2V0QXV0aFJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJwb3N0IiwiZ29vZ2xlTG9naW4iLCJnZXQiLCJwcm90ZWN0IiwibWUiLCJzaWdub3V0IiwicmVxIiwicmVzIiwidXNlcm5hbWUiLCJlbWFpbCIsImJvZHkiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiY3JlYXRlIiwiZGF0YSIsInRva2VuUGxheWxvYWQiLCJpZCIsInRva2VuIiwiand0Iiwic2lnbiIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiZXhwaXJlc0luIiwiSldUX0VYUElSRSIsImNvb2tpZSIsImh0dHBPbmx5Iiwic3RhdHVzIiwic2VuZCIsImpzb24iLCJjbGVhckNvb2tpZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUNBO0FBQ0E7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBSUMsb0JBQUosRUFBZjs7QUFDQSxTQUFTQyxhQUFULEdBQXlCO0FBQ3ZCLFFBQU1DLE1BQU0sR0FBR0MsaUJBQVFDLE1BQVIsRUFBZjs7QUFFQUYsRUFBQUEsTUFBTSxDQUFDRyxJQUFQLENBQVksZUFBWixFQUE2QkMsV0FBN0I7QUFDQUosRUFBQUEsTUFBTSxDQUFDSyxHQUFQLENBQVcsS0FBWCxFQUFrQkMsc0JBQWxCLEVBQTJCQyxFQUEzQjtBQUNBUCxFQUFBQSxNQUFNLENBQUNLLEdBQVAsQ0FBVyxVQUFYLEVBQXVCRyxPQUF2QjtBQUdBLFNBQU9SLE1BQVA7QUFDRCxDLENBRUQ7OztBQUNBLGVBQWVJLFdBQWYsQ0FBMkJLLEdBQTNCLEVBQWdDQyxHQUFoQyxFQUFxQztBQUVuQyxRQUFNO0FBQUVDLElBQUFBLFFBQUY7QUFBWUMsSUFBQUE7QUFBWixNQUFzQkgsR0FBRyxDQUFDSSxJQUFoQztBQUVBLE1BQUlDLElBQUksR0FBRyxNQUFNakIsTUFBTSxDQUFDaUIsSUFBUCxDQUFZQyxVQUFaLENBQXVCO0FBQ3RDQyxJQUFBQSxLQUFLLEVBQUU7QUFDTEosTUFBQUEsS0FBSyxFQUFFQTtBQURGO0FBRCtCLEdBQXZCLENBQWpCOztBQU1BLE1BQUksQ0FBQ0UsSUFBTCxFQUFXO0FBQ1RBLElBQUFBLElBQUksR0FBRyxNQUFNakIsTUFBTSxDQUFDaUIsSUFBUCxDQUFZRyxNQUFaLENBQW1CO0FBQzlCQyxNQUFBQSxJQUFJLEVBQUU7QUFDSlAsUUFBQUEsUUFESTtBQUVKQyxRQUFBQTtBQUZJO0FBRHdCLEtBQW5CLENBQWI7QUFNRDs7QUFFRCxRQUFNTyxhQUFhLEdBQUc7QUFBRUMsSUFBQUEsRUFBRSxFQUFFTixJQUFJLENBQUNNO0FBQVgsR0FBdEI7O0FBQ0EsUUFBTUMsS0FBSyxHQUFHQyxzQkFBSUMsSUFBSixDQUFTSixhQUFULEVBQXdCSyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBcEMsRUFBZ0Q7QUFDNURDLElBQUFBLFNBQVMsRUFBRUgsT0FBTyxDQUFDQyxHQUFSLENBQVlHO0FBRHFDLEdBQWhELENBQWQ7O0FBSUFsQixFQUFBQSxHQUFHLENBQUNtQixNQUFKLENBQVcsT0FBWCxFQUFvQlIsS0FBcEIsRUFBMkI7QUFBRVMsSUFBQUEsUUFBUSxFQUFFO0FBQVosR0FBM0I7QUFDQXBCLEVBQUFBLEdBQUcsQ0FBQ3FCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQlgsS0FBckI7QUFHRDs7QUFFRCxlQUFlZCxFQUFmLENBQWtCRSxHQUFsQixFQUF1QkMsR0FBdkIsRUFBNEI7QUFDMUJBLEVBQUFBLEdBQUcsQ0FBQ3FCLE1BQUosQ0FBVyxHQUFYLEVBQWdCRSxJQUFoQixDQUFxQjtBQUFFbkIsSUFBQUEsSUFBSSxFQUFFTCxHQUFHLENBQUNLO0FBQVosR0FBckI7QUFFRDs7QUFFRCxTQUFTTixPQUFULENBQWlCQyxHQUFqQixFQUFzQkMsR0FBdEIsRUFBMkI7QUFDekJBLEVBQUFBLEdBQUcsQ0FBQ3dCLFdBQUosQ0FBZ0IsT0FBaEI7QUFDQXhCLEVBQUFBLEdBQUcsQ0FBQ3FCLE1BQUosQ0FBVyxHQUFYLEVBQWdCRSxJQUFoQixDQUFxQixFQUFyQjtBQUNEIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tZXJvai9EZXNrdG9wL0phdmFTY3JpcHQveW91VHViZS9zZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcywgeyByZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuaW1wb3J0IHsgcHJvdGVjdCB9IGZyb20gXCIuLi9taWRkbGV3YXJlL2F1dGhvcml6YXRpb25cIjtcbi8vIEEgZnVuY3Rpb24gdG8gZ2V0IHRoZSByb3V0ZXMuXG4vLyBBbGwgcm91dGUgZGVmaW5pdGlvbnMgYXJlIGluIG9uZSBwbGFjZSBhbmQgd2Ugb25seSBuZWVkIHRvIGV4cG9ydCBvbmUgdGhpbmdcblxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpXG5mdW5jdGlvbiBnZXRBdXRoUm91dGVzKCkge1xuICBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gIHJvdXRlci5wb3N0KCcvZ29vZ2xlLWxvZ2luJywgZ29vZ2xlTG9naW4pXG4gIHJvdXRlci5nZXQoJy9tZScsIHByb3RlY3QsIG1lKVxuICByb3V0ZXIuZ2V0KCcvc2lnbm91dCcsIHNpZ25vdXQpXG5cblxuICByZXR1cm4gcm91dGVyO1xufVxuXG4vLyBBbGwgY29udHJvbGxlcnMvdXRpbGl0eSBmdW5jdGlvbnMgaGVyZVxuYXN5bmMgZnVuY3Rpb24gZ29vZ2xlTG9naW4ocmVxLCByZXMpIHtcblxuICBjb25zdCB7IHVzZXJuYW1lLCBlbWFpbCB9ID0gcmVxLmJvZHlcblxuICBsZXQgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBlbWFpbDogZW1haWxcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF1c2VyKSB7XG4gICAgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVzZXJuYW1lLFxuICAgICAgICBlbWFpbCxcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgY29uc3QgdG9rZW5QbGF5bG9hZCA9IHsgaWQ6IHVzZXIuaWQgfVxuICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHRva2VuUGxheWxvYWQsIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsIHtcbiAgICBleHBpcmVzSW46IHByb2Nlc3MuZW52LkpXVF9FWFBJUkVcbiAgfSlcblxuICByZXMuY29va2llKFwidG9rZW5cIiwgdG9rZW4sIHsgaHR0cE9ubHk6IHRydWUgfSlcbiAgcmVzLnN0YXR1cygyMDApLnNlbmQodG9rZW4pXG5cblxufVxuXG5hc3luYyBmdW5jdGlvbiBtZShyZXEsIHJlcykge1xuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHVzZXI6IHJlcS51c2VyIH0pXG5cbn1cblxuZnVuY3Rpb24gc2lnbm91dChyZXEsIHJlcykge1xuICByZXMuY2xlYXJDb29raWUoJ3Rva2VuJylcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe30pXG59XG5cbmV4cG9ydCB7IGdldEF1dGhSb3V0ZXMgfTsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getAuthRoutes",
        "router",
        "express",
        "Router",
        "post",
        "googleLogin",
        "get",
        "protect",
        "me",
        "signout",
        "req",
        "res",
        "username",
        "email",
        "body",
        "user",
        "findUnique",
        "where",
        "create",
        "data",
        "tokenPlayload",
        "id",
        "token",
        "jwt",
        "sign",
        "process",
        "env",
        "JWT_SECRET",
        "expiresIn",
        "JWT_EXPIRE",
        "cookie",
        "httpOnly",
        "status",
        "send",
        "json",
        "clearCookie"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;AACA;AACA;AAEA,MAAMA,MAAM,GAAG,IAAIC,oBAAJ,EAAf;;AACA,SAASC,aAAT,GAAyB;AACvB,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEAF,EAAAA,MAAM,CAACG,IAAP,CAAY,eAAZ,EAA6BC,WAA7B;AACAJ,EAAAA,MAAM,CAACK,GAAP,CAAW,KAAX,EAAkBC,sBAAlB,EAA2BC,EAA3B;AACAP,EAAAA,MAAM,CAACK,GAAP,CAAW,UAAX,EAAuBG,OAAvB;AAGA,SAAOR,MAAP;AACD,C,CAED;;;AACA,eAAeI,WAAf,CAA2BK,GAA3B,EAAgCC,GAAhC,EAAqC;AAEnC,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAAsBH,GAAG,CAACI,IAAhC;AAEA,MAAIC,IAAI,GAAG,MAAMjB,MAAM,CAACiB,IAAP,CAAYC,UAAZ,CAAuB;AACtCC,IAAAA,KAAK,EAAE;AACLJ,MAAAA,KAAK,EAAEA;AADF;AAD+B,GAAvB,CAAjB;;AAMA,MAAI,CAACE,IAAL,EAAW;AACTA,IAAAA,IAAI,GAAG,MAAMjB,MAAM,CAACiB,IAAP,CAAYG,MAAZ,CAAmB;AAC9BC,MAAAA,IAAI,EAAE;AACJP,QAAAA,QADI;AAEJC,QAAAA;AAFI;AADwB,KAAnB,CAAb;AAMD;;AAED,QAAMO,aAAa,GAAG;AAAEC,IAAAA,EAAE,EAAEN,IAAI,CAACM;AAAX,GAAtB;;AACA,QAAMC,KAAK,GAAGC,sBAAIC,IAAJ,CAASJ,aAAT,EAAwBK,OAAO,CAACC,GAAR,CAAYC,UAApC,EAAgD;AAC5DC,IAAAA,SAAS,EAAEH,OAAO,CAACC,GAAR,CAAYG;AADqC,GAAhD,CAAd;;AAIAlB,EAAAA,GAAG,CAACmB,MAAJ,CAAW,OAAX,EAAoBR,KAApB,EAA2B;AAAES,IAAAA,QAAQ,EAAE;AAAZ,GAA3B;AACApB,EAAAA,GAAG,CAACqB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBX,KAArB;AAGD;;AAED,eAAed,EAAf,CAAkBE,GAAlB,EAAuBC,GAAvB,EAA4B;AAC1BA,EAAAA,GAAG,CAACqB,MAAJ,CAAW,GAAX,EAAgBE,IAAhB,CAAqB;AAAEnB,IAAAA,IAAI,EAAEL,GAAG,CAACK;AAAZ,GAArB;AAED;;AAED,SAASN,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACzBA,EAAAA,GAAG,CAACwB,WAAJ,CAAgB,OAAhB;AACAxB,EAAAA,GAAG,CAACqB,MAAJ,CAAW,GAAX,EAAgBE,IAAhB,CAAqB,EAArB;AACD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express, { response } from \"express\";\nimport { PrismaClient } from '@prisma/client'\nimport jwt from \"jsonwebtoken\";\nimport { protect } from \"../middleware/authorization\";\n// A function to get the routes.\n// All route definitions are in one place and we only need to export one thing\n\nconst prisma = new PrismaClient()\nfunction getAuthRoutes() {\n  const router = express.Router();\n\n  router.post('/google-login', googleLogin)\n  router.get('/me', protect, me)\n  router.get('/signout', signout)\n\n\n  return router;\n}\n\n// All controllers/utility functions here\nasync function googleLogin(req, res) {\n\n  const { username, email } = req.body\n\n  let user = await prisma.user.findUnique({\n    where: {\n      email: email\n    }\n  })\n\n  if (!user) {\n    user = await prisma.user.create({\n      data: {\n        username,\n        email,\n      }\n    })\n  }\n\n  const tokenPlayload = { id: user.id }\n  const token = jwt.sign(tokenPlayload, process.env.JWT_SECRET, {\n    expiresIn: process.env.JWT_EXPIRE\n  })\n\n  res.cookie(\"token\", token, { httpOnly: true })\n  res.status(200).send(token)\n\n\n}\n\nasync function me(req, res) {\n  res.status(200).json({ user: req.user })\n\n}\n\nfunction signout(req, res) {\n  res.clearCookie('token')\n  res.status(200).json({})\n}\n\nexport { getAuthRoutes };"
      ]
    },
    "sourceType": "script",
    "mtime": 1632884234227
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUserRoutes = getUserRoutes;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getUserRoutes() {\n  const router = _express.default.Router();\n\n  return router;\n}\n\nasync function getLikedVideos(req, res, next) {}\n\nasync function getHistory(req, res, next) {}\n\nasync function toggleSubscribe(req, res, next) {}\n\nasync function getFeed(req, res) {}\n\nasync function searchUser(req, res, next) {}\n\nasync function getRecommendedChannels(req, res) {}\n\nasync function getProfile(req, res, next) {}\n\nasync function editUser(req, res) {}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiZ2V0VXNlclJvdXRlcyIsInJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXRMaWtlZFZpZGVvcyIsInJlcSIsInJlcyIsIm5leHQiLCJnZXRIaXN0b3J5IiwidG9nZ2xlU3Vic2NyaWJlIiwiZ2V0RmVlZCIsInNlYXJjaFVzZXIiLCJnZXRSZWNvbW1lbmRlZENoYW5uZWxzIiwiZ2V0UHJvZmlsZSIsImVkaXRVc2VyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxTQUFTQSxhQUFULEdBQXlCO0FBQ3ZCLFFBQU1DLE1BQU0sR0FBR0MsaUJBQVFDLE1BQVIsRUFBZjs7QUFFQSxTQUFPRixNQUFQO0FBQ0Q7O0FBRUQsZUFBZUcsY0FBZixDQUE4QkMsR0FBOUIsRUFBbUNDLEdBQW5DLEVBQXdDQyxJQUF4QyxFQUE4QyxDQUFFOztBQUVoRCxlQUFlQyxVQUFmLENBQTBCSCxHQUExQixFQUErQkMsR0FBL0IsRUFBb0NDLElBQXBDLEVBQTBDLENBQUU7O0FBRTVDLGVBQWVFLGVBQWYsQ0FBK0JKLEdBQS9CLEVBQW9DQyxHQUFwQyxFQUF5Q0MsSUFBekMsRUFBK0MsQ0FBRTs7QUFFakQsZUFBZUcsT0FBZixDQUF1QkwsR0FBdkIsRUFBNEJDLEdBQTVCLEVBQWlDLENBQUU7O0FBRW5DLGVBQWVLLFVBQWYsQ0FBMEJOLEdBQTFCLEVBQStCQyxHQUEvQixFQUFvQ0MsSUFBcEMsRUFBMEMsQ0FBRTs7QUFFNUMsZUFBZUssc0JBQWYsQ0FBc0NQLEdBQXRDLEVBQTJDQyxHQUEzQyxFQUFnRCxDQUFFOztBQUVsRCxlQUFlTyxVQUFmLENBQTBCUixHQUExQixFQUErQkMsR0FBL0IsRUFBb0NDLElBQXBDLEVBQTBDLENBQUU7O0FBRTVDLGVBQWVPLFFBQWYsQ0FBd0JULEdBQXhCLEVBQTZCQyxHQUE3QixFQUFrQyxDQUFFIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9tZXJvai9EZXNrdG9wL0phdmFTY3JpcHQveW91VHViZS9zZXJ2ZXIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuXG5mdW5jdGlvbiBnZXRVc2VyUm91dGVzKCkge1xuICBjb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gIHJldHVybiByb3V0ZXI7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldExpa2VkVmlkZW9zKHJlcSwgcmVzLCBuZXh0KSB7fVxuXG5hc3luYyBmdW5jdGlvbiBnZXRIaXN0b3J5KHJlcSwgcmVzLCBuZXh0KSB7fVxuXG5hc3luYyBmdW5jdGlvbiB0b2dnbGVTdWJzY3JpYmUocmVxLCByZXMsIG5leHQpIHt9XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEZlZWQocmVxLCByZXMpIHt9XG5cbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaFVzZXIocmVxLCByZXMsIG5leHQpIHt9XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFJlY29tbWVuZGVkQ2hhbm5lbHMocmVxLCByZXMpIHt9XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFByb2ZpbGUocmVxLCByZXMsIG5leHQpIHt9XG5cbmFzeW5jIGZ1bmN0aW9uIGVkaXRVc2VyKHJlcSwgcmVzKSB7fVxuXG5leHBvcnQgeyBnZXRVc2VyUm91dGVzIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "getUserRoutes",
        "router",
        "express",
        "Router",
        "getLikedVideos",
        "req",
        "res",
        "next",
        "getHistory",
        "toggleSubscribe",
        "getFeed",
        "searchUser",
        "getRecommendedChannels",
        "getProfile",
        "editUser"
      ],
      "mappings": ";;;;;;;AAAA;;;;AAEA,SAASA,aAAT,GAAyB;AACvB,QAAMC,MAAM,GAAGC,iBAAQC,MAAR,EAAf;;AAEA,SAAOF,MAAP;AACD;;AAED,eAAeG,cAAf,CAA8BC,GAA9B,EAAmCC,GAAnC,EAAwCC,IAAxC,EAA8C,CAAE;;AAEhD,eAAeC,UAAf,CAA0BH,GAA1B,EAA+BC,GAA/B,EAAoCC,IAApC,EAA0C,CAAE;;AAE5C,eAAeE,eAAf,CAA+BJ,GAA/B,EAAoCC,GAApC,EAAyCC,IAAzC,EAA+C,CAAE;;AAEjD,eAAeG,OAAf,CAAuBL,GAAvB,EAA4BC,GAA5B,EAAiC,CAAE;;AAEnC,eAAeK,UAAf,CAA0BN,GAA1B,EAA+BC,GAA/B,EAAoCC,IAApC,EAA0C,CAAE;;AAE5C,eAAeK,sBAAf,CAAsCP,GAAtC,EAA2CC,GAA3C,EAAgD,CAAE;;AAElD,eAAeO,UAAf,CAA0BR,GAA1B,EAA+BC,GAA/B,EAAoCC,IAApC,EAA0C,CAAE;;AAE5C,eAAeO,QAAf,CAAwBT,GAAxB,EAA6BC,GAA7B,EAAkC,CAAE",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express from \"express\";\n\nfunction getUserRoutes() {\n  const router = express.Router();\n\n  return router;\n}\n\nasync function getLikedVideos(req, res, next) {}\n\nasync function getHistory(req, res, next) {}\n\nasync function toggleSubscribe(req, res, next) {}\n\nasync function getFeed(req, res) {}\n\nasync function searchUser(req, res, next) {}\n\nasync function getRecommendedChannels(req, res) {}\n\nasync function getProfile(req, res, next) {}\n\nasync function editUser(req, res) {}\n\nexport { getUserRoutes };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/video.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
        "sourceFileName": "video.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getVideoRoutes = getVideoRoutes;\n\nvar _express = _interopRequireWildcard(require(\"express\"));\n\nvar _client = require(\"@prisma/client\");\n\nvar _authorization = require(\"../middleware/authorization\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst prisma = new _client.PrismaClient();\n\nfunction getVideoRoutes() {\n  const router = _express.default.Router();\n\n  router.get('/', getRecommendedVideos);\n  router.get('/trending', getTrendingVideos);\n  router.get('/search', searchVideos);\n  router.post('/', _authorization.protect, addVideo);\n  router.post('/:videoId/comment', _authorization.protect, addComment);\n  router.delete('/:videoId/comment/:commentId', _authorization.protect, deleteComment);\n  return router;\n}\n\nasync function getVideoViews(videos) {\n  for (const video of videos) {\n    const views = await prisma.view.count({\n      where: {\n        videoId: {\n          equals: video.id\n        }\n      }\n    });\n    video.views = views;\n  }\n\n  return videos;\n}\n\nasync function getRecommendedVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await getVideoViews(videos);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function getTrendingVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await getVideoViews(videos);\n  videos.sort((a, b) => b.views - a.views);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function searchVideos(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      statusCode: 400,\n      message: \"You haven`t entered the serachasd fasdf afgnkdcvbrjnbfjtbg\"\n    });\n  }\n\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    where: {\n      OR: [{\n        title: {\n          contains: req.query.query,\n          mode: \"insensitive\"\n        }\n      }, {\n        description: {\n          contains: req.query.query,\n          mode: \"insensitive\"\n        }\n      }]\n    }\n  });\n\n  if (!videos.length) {\n    return res.status(200).json({\n      videos\n    });\n  }\n\n  videos = await getVideoViews(videos);\n  res.status(200).json({\n    videos\n  });\n}\n\nasync function addVideo(req, res) {\n  const {\n    title,\n    description,\n    url,\n    thumbnail\n  } = req.body;\n  const video = await prisma.video.create({\n    data: {\n      title,\n      description,\n      url,\n      thumbnail,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      }\n    }\n  });\n  res.status(200).json({\n    video\n  });\n}\n\nasync function addComment(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  });\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} doesn't exist`,\n      statusCode: 404\n    });\n  }\n\n  const comment = await prisma.comment.create({\n    data: {\n      text: req.body.text,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      },\n      video: {\n        connect: {\n          id: req.params.videoId\n        }\n      }\n    }\n  });\n  res.status(200).json({\n    comment\n  });\n}\n\nasync function deleteComment(req, res) {\n  const comment = await prisma.comment.findUnique({\n    where: {\n      id: req.params.commentId\n    },\n    select: {\n      userId: true\n    }\n  });\n\n  if (comment.userId !== req.user.id) {\n    return res.status(401).send(\"You are not authorised to delete this comment\");\n  }\n\n  await prisma.comment.delete({\n    where: {\n      id: req.params.commentId\n    }\n  });\n  res.status(200).json({}).send(\"It is succesfully deleted \");\n}\n\nasync function addVideoView(req, res, next) {}\n\nasync function likeVideo(req, res, next) {}\n\nasync function dislikeVideo(req, res, next) {}\n\nasync function getVideo(req, res, next) {}\n\nasync function deleteVideo(req, res) {}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvLmpzIl0sIm5hbWVzIjpbInByaXNtYSIsIlByaXNtYUNsaWVudCIsImdldFZpZGVvUm91dGVzIiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImdldFJlY29tbWVuZGVkVmlkZW9zIiwiZ2V0VHJlbmRpbmdWaWRlb3MiLCJzZWFyY2hWaWRlb3MiLCJwb3N0IiwicHJvdGVjdCIsImFkZFZpZGVvIiwiYWRkQ29tbWVudCIsImRlbGV0ZSIsImRlbGV0ZUNvbW1lbnQiLCJnZXRWaWRlb1ZpZXdzIiwidmlkZW9zIiwidmlkZW8iLCJ2aWV3cyIsInZpZXciLCJjb3VudCIsIndoZXJlIiwidmlkZW9JZCIsImVxdWFscyIsImlkIiwicmVxIiwicmVzIiwiZmluZE1hbnkiLCJpbmNsdWRlIiwidXNlciIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJsZW5ndGgiLCJzdGF0dXMiLCJqc29uIiwic29ydCIsImEiLCJiIiwibmV4dCIsInF1ZXJ5Iiwic3RhdHVzQ29kZSIsIm1lc3NhZ2UiLCJPUiIsInRpdGxlIiwiY29udGFpbnMiLCJtb2RlIiwiZGVzY3JpcHRpb24iLCJ1cmwiLCJ0aHVtYm5haWwiLCJib2R5IiwiY3JlYXRlIiwiZGF0YSIsImNvbm5lY3QiLCJmaW5kVW5pcXVlIiwicGFyYW1zIiwiY29tbWVudCIsInRleHQiLCJjb21tZW50SWQiLCJzZWxlY3QiLCJ1c2VySWQiLCJzZW5kIiwiYWRkVmlkZW9WaWV3IiwibGlrZVZpZGVvIiwiZGlzbGlrZVZpZGVvIiwiZ2V0VmlkZW8iLCJkZWxldGVWaWRlbyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBSUMsb0JBQUosRUFBZjs7QUFFQSxTQUFTQyxjQUFULEdBQTBCO0FBQ3hCLFFBQU1DLE1BQU0sR0FBR0MsaUJBQVFDLE1BQVIsRUFBZjs7QUFFQUYsRUFBQUEsTUFBTSxDQUFDRyxHQUFQLENBQVcsR0FBWCxFQUFnQkMs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RyxNQUFBQSxFQUFFLEVBQUVDLEdBQUcsQ0FBQzZCLE1BQUosQ0FBV0c7QUFEVjtBQURtQixHQUF0QixDQUFOO0FBTUEvQixFQUFBQSxHQUFHLENBQUNPLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixFQUFyQixFQUF5QjBCLElBQXpCLENBQThCLDRCQUE5QjtBQUNEOztBQUVELGVBQWVDLFlBQWYsQ0FBNEJwQyxHQUE1QixFQUFpQ0MsR0FBakMsRUFBc0NZLElBQXRDLEVBQTRDLENBQUc7O0FBRS9DLGVBQWV3QixTQUFmLENBQXlCckMsR0FBekIsRUFBOEJDLEdBQTlCLEVBQW1DWSxJQUFuQyxFQUF5QyxDQUFHOztBQUU1QyxlQUFleUIsWUFBZixDQUE0QnRDLEdBQTVCLEVBQWlDQyxHQUFqQyxFQUFzQ1ksSUFBdEMsRUFBNEMsQ0FBRzs7QUFFL0MsZUFBZTBCLFFBQWYsQ0FBd0J2QyxHQUF4QixFQUE2QkMsR0FBN0IsRUFBa0NZLElBQWxDLEVBQXdDLENBQUc7O0FBRTNDLGVBQWUyQixXQUFmLENBQTJCeEMsR0FBM0IsRUFBZ0NDLEdBQWhDLEVBQXFDLENBQUciLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzLCB7IHJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiXG5pbXBvcnQgeyBwcm90ZWN0IH0gZnJvbSBcIi4uL21pZGRsZXdhcmUvYXV0aG9yaXphdGlvblwiO1xuXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KClcblxuZnVuY3Rpb24gZ2V0VmlkZW9Sb3V0ZXMoKSB7XG4gIGNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbiAgcm91dGVyLmdldCgnLycsIGdldFJlY29tbWVuZGVkVmlkZW9zKVxuICByb3V0ZXIuZ2V0KCcvdHJlbmRpbmcnLCBnZXRUcmVuZGluZ1ZpZGVvcylcbiAgcm91dGVyLmdldCgnL3NlYXJjaCcsIHNlYXJjaFZpZGVvcylcblxuICByb3V0ZXIucG9zdCgnLycsIHByb3RlY3QsIGFkZFZpZGVvKVxuICByb3V0ZXIucG9zdCgnLzp2aWRlb0lkL2NvbW1lbnQnLCBwcm90ZWN0LCBhZGRDb21tZW50KVxuICByb3V0ZXIuZGVsZXRlKCcvOnZpZGVvSWQvY29tbWVudC86Y29tbWVudElkJywgcHJvdGVjdCwgZGVsZXRlQ29tbWVudClcblxuICByZXR1cm4gcm91dGVyO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRWaWRlb1ZpZXdzKHZpZGVvcykge1xuICBmb3IgKGNvbnN0IHZpZGVvIG9mIHZpZGVvcykge1xuICAgIGNvbnN0IHZpZXdzID0gYXdhaXQgcHJpc21hLnZpZXcuY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdmlkZW9JZDoge1xuICAgICAgICAgIGVxdWFsczogdmlkZW8uaWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgdmlkZW8udmlld3MgPSB2aWV3c1xuICB9XG4gIHJldHVybiB2aWRlb3Ncbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVjb21tZW5kZWRWaWRlb3MocmVxLCByZXMpIHtcbiAgbGV0IHZpZGVvcyA9IGF3YWl0IHByaXNtYS52aWRlby5maW5kTWFueSh7XG4gICAgaW5jbHVkZToge1xuICAgICAgdXNlcjogdHJ1ZVxuICAgIH0sXG4gICAgb3JkZXJCeToge1xuICAgICAgY3JlYXRlZEF0OiBcImRlc2NcIlxuICAgIH1cbiAgfSlcblxuICBpZiAoIXZpZGVvcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyB2aWRlb3MgfSlcblxuICB9XG4gIHZpZGVvcyA9IGF3YWl0IGdldFZpZGVvVmlld3ModmlkZW9zKVxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvcyB9KVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFRyZW5kaW5nVmlkZW9zKHJlcSwgcmVzKSB7XG4gIGxldCB2aWRlb3MgPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZE1hbnkoe1xuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXI6IHRydWVcbiAgICB9LFxuICAgIG9yZGVyQnk6IHtcbiAgICAgIGNyZWF0ZWRBdDogXCJkZXNjXCJcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF2aWRlb3MubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdmlkZW9zIH0pXG5cbiAgfVxuICB2aWRlb3MgPSBhd2FpdCBnZXRWaWRlb1ZpZXdzKHZpZGVvcylcbiAgdmlkZW9zLnNvcnQoKGEsIGIpID0+IGIudmlld3MgLSBhLnZpZXdzKVxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHZpZGVvcyB9KVxuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaFZpZGVvcyhyZXEsIHJlcywgbmV4dCkge1xuICBpZiAoIXJlcS5xdWVyeS5xdWVyeSkge1xuICAgIHJldHVybiBuZXh0KHtcbiAgICAgIHN0YXR1c0NvZGU6IDQwMCxcbiAgICAgIG1lc3NhZ2U6IFwiWW91IGhhdmVuYHQgZW50ZXJlZCB0aGUgc2VyYWNoYXNkIGZhc2RmIGFmZ25rZGN2YnJqbmJmanRiZ1wiXG4gICAgfSlcbiAgfVxuXG4gIGxldCB2aWRlb3MgPSBhd2FpdCBwcmlzbWEudmlkZW8uZmluZE1hbnkoe1xuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXI6IHRydWVcbiAgICB9LFxuICAgIHdoZXJlOiB7XG4gICAgICBPUjogW1xuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgIGNvbnRhaW5zOiByZXEucXVlcnkucXVlcnksXG4gICAgICAgICAgICBtb2RlOiBcImluc2Vuc2l0aXZlXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgY29udGFpbnM6IHJlcS5xdWVyeS5xdWVyeSxcbiAgICAgICAgICAgIG1vZGU6IFwiaW5zZW5zaXRpdmVcIlxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9XG4gIH0pXG5cbiAgaWYgKCF2aWRlb3MubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdmlkZW9zIH0pXG5cbiAgfVxuICB2aWRlb3MgPSBhd2FpdCBnZXRWaWRlb1ZpZXdzKHZpZGVvcylcbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB2aWRlb3MgfSlcblxufVxuXG5hc3luYyBmdW5jdGlvbiBhZGRWaWRlbyhyZXEsIHJlcykge1xuICBjb25zdCB7IHRpdGxlLCBkZXNjcmlwdGlvbiwgdXJsLCB0aHVtYm5haWwgfSA9IHJlcS5ib2R5O1xuXG4gIGNvbnN0IHZpZGVvID0gYXdhaXQgcHJpc21hLnZpZGVvLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgdGl0bGUsIGRlc2NyaXB0aW9uLCB1cmwsIHRodW1ibmFpbCxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgIGlkOiByZXEudXNlci5pZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdmlkZW8gfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gYWRkQ29tbWVudChyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB2aWRlbyA9IGF3YWl0IHByaXNtYS52aWRlby5maW5kVW5pcXVlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgIH1cbiAgfSlcblxuICBpZiAoIXZpZGVvKSB7XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgbWVzc2FnZTogYFRoZSB2aWRlbyB3aXRoICR7cmVxLnBhcmFtcy52aWRlb0lkfSBkb2Vzbid0IGV4aXN0YCxcbiAgICAgIHN0YXR1c0NvZGU6IDQwNFxuICAgIH0pXG4gIH1cblxuICBjb25zdCBjb21tZW50ID0gYXdhaXQgcHJpc21hLmNvbW1lbnQuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICB0ZXh0OiByZXEuYm9keS50ZXh0LFxuICAgICAgdXNlcjoge1xuICAgICAgICBjb25uZWN0OiB7XG4gICAgICAgICAgaWQ6IHJlcS51c2VyLmlkXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB2aWRlbzoge1xuICAgICAgICBjb25uZWN0OiB7XG4gICAgICAgICAgaWQ6IHJlcS5wYXJhbXMudmlkZW9JZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgY29tbWVudCB9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBkZWxldGVDb21tZW50KHJlcSwgcmVzKSB7XG4gIGNvbnN0IGNvbW1lbnQgPSBhd2FpdCBwcmlzbWEuY29tbWVudC5maW5kVW5pcXVlKHtcbiAgICB3aGVyZToge1xuICAgICAgaWQ6IHJlcS5wYXJhbXMuY29tbWVudElkXG4gICAgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIHVzZXJJZDogdHJ1ZVxuICAgIH1cbiAgfSlcblxuICBpZiAoY29tbWVudC51c2VySWQgIT09IHJlcS51c2VyLmlkKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5zZW5kKFwiWW91IGFyZSBub3QgYXV0aG9yaXNlZCB0byBkZWxldGUgdGhpcyBjb21tZW50XCIpXG4gIH1cblxuICBhd2FpdCBwcmlzbWEuY29tbWVudC5kZWxldGUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogcmVxLnBhcmFtcy5jb21tZW50SWRcbiAgICB9XG4gIH0pO1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHt9KS5zZW5kKFwiSXQgaXMgc3VjY2VzZnVsbHkgZGVsZXRlZCBcIilcbn1cblxuYXN5bmMgZnVuY3Rpb24gYWRkVmlkZW9WaWV3KHJlcSwgcmVzLCBuZXh0KSB7IH1cblxuYXN5bmMgZnVuY3Rpb24gbGlrZVZpZGVvKHJlcSwgcmVzLCBuZXh0KSB7IH1cblxuYXN5bmMgZnVuY3Rpb24gZGlzbGlrZVZpZGVvKHJlcSwgcmVzLCBuZXh0KSB7IH1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0VmlkZW8ocmVxLCByZXMsIG5leHQpIHsgfVxuXG5hc3luYyBmdW5jdGlvbiBkZWxldGVWaWRlbyhyZXEsIHJlcykgeyB9XG5cbmV4cG9ydCB7IGdldFZpZGVvUm91dGVzIH07XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "video.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getVideoRoutes",
        "router",
        "express",
        "Router",
        "get",
        "getRecommendedVideos",
        "getTrendingVideos",
        "searchVideos",
        "post",
        "protect",
        "addVideo",
        "addComment",
        "delete",
        "deleteComment",
        "getVideoViews",
        "videos",
        "video",
        "views",
        "view",
        "count",
        "where",
        "videoId",
        "equals",
        "id",
        "req",
        "res",
        "findMany",
        "include",
        "user",
        "orderBy",
        "createdAt",
        "length",
        "status",
        "json",
        "sort",
        "a",
        "b",
        "next",
        "query",
        "statusCode",
        "message",
        "OR",
        "title",
        "contains",
        "mode",
        "description",
        "url",
        "thumbnail",
        "body",
        "create",
        "data",
        "connect",
        "findUnique",
        "params",
        "comment",
        "text",
        "commentId",
        "select",
        "userId",
        "send",
        "addVideoView",
        "likeVideo",
        "dislikeVideo",
        "getVideo",
        "deleteVideo"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/routes/",
      "sourcesContent": [
        "import express, { response } from \"express\";\nimport { PrismaClient } from \"@prisma/client\"\nimport { protect } from \"../middleware/authorization\";\n\nconst prisma = new PrismaClient()\n\nfunction getVideoRoutes() {\n  const router = express.Router();\n\n  router.get('/', getRecommendedVideos)\n  router.get('/trending', getTrendingVideos)\n  router.get('/search', searchVideos)\n\n  router.post('/', protect, addVideo)\n  router.post('/:videoId/comment', protect, addComment)\n  router.delete('/:videoId/comment/:commentId', protect, deleteComment)\n\n  return router;\n}\n\nasync function getVideoViews(videos) {\n  for (const video of videos) {\n    const views = await prisma.view.count({\n      where: {\n        videoId: {\n          equals: video.id\n        }\n      }\n    })\n    video.views = views\n  }\n  return videos\n}\n\nasync function getRecommendedVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n  videos = await getVideoViews(videos)\n  res.status(200).json({ videos })\n\n}\n\nasync function getTrendingVideos(req, res) {\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n  videos = await getVideoViews(videos)\n  videos.sort((a, b) => b.views - a.views)\n  res.status(200).json({ videos })\n\n}\n\nasync function searchVideos(req, res, next) {\n  if (!req.query.query) {\n    return next({\n      statusCode: 400,\n      message: \"You haven`t entered the serachasd fasdf afgnkdcvbrjnbfjtbg\"\n    })\n  }\n\n  let videos = await prisma.video.findMany({\n    include: {\n      user: true\n    },\n    where: {\n      OR: [\n        {\n          title: {\n            contains: req.query.query,\n            mode: \"insensitive\"\n          }\n        },\n        {\n          description: {\n            contains: req.query.query,\n            mode: \"insensitive\"\n          },\n        }\n      ]\n    }\n  })\n\n  if (!videos.length) {\n    return res.status(200).json({ videos })\n\n  }\n  videos = await getVideoViews(videos)\n  res.status(200).json({ videos })\n\n}\n\nasync function addVideo(req, res) {\n  const { title, description, url, thumbnail } = req.body;\n\n  const video = await prisma.video.create({\n    data: {\n      title, description, url, thumbnail,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      }\n    }\n  })\n\n  res.status(200).json({ video })\n}\n\nasync function addComment(req, res, next) {\n  const video = await prisma.video.findUnique({\n    where: {\n      id: req.params.videoId\n    }\n  })\n\n  if (!video) {\n    return next({\n      message: `The video with ${req.params.videoId} doesn't exist`,\n      statusCode: 404\n    })\n  }\n\n  const comment = await prisma.comment.create({\n    data: {\n      text: req.body.text,\n      user: {\n        connect: {\n          id: req.user.id\n        }\n      },\n      video: {\n        connect: {\n          id: req.params.videoId\n        }\n      }\n    }\n  })\n\n  res.status(200).json({ comment })\n}\n\nasync function deleteComment(req, res) {\n  const comment = await prisma.comment.findUnique({\n    where: {\n      id: req.params.commentId\n    },\n    select: {\n      userId: true\n    }\n  })\n\n  if (comment.userId !== req.user.id) {\n    return res.status(401).send(\"You are not authorised to delete this comment\")\n  }\n\n  await prisma.comment.delete({\n    where: {\n      id: req.params.commentId\n    }\n  });\n\n  res.status(200).json({}).send(\"It is succesfully deleted \")\n}\n\nasync function addVideoView(req, res, next) { }\n\nasync function likeVideo(req, res, next) { }\n\nasync function dislikeVideo(req, res, next) { }\n\nasync function getVideo(req, res, next) { }\n\nasync function deleteVideo(req, res) { }\n\nexport { getVideoRoutes };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1633105064848
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/error.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
        "sourceFileName": "error.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.errorMiddleware = errorMiddleware;\nexports.setupCloseOnExit = setupCloseOnExit;\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Middleware that will help us catch generic express-related errors\nfunction errorMiddleware(error, req, res, next) {\n  if (res.headersSent) {\n    next(error);\n  } else {\n    _loglevel.default.error(error);\n\n    res.status(error.statusCode || 500);\n    res.json({\n      message: error.message,\n      ...(process.env.NODE_ENV === \"production\" ? null : {\n        stack: error.stack\n      })\n    });\n  }\n} // This closes the server in the event of an error so\n// that our requests do not hang\n\n\nfunction setupCloseOnExit(server) {\n  async function exitHandler(options = {}) {\n    await server.close().then(() => {\n      _loglevel.default.info(\"Server successfully closed\");\n    }).catch(error => {\n      _loglevel.default.warn(\"Something went wrong closing the server\", error.stack);\n    });\n    if (options.exit) process.exit();\n  } // Do something when app is closing\n\n\n  process.on(\"exit\", exitHandler); // Catches ctrl+c event\n\n  process.on(\"SIGINT\", exitHandler.bind(null, {\n    exit: true\n  })); // Catches \"kill pid\" (for example: nodemon restart)\n\n  process.on(\"SIGUSR1\", exitHandler.bind(null, {\n    exit: true\n  }));\n  process.on(\"SIGUSR2\", exitHandler.bind(null, {\n    exit: true\n  })); // Catches uncaught exceptions\n\n  process.on(\"uncaughtException\", exitHandler.bind(null, {\n    exit: true\n  }));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVycm9yLmpzIl0sIm5hbWVzIjpbImVycm9yTWlkZGxld2FyZSIsImVycm9yIiwicmVxIiwicmVzIiwibmV4dCIsImhlYWRlcnNTZW50IiwibG9nZ2VyIiwic3RhdHVzIiwic3RhdHVzQ29kZSIsImpzb24iLCJtZXNzYWdlIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic3RhY2siLCJzZXR1cENsb3NlT25FeGl0Iiwic2VydmVyIiwiZXhpdEhhbmRsZXIiLCJvcHRpb25zIiwiY2xvc2UiLCJ0aGVuIiwiaW5mbyIsImNhdGNoIiwid2FybiIsImV4aXQiLCJvbiIsImJpbmQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7Ozs7QUFFQTtBQUNBLFNBQVNBLGVBQVQsQ0FBeUJDLEtBQXpCLEVBQWdDQyxHQUFoQyxFQUFxQ0MsR0FBckMsRUFBMENDLElBQTFDLEVBQWdEO0FBQzlDLE1BQUlELEdBQUcsQ0FBQ0UsV0FBUixFQUFxQjtBQUNuQkQsSUFBQUEsSUFBSSxDQUFDSCxLQUFELENBQUo7QUFDRCxHQUZELE1BRU87QUFDTEssc0JBQU9MLEtBQVAsQ0FBYUEsS0FBYjs7QUFDQUUsSUFBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVdOLEtBQUssQ0FBQ08sVUFBTixJQUFvQixHQUEvQjtBQUNBTCxJQUFBQSxHQUFHLENBQUNNLElBQUosQ0FBUztBQUNQQyxNQUFBQSxPQUFPLEVBQUVULEtBQUssQ0FBQ1MsT0FEUjtBQUVQLFVBQUlDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxRQUFaLEtBQXlCLFlBQXpCLEdBQ0EsSUFEQSxHQUVBO0FBQUVDLFFBQUFBLEtBQUssRUFBRWIsS0FBSyxDQUFDYTtBQUFmLE9BRko7QUFGTyxLQUFUO0FBTUQ7QUFDRixDLENBRUQ7QUFDQTs7O0FBQ0EsU0FBU0MsZ0JBQVQsQ0FBMEJDLE1BQTFCLEVBQWtDO0FBQ2hDLGlCQUFlQyxXQUFmLENBQTJCQyxPQUFPLEdBQUcsRUFBckMsRUFBeUM7QUFDdkMsVUFBTUYsTUFBTSxDQUNURyxLQURHLEdBRUhDLElBRkcsQ0FFRSxNQUFNO0FBQ1ZkLHdCQUFPZSxJQUFQLENBQVksNEJBQVo7QUFDRCxLQUpHLEVBS0hDLEtBTEcsQ0FLSXJCLEtBQUQsSUFBVztBQUNoQkssd0JBQU9pQixJQUFQLENBQVkseUNBQVosRUFBdUR0QixLQUFLLENBQUNhLEtBQTdEO0FBQ0QsS0FQRyxDQUFOO0FBUUEsUUFBSUksT0FBTyxDQUFDTSxJQUFaLEVBQWtCYixPQUFPLENBQUNhLElBQVI7QUFDbkIsR0FYK0IsQ0FZaEM7OztBQUNBYixFQUFBQSxPQUFPLENBQUNjLEVBQVIsQ0FBVyxNQUFYLEVBQW1CUixXQUFuQixFQWJnQyxDQWNoQzs7QUFDQU4sRUFBQUEsT0FBTyxDQUFDYyxFQUFSLENBQVcsUUFBWCxFQUFxQlIsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQXJCLEVBZmdDLENBZ0JoQzs7QUFDQWIsRUFBQUEsT0FBTyxDQUFDYyxFQUFSLENBQVcsU0FBWCxFQUFzQlIsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQXRCO0FBQ0FiLEVBQUFBLE9BQU8sQ0FBQ2MsRUFBUixDQUFXLFNBQVgsRUFBc0JSLFdBQVcsQ0FBQ1MsSUFBWixDQUFpQixJQUFqQixFQUF1QjtBQUFFRixJQUFBQSxJQUFJLEVBQUU7QUFBUixHQUF2QixDQUF0QixFQWxCZ0MsQ0FtQmhDOztBQUNBYixFQUFBQSxPQUFPLENBQUNjLEVBQVIsQ0FBVyxtQkFBWCxFQUFnQ1IsV0FBVyxDQUFDUyxJQUFaLENBQWlCLElBQWpCLEVBQXVCO0FBQUVGLElBQUFBLElBQUksRUFBRTtBQUFSLEdBQXZCLENBQWhDO0FBQ0QiLCJzb3VyY2VSb290IjoiL1VzZXJzL21lcm9qL0Rlc2t0b3AvSmF2YVNjcmlwdC95b3VUdWJlL3NlcnZlci9zcmMvbWlkZGxld2FyZS8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nZ2VyIGZyb20gXCJsb2dsZXZlbFwiO1xuXG4vLyBNaWRkbGV3YXJlIHRoYXQgd2lsbCBoZWxwIHVzIGNhdGNoIGdlbmVyaWMgZXhwcmVzcy1yZWxhdGVkIGVycm9yc1xuZnVuY3Rpb24gZXJyb3JNaWRkbGV3YXJlKGVycm9yLCByZXEsIHJlcywgbmV4dCkge1xuICBpZiAocmVzLmhlYWRlcnNTZW50KSB7XG4gICAgbmV4dChlcnJvcik7XG4gIH0gZWxzZSB7XG4gICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICByZXMuc3RhdHVzKGVycm9yLnN0YXR1c0NvZGUgfHwgNTAwKTtcbiAgICByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgLi4uKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIlxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiB7IHN0YWNrOiBlcnJvci5zdGFjayB9KSxcbiAgICB9KTtcbiAgfVxufVxuXG4vLyBUaGlzIGNsb3NlcyB0aGUgc2VydmVyIGluIHRoZSBldmVudCBvZiBhbiBlcnJvciBzb1xuLy8gdGhhdCBvdXIgcmVxdWVzdHMgZG8gbm90IGhhbmdcbmZ1bmN0aW9uIHNldHVwQ2xvc2VPbkV4aXQoc2VydmVyKSB7XG4gIGFzeW5jIGZ1bmN0aW9uIGV4aXRIYW5kbGVyKG9wdGlvbnMgPSB7fSkge1xuICAgIGF3YWl0IHNlcnZlclxuICAgICAgLmNsb3NlKClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJTZXJ2ZXIgc3VjY2Vzc2Z1bGx5IGNsb3NlZFwiKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGxvZ2dlci53YXJuKFwiU29tZXRoaW5nIHdlbnQgd3JvbmcgY2xvc2luZyB0aGUgc2VydmVyXCIsIGVycm9yLnN0YWNrKTtcbiAgICAgIH0pO1xuICAgIGlmIChvcHRpb25zLmV4aXQpIHByb2Nlc3MuZXhpdCgpO1xuICB9XG4gIC8vIERvIHNvbWV0aGluZyB3aGVuIGFwcCBpcyBjbG9zaW5nXG4gIHByb2Nlc3Mub24oXCJleGl0XCIsIGV4aXRIYW5kbGVyKTtcbiAgLy8gQ2F0Y2hlcyBjdHJsK2MgZXZlbnRcbiAgcHJvY2Vzcy5vbihcIlNJR0lOVFwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG4gIC8vIENhdGNoZXMgXCJraWxsIHBpZFwiIChmb3IgZXhhbXBsZTogbm9kZW1vbiByZXN0YXJ0KVxuICBwcm9jZXNzLm9uKFwiU0lHVVNSMVwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG4gIHByb2Nlc3Mub24oXCJTSUdVU1IyXCIsIGV4aXRIYW5kbGVyLmJpbmQobnVsbCwgeyBleGl0OiB0cnVlIH0pKTtcbiAgLy8gQ2F0Y2hlcyB1bmNhdWdodCBleGNlcHRpb25zXG4gIHByb2Nlc3Mub24oXCJ1bmNhdWdodEV4Y2VwdGlvblwiLCBleGl0SGFuZGxlci5iaW5kKG51bGwsIHsgZXhpdDogdHJ1ZSB9KSk7XG59XG5cbmV4cG9ydCB7IGVycm9yTWlkZGxld2FyZSwgc2V0dXBDbG9zZU9uRXhpdCB9O1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "error.js"
      ],
      "names": [
        "errorMiddleware",
        "error",
        "req",
        "res",
        "next",
        "headersSent",
        "logger",
        "status",
        "statusCode",
        "json",
        "message",
        "process",
        "env",
        "NODE_ENV",
        "stack",
        "setupCloseOnExit",
        "server",
        "exitHandler",
        "options",
        "close",
        "then",
        "info",
        "catch",
        "warn",
        "exit",
        "on",
        "bind"
      ],
      "mappings": ";;;;;;;;AAAA;;;;AAEA;AACA,SAASA,eAAT,CAAyBC,KAAzB,EAAgCC,GAAhC,EAAqCC,GAArC,EAA0CC,IAA1C,EAAgD;AAC9C,MAAID,GAAG,CAACE,WAAR,EAAqB;AACnBD,IAAAA,IAAI,CAACH,KAAD,CAAJ;AACD,GAFD,MAEO;AACLK,sBAAOL,KAAP,CAAaA,KAAb;;AACAE,IAAAA,GAAG,CAACI,MAAJ,CAAWN,KAAK,CAACO,UAAN,IAAoB,GAA/B;AACAL,IAAAA,GAAG,CAACM,IAAJ,CAAS;AACPC,MAAAA,OAAO,EAAET,KAAK,CAACS,OADR;AAEP,UAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACA,IADA,GAEA;AAAEC,QAAAA,KAAK,EAAEb,KAAK,CAACa;AAAf,OAFJ;AAFO,KAAT;AAMD;AACF,C,CAED;AACA;;;AACA,SAASC,gBAAT,CAA0BC,MAA1B,EAAkC;AAChC,iBAAeC,WAAf,CAA2BC,OAAO,GAAG,EAArC,EAAyC;AACvC,UAAMF,MAAM,CACTG,KADG,GAEHC,IAFG,CAEE,MAAM;AACVd,wBAAOe,IAAP,CAAY,4BAAZ;AACD,KAJG,EAKHC,KALG,CAKIrB,KAAD,IAAW;AAChBK,wBAAOiB,IAAP,CAAY,yCAAZ,EAAuDtB,KAAK,CAACa,KAA7D;AACD,KAPG,CAAN;AAQA,QAAII,OAAO,CAACM,IAAZ,EAAkBb,OAAO,CAACa,IAAR;AACnB,GAX+B,CAYhC;;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,MAAX,EAAmBR,WAAnB,EAbgC,CAchC;;AACAN,EAAAA,OAAO,CAACc,EAAR,CAAW,QAAX,EAAqBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAArB,EAfgC,CAgBhC;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,SAAX,EAAsBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAtB;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,SAAX,EAAsBR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAtB,EAlBgC,CAmBhC;;AACAb,EAAAA,OAAO,CAACc,EAAR,CAAW,mBAAX,EAAgCR,WAAW,CAACS,IAAZ,CAAiB,IAAjB,EAAuB;AAAEF,IAAAA,IAAI,EAAE;AAAR,GAAvB,CAAhC;AACD",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "sourcesContent": [
        "import logger from \"loglevel\";\n\n// Middleware that will help us catch generic express-related errors\nfunction errorMiddleware(error, req, res, next) {\n  if (res.headersSent) {\n    next(error);\n  } else {\n    logger.error(error);\n    res.status(error.statusCode || 500);\n    res.json({\n      message: error.message,\n      ...(process.env.NODE_ENV === \"production\"\n        ? null\n        : { stack: error.stack }),\n    });\n  }\n}\n\n// This closes the server in the event of an error so\n// that our requests do not hang\nfunction setupCloseOnExit(server) {\n  async function exitHandler(options = {}) {\n    await server\n      .close()\n      .then(() => {\n        logger.info(\"Server successfully closed\");\n      })\n      .catch((error) => {\n        logger.warn(\"Something went wrong closing the server\", error.stack);\n      });\n    if (options.exit) process.exit();\n  }\n  // Do something when app is closing\n  process.on(\"exit\", exitHandler);\n  // Catches ctrl+c event\n  process.on(\"SIGINT\", exitHandler.bind(null, { exit: true }));\n  // Catches \"kill pid\" (for example: nodemon restart)\n  process.on(\"SIGUSR1\", exitHandler.bind(null, { exit: true }));\n  process.on(\"SIGUSR2\", exitHandler.bind(null, { exit: true }));\n  // Catches uncaught exceptions\n  process.on(\"uncaughtException\", exitHandler.bind(null, { exit: true }));\n}\n\nexport { errorMiddleware, setupCloseOnExit };\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1632573918661
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
        "sourceFileName": "authorization.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAuthUser = getAuthUser;\nexports.protect = protect;\n\nvar _client = require(\"@prisma/client\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst prisma = new _client.PrismaClient();\n\nasync function getAuthUser(req, res, next) {}\n\nasync function protect(req, res, next) {\n  if (!req.headers.authorization) {\n    return next({\n      message: \"You need to be logled in berfore you can visit!\",\n      statusCode: 401\n    });\n  }\n\n  try {\n    const token = req.headers.authorization;\n\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n\n    console.log(decoded);\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n      include: {\n        videos: true\n      }\n    });\n    req.user = user;\n    next();\n  } catch (error) {\n    next({\n      message: \"You have to be logged in ::: \" + req.headers.authorization + error,\n      statusCode: 401\n    });\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcml6YXRpb24uanMiXSwibmFtZXMiOlsicHJpc21hIiwiUHJpc21hQ2xpZW50IiwiZ2V0QXV0aFVzZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwicHJvdGVjdCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJ0b2tlbiIsImRlY29kZWQiLCJqd3QiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJpbmNsdWRlIiwidmlkZW9zIiwiZXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBSUMsb0JBQUosRUFBZjs7QUFFTyxlQUFlQyxXQUFmLENBQTJCQyxHQUEzQixFQUFnQ0MsR0FBaEMsRUFBcUNDLElBQXJDLEVBQTJDLENBQUc7O0FBRTlDLGVBQWVDLE9BQWYsQ0FBdUJILEdBQXZCLEVBQTRCQyxHQUE1QixFQUFpQ0MsSUFBakMsRUFBdUM7QUFFNUMsTUFBSSxDQUFDRixHQUFHLENBQUNJLE9BQUosQ0FBWUMsYUFBakIsRUFBZ0M7QUFDOUIsV0FBT0gsSUFBSSxDQUFDO0FBQ1ZJLE1BQUFBLE9BQU8sRUFBRSxpREFEQztBQUVWQyxNQUFBQSxVQUFVLEVBQUU7QUFGRixLQUFELENBQVg7QUFLRDs7QUFFRCxNQUFJO0FBQ0YsVUFBTUMsS0FBSyxHQUFHUixHQUFHLENBQUNJLE9BQUosQ0FBWUMsYUFBMUI7O0FBQ0EsVUFBTUksT0FBTyxHQUFHQyxzQkFBSUMsTUFBSixDQUFXSCxLQUFYLEVBQWtCSSxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUIsQ0FBaEI7O0FBRUFDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZUCxPQUFaO0FBQ0EsVUFBTVEsSUFBSSxHQUFHLE1BQU1wQixNQUFNLENBQUNvQixJQUFQLENBQVlDLFVBQVosQ0FBdUI7QUFDeENDLE1BQUFBLEtBQUssRUFBRTtBQUNMQyxRQUFBQSxFQUFFLEVBQUVYLE9BQU8sQ0FBQ1c7QUFEUCxPQURpQztBQUl4Q0MsTUFBQUEsT0FBTyxFQUFFO0FBQ1BDLFFBQUFBLE1BQU0sRUFBRTtBQUREO0FBSitCLEtBQXZCLENBQW5CO0FBU0F0QixJQUFBQSxHQUFHLENBQUNpQixJQUFKLEdBQVdBLElBQVg7QUFDQWYsSUFBQUEsSUFBSTtBQUNMLEdBaEJELENBZ0JFLE9BQU9xQixLQUFQLEVBQWM7QUFDZHJCLElBQUFBLElBQUksQ0FBQztBQUNISSxNQUFBQSxPQUFPLEVBQUUsa0NBQWtDTixHQUFHLENBQUNJLE9BQUosQ0FBWUMsYUFBOUMsR0FBOERrQixLQURwRTtBQUVIaEIsTUFBQUEsVUFBVSxFQUFFO0FBRlQsS0FBRCxDQUFKO0FBS0Q7QUFDRiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9KYXZhU2NyaXB0L3lvdVR1YmUvc2VydmVyL3NyYy9taWRkbGV3YXJlLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXG5cbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF1dGhVc2VyKHJlcSwgcmVzLCBuZXh0KSB7IH1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb3RlY3QocmVxLCByZXMsIG5leHQpIHtcblxuICBpZiAoIXJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24pIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIllvdSBuZWVkIHRvIGJlIGxvZ2xlZCBpbiBiZXJmb3JlIHlvdSBjYW4gdmlzaXQhXCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDFcblxuICAgIH0pXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVClcblxuICAgIGNvbnNvbGUubG9nKGRlY29kZWQpXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQ6IGRlY29kZWQuaWRcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHZpZGVvczogdHJ1ZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXEudXNlciA9IHVzZXJcbiAgICBuZXh0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIllvdSBoYXZlIHRvIGJlIGxvZ2dlZCBpbiA6OjogXCIgKyByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uICsgZXJyb3IsXG4gICAgICBzdGF0dXNDb2RlOiA0MDEsXG5cbiAgICB9KVxuICB9XG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "authorization.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getAuthUser",
        "req",
        "res",
        "next",
        "protect",
        "headers",
        "authorization",
        "message",
        "statusCode",
        "token",
        "decoded",
        "jwt",
        "verify",
        "process",
        "env",
        "JWT_SECRET",
        "console",
        "log",
        "user",
        "findUnique",
        "where",
        "id",
        "include",
        "videos",
        "error"
      ],
      "mappings": ";;;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,oBAAJ,EAAf;;AAEO,eAAeC,WAAf,CAA2BC,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C,CAAG;;AAE9C,eAAeC,OAAf,CAAuBH,GAAvB,EAA4BC,GAA5B,EAAiCC,IAAjC,EAAuC;AAE5C,MAAI,CAACF,GAAG,CAACI,OAAJ,CAAYC,aAAjB,EAAgC;AAC9B,WAAOH,IAAI,CAAC;AACVI,MAAAA,OAAO,EAAE,iDADC;AAEVC,MAAAA,UAAU,EAAE;AAFF,KAAD,CAAX;AAKD;;AAED,MAAI;AACF,UAAMC,KAAK,GAAGR,GAAG,CAACI,OAAJ,CAAYC,aAA1B;;AACA,UAAMI,OAAO,GAAGC,sBAAIC,MAAJ,CAAWH,KAAX,EAAkBI,OAAO,CAACC,GAAR,CAAYC,UAA9B,CAAhB;;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAYP,OAAZ;AACA,UAAMQ,IAAI,GAAG,MAAMpB,MAAM,CAACoB,IAAP,CAAYC,UAAZ,CAAuB;AACxCC,MAAAA,KAAK,EAAE;AACLC,QAAAA,EAAE,EAAEX,OAAO,CAACW;AADP,OADiC;AAIxCC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE;AADD;AAJ+B,KAAvB,CAAnB;AASAtB,IAAAA,GAAG,CAACiB,IAAJ,GAAWA,IAAX;AACAf,IAAAA,IAAI;AACL,GAhBD,CAgBE,OAAOqB,KAAP,EAAc;AACdrB,IAAAA,IAAI,CAAC;AACHI,MAAAA,OAAO,EAAE,kCAAkCN,GAAG,CAACI,OAAJ,CAAYC,aAA9C,GAA8DkB,KADpE;AAEHhB,MAAAA,UAAU,EAAE;AAFT,KAAD,CAAJ;AAKD;AACF",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "sourcesContent": [
        "import { PrismaClient } from \"@prisma/client\";\nimport jwt from 'jsonwebtoken'\n\nconst prisma = new PrismaClient();\n\nexport async function getAuthUser(req, res, next) { }\n\nexport async function protect(req, res, next) {\n\n  if (!req.headers.authorization) {\n    return next({\n      message: \"You need to be logled in berfore you can visit!\",\n      statusCode: 401\n\n    })\n  }\n\n  try {\n    const token = req.headers.authorization;\n    const decoded = jwt.verify(token, process.env.JWT_SECRET)\n\n    console.log(decoded)\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n      include: {\n        videos: true\n      }\n    })\n\n    req.user = user\n    next();\n  } catch (error) {\n    next({\n      message: \"You have to be logged in ::: \" + req.headers.authorization + error,\n      statusCode: 401,\n\n    })\n  }\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1632809602197
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"filename\":\"/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/meroj/Desktop/JavaScript/youTube\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"}},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/meroj/Desktop/JavaScript/youTube",
      "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/meroj/Desktop/JavaScript/youTube",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-private-property-in-object",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "BinaryExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": "#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error"
          }
        },
        {
          "key": "syntax-class-properties",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-numeric-separator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-logical-assignment-operators",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "AssignmentExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-nullish-coalescing-operator",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": true,
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            },
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-export-namespace-from",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js",
        "plugins": [
          "privateIn",
          "classProperties",
          "classPrivateProperties",
          "classPrivateMethods",
          "numericSeparator",
          "logicalAssignment",
          "nullishCoalescingOperator",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport",
          "exportNamespaceFrom"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/authorization.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
        "sourceFileName": "authorization.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAuthUser = getAuthUser;\nexports.protect = protect;\n\nvar _client = require(\"@prisma/client\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst prisma = new _client.PrismaClient();\n\nasync function getAuthUser(req, res, next) {}\n\nasync function protect(req, res, next) {\n  if (!req.headers.authorization) {\n    return next({\n      message: \"You need to be logled in berfore you can visit!\",\n      statusCode: 401\n    });\n  }\n\n  try {\n    const token = req.headers.authorization;\n\n    const decoded = _jsonwebtoken.default.verify(token, process.env.JWT_SECRET);\n\n    console.log(decoded);\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n      include: {\n        videos: true\n      }\n    });\n    req.user = user;\n    next();\n  } catch (error) {\n    next({\n      message: \"You have to be logged in ::: \" + req.headers.authorization + error,\n      statusCode: 401\n    });\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcml6YXRpb24uanMiXSwibmFtZXMiOlsicHJpc21hIiwiUHJpc21hQ2xpZW50IiwiZ2V0QXV0aFVzZXIiLCJyZXEiLCJyZXMiLCJuZXh0IiwicHJvdGVjdCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJ0b2tlbiIsImRlY29kZWQiLCJqd3QiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJpbmNsdWRlIiwidmlkZW9zIiwiZXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsSUFBSUMsb0JBQUosRUFBZjs7QUFFTyxlQUFlQyxXQUFmLENBQTJCQyxHQUEzQixFQUFnQ0MsR0FBaEMsRUFBcUNDLElBQXJDLEVBQTJDLENBQUc7O0FBRTlDLGVBQWVDLE9BQWYsQ0FBdUJILEdBQXZCLEVBQTRCQyxHQUE1QixFQUFpQ0MsSUFBakMsRUFBdUM7QUFFNUMsTUFBSSxDQUFDRixHQUFHLENBQUNJLE9BQUosQ0FBWUMsYUFBakIsRUFBZ0M7QUFDOUIsV0FBT0gsSUFBSSxDQUFDO0FBQ1ZJLE1BQUFBLE9BQU8sRUFBRSxpREFEQztBQUVWQyxNQUFBQSxVQUFVLEVBQUU7QUFGRixLQUFELENBQVg7QUFLRDs7QUFFRCxNQUFJO0FBQ0YsVUFBTUMsS0FBSyxHQUFHUixHQUFHLENBQUNJLE9BQUosQ0FBWUMsYUFBMUI7O0FBQ0EsVUFBTUksT0FBTyxHQUFHQyxzQkFBSUMsTUFBSixDQUFXSCxLQUFYLEVBQWtCSSxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUIsQ0FBaEI7O0FBRUFDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZUCxPQUFaO0FBQ0EsVUFBTVEsSUFBSSxHQUFHLE1BQU1wQixNQUFNLENBQUNvQixJQUFQLENBQVlDLFVBQVosQ0FBdUI7QUFDeENDLE1BQUFBLEtBQUssRUFBRTtBQUNMQyxRQUFBQSxFQUFFLEVBQUVYLE9BQU8sQ0FBQ1c7QUFEUCxPQURpQztBQUl4Q0MsTUFBQUEsT0FBTyxFQUFFO0FBQ1BDLFFBQUFBLE1BQU0sRUFBRTtBQUREO0FBSitCLEtBQXZCLENBQW5CO0FBU0F0QixJQUFBQSxHQUFHLENBQUNpQixJQUFKLEdBQVdBLElBQVg7QUFDQWYsSUFBQUEsSUFBSTtBQUNMLEdBaEJELENBZ0JFLE9BQU9xQixLQUFQLEVBQWM7QUFDZHJCLElBQUFBLElBQUksQ0FBQztBQUNISSxNQUFBQSxPQUFPLEVBQUUsa0NBQWtDTixHQUFHLENBQUNJLE9BQUosQ0FBWUMsYUFBOUMsR0FBOERrQixLQURwRTtBQUVIaEIsTUFBQUEsVUFBVSxFQUFFO0FBRlQsS0FBRCxDQUFKO0FBS0Q7QUFDRiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWVyb2ovRGVza3RvcC9KYXZhU2NyaXB0L3lvdVR1YmUvc2VydmVyL3NyYy9taWRkbGV3YXJlLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXG5cbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF1dGhVc2VyKHJlcSwgcmVzLCBuZXh0KSB7IH1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb3RlY3QocmVxLCByZXMsIG5leHQpIHtcblxuICBpZiAoIXJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24pIHtcbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIllvdSBuZWVkIHRvIGJlIGxvZ2xlZCBpbiBiZXJmb3JlIHlvdSBjYW4gdmlzaXQhXCIsXG4gICAgICBzdGF0dXNDb2RlOiA0MDFcblxuICAgIH0pXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVClcblxuICAgIGNvbnNvbGUubG9nKGRlY29kZWQpXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQ6IGRlY29kZWQuaWRcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHZpZGVvczogdHJ1ZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXEudXNlciA9IHVzZXJcbiAgICBuZXh0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbmV4dCh7XG4gICAgICBtZXNzYWdlOiBcIllvdSBoYXZlIHRvIGJlIGxvZ2dlZCBpbiA6OjogXCIgKyByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uICsgZXJyb3IsXG4gICAgICBzdGF0dXNDb2RlOiA0MDEsXG5cbiAgICB9KVxuICB9XG59Il19",
    "map": {
      "version": 3,
      "sources": [
        "authorization.js"
      ],
      "names": [
        "prisma",
        "PrismaClient",
        "getAuthUser",
        "req",
        "res",
        "next",
        "protect",
        "headers",
        "authorization",
        "message",
        "statusCode",
        "token",
        "decoded",
        "jwt",
        "verify",
        "process",
        "env",
        "JWT_SECRET",
        "console",
        "log",
        "user",
        "findUnique",
        "where",
        "id",
        "include",
        "videos",
        "error"
      ],
      "mappings": ";;;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,IAAIC,oBAAJ,EAAf;;AAEO,eAAeC,WAAf,CAA2BC,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C,CAAG;;AAE9C,eAAeC,OAAf,CAAuBH,GAAvB,EAA4BC,GAA5B,EAAiCC,IAAjC,EAAuC;AAE5C,MAAI,CAACF,GAAG,CAACI,OAAJ,CAAYC,aAAjB,EAAgC;AAC9B,WAAOH,IAAI,CAAC;AACVI,MAAAA,OAAO,EAAE,iDADC;AAEVC,MAAAA,UAAU,EAAE;AAFF,KAAD,CAAX;AAKD;;AAED,MAAI;AACF,UAAMC,KAAK,GAAGR,GAAG,CAACI,OAAJ,CAAYC,aAA1B;;AACA,UAAMI,OAAO,GAAGC,sBAAIC,MAAJ,CAAWH,KAAX,EAAkBI,OAAO,CAACC,GAAR,CAAYC,UAA9B,CAAhB;;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAYP,OAAZ;AACA,UAAMQ,IAAI,GAAG,MAAMpB,MAAM,CAACoB,IAAP,CAAYC,UAAZ,CAAuB;AACxCC,MAAAA,KAAK,EAAE;AACLC,QAAAA,EAAE,EAAEX,OAAO,CAACW;AADP,OADiC;AAIxCC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE;AADD;AAJ+B,KAAvB,CAAnB;AASAtB,IAAAA,GAAG,CAACiB,IAAJ,GAAWA,IAAX;AACAf,IAAAA,IAAI;AACL,GAhBD,CAgBE,OAAOqB,KAAP,EAAc;AACdrB,IAAAA,IAAI,CAAC;AACHI,MAAAA,OAAO,EAAE,kCAAkCN,GAAG,CAACI,OAAJ,CAAYC,aAA9C,GAA8DkB,KADpE;AAEHhB,MAAAA,UAAU,EAAE;AAFT,KAAD,CAAJ;AAKD;AACF",
      "sourceRoot": "/Users/meroj/Desktop/JavaScript/youTube/server/src/middleware/",
      "sourcesContent": [
        "import { PrismaClient } from \"@prisma/client\";\nimport jwt from 'jsonwebtoken'\n\nconst prisma = new PrismaClient();\n\nexport async function getAuthUser(req, res, next) { }\n\nexport async function protect(req, res, next) {\n\n  if (!req.headers.authorization) {\n    return next({\n      message: \"You need to be logled in berfore you can visit!\",\n      statusCode: 401\n\n    })\n  }\n\n  try {\n    const token = req.headers.authorization;\n    const decoded = jwt.verify(token, process.env.JWT_SECRET)\n\n    console.log(decoded)\n    const user = await prisma.user.findUnique({\n      where: {\n        id: decoded.id\n      },\n      include: {\n        videos: true\n      }\n    })\n\n    req.user = user\n    next();\n  } catch (error) {\n    next({\n      message: \"You have to be logged in ::: \" + req.headers.authorization + error,\n      statusCode: 401,\n\n    })\n  }\n}"
      ]
    },
    "sourceType": "script",
    "mtime": 1632809602197
  }
}